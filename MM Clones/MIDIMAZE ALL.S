; MIDEMAZE.D8A
; 0x000000: 0x5076 = color graphics
; 0x005076: 0x5A62 = bw graphics
; 0x00AAD8: 0x82 = sinus table
; 0x00AB5A: 0xC64 = face data
; 0x00B7BE: 0xF7D0 = shape images

max_elements    EQU 100         ;maximale Anzahl gleichzeitig sichtbarer Objekte (100 ist normal)

ply_y           EQU 0
ply_x           EQU 2
ply_richtung    EQU 4
ply_unused_6    EQU 6
ply_unused_8    EQU 8
ply_lives       EQU 10
ply_refresh     EQU 12
ply_hitflag     EQU 14
ply_reload      EQU 16
ply_score       EQU 18
ply_gunman      EQU 20
ply_looser      EQU 22
ply_team        EQU 24
ply_dronetype   EQU 26
28.w
30.w
32.w
34.w
36.w
38.w
40.w
42.w
44.w
46.w
48 array of 2 words * 6
72.w
76.w
78.w
80.w * ?16/18? => next == 112
116.w
118.w
ply_plist       EQU 120
ply_shooty      EQU 122
ply_shootx      EQU 124
ply_shootr      EQU 126
ply_shoot       EQU 128
ply_slist       EQU 130
ply_size        EQU 132

      TEXT
      MOVEA.L   A7,A5
      MOVEA.L   #ustk,A7
      MOVEA.L   4(A5),A5
      MOVE.L    12(A5),D0
      ADD.L     20(A5),D0
      ADD.L     28(A5),D0
      ADD.L     #$100,D0
      MOVE.L    D0,-(A7)
      MOVE.L    A5,-(A7)
      MOVE.W    D0,-(A7)
      MOVE.W    #74,-(A7) 	;MSHRINK
      TRAP      #1
      ADDA.L    #12,A7
      JSR       _main
      MOVE.L    #0,-(A7)
      TRAP      #1

_crystal: MOVE.L    4(A7),D1
      MOVE.W    #200,D0 	;AES-AUFRUF
      TRAP      #2
      RTS

_read_vbclock:LINK      A6,#-4
      MOVE.W    $464.W,_read_vbclock_ret
      UNLK      A6
      RTS

read_vbclock:LINK      A6,#-4
      MOVE.L    #_read_vbclock,(A7)
      MOVE.W    #38,-(A7)                  ; Supexec()
      JSR       _xbios
      ADDQ.L    #2,A7
      MOVE.W    _read_vbclock_ret,D0
      BRA       L0003
L0003:UNLK      A6
      RTS

get_midi:LINK      A6,#-4
      JSR       read_vbclock
      ADD.W     8(A6),D0
      MOVE.W    D0,midi_timeout_value
get_midi1:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BEQ       get_midi2
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                    ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      BRA       get_midi_return
get_midi2:JSR       read_vbclock
      SUB.W     midi_timeout_value,D0
      AND.W     #$8000,D0
      BNE       get_midi3
      MOVEQ     #-1,D0
      BRA       get_midi_return
get_midi3:BRA.S     get_midi1
get_midi_return:UNLK      A6
      RTS

_main: LINK      A6,#-176
      JSR       appl_init

      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.L    #temp_WORD,(A7)
      MOVE.L    #temp_WORD,-(A7)
      MOVE.L    #temp_WORD,-(A7)
      MOVE.L    #temp_WORD,-(A7)
      JSR       graf_handle
      ADDA.L    #12,A7
      MOVE.W    D0,vdi_handle

      CLR.W     -170(A6)
      BRA       L000B
L000A:MOVEA.W   -170(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #1,-22(A0)
      ADDQ.W    #1,-170(A6)
L000B:CMPI.W    #10,-170(A6)
      BLT.S     L000A
      MOVE.W    #2,-2(A6)

      MOVE.L    A6,(A7)
      ADDI.L    #-136,(A7)
      MOVE.L    #vdi_handle,-(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-22,(A7)
      JSR       v_opnvwk
      ADDQ.L    #8,A7

      MOVE.W    vdi_handle,(A7)
      JSR       v_clrwk

      CLR.W     -170(A6)
      BRA       L000D
L000C:MOVEA.W   -170(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.L    A0,-(A7)
      MOVE.W    #-1,-(A7)
      MOVE.W    -170(A6),-(A7)
      MOVE.W    #7,-(A7)                ; Setcolor()
      JSR       _xbios
      ADDQ.L    #6,A7
      MOVEA.L   (A7)+,A0
      MOVE.W    D0,-168(A0)
      ADDQ.W    #1,-170(A6)
L000D:CMPI.W    #16,-170(A6)
      BLT.S     L000C

      JSR       run_game

      MOVE.W    vdi_handle,(A7)
      JSR       v_clrwk
      MOVE.L    A6,(A7)
      ADDI.L    #-168,(A7)
      MOVE.W    #6,-(A7)                ; Setpalette()
      JSR       _xbios
      ADDQ.L    #2,A7
      MOVE.W    vdi_handle,(A7)
      JSR       v_clsvwk
      JSR       appl_exit
      UNLK      A6
      RTS


run_game:LINK      A6,#-6
      MOVE.W    #4,(A7)                    ; Getrez()
      JSR       _xbios
      MOVE.W    D0,screen_rez

      CMPI.W    #1,screen_rez
      BNE       L000F
      MOVE.L    #str_please_run_in_low_resolution_or_high_res,(A7) ; '[3][ |Please run in|LOW resolution|or HIGH res.][OK]'
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       run_game_return
L000F:

      TST.W     screen_rez
      BEQ       L0010
      MOVE.W    #160,D0
      BRA       L0011
L0010:MOVEQ     #80,D0
L0011:MOVE.W    D0,window_width

      TST.W     screen_rez
      BEQ       L0012
      MOVE.W    #160,D0
      BRA       L0013
L0012:MOVEQ     #80,D0
L0013:MOVE.W    D0,window_width2

      TST.W     screen_rez
      BEQ       L0014
      MOVEQ     #100,D0
      BRA       L0015
L0014:MOVEQ     #50,D0
L0015:MOVE.W    D0,window_height

      TST.W     screen_rez
      BEQ       L0016
      MOVEQ     #100,D0
      BRA       L0017
L0016:MOVEQ     #50,D0
L0017:MOVE.W    D0,window_height2

      TST.W     screen_rez
      BEQ       L0018
      MOVEQ     #40,D0
      BRA       L0019
L0018:MOVEQ     #20,D0
L0019:MOVE.W    D0,word_per_line

      TST.W     screen_rez
      BEQ       L001A
      MOVE.W    #100*80+4,D0
      BRA       L001B
L001A:MOVE.W    #50*160+8,D0
L001B:MOVE.W    D0,main_wind_off

      TST.W     screen_rez
      BEQ       L001C
      MOVE.W    #132*80+48,D0
      BRA       L001D
L001C:MOVE.W    #66*160+96,D0
L001D:MOVE.W    D0,pscore_wind_off

      TST.W     screen_rez
      BEQ       L001E
      MOVE.W    #20*80+48,D0
      BRA       L001F
L001E:MOVE.W    #10*160+96,D0
L001F:MOVE.W    D0,screen_offset_score_notes

      TST.W     screen_rez
      BEQ       L0020
      MOVE.W    #32*80+32,D0
      BRA       L0021
L0020:MOVE.W    #16*160+64,D0
L0021:MOVE.W    D0,live_wind_off

      JSR       calc_160_tab
      JSR       calc_80_tab
      JSR       init_screen
      TST.W     D0
      BLT       run_game_return
      JSR       load_datas
      TST.W     D0
      BLT       run_game_return
      JSR       init_faces_shapes
      JSR       init_some_shp
      JSR       init_live_shape
      JSR       init_end_shape
      JSR       calc_sin_table
      JSR       init_richtung
      JSR       init_sound
      JSR       calc_drone_angle_table
      CLR.W     drones_active

      CLR.W     -2(A6)
      BRA       L0023
L0022:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      CLR.W     (A0)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #akt_score,A0
      MOVE.W    #-1,(A0)
      ADDQ.W    #1,-2(A6)
L0023:CMPI.W    #16,-2(A6)
      BLT.S     L0022

      MOVE.W    #1,all_players
      JSR       dispatch
      JSR       exit_aes_window
      JSR       switch_org_scr
      JSR       exit_sound
run_game_return:UNLK      A6
      RTS

calc_drone_angle_table:LINK      A6,#-10
      CLR.W     -2(A6)
      BRA       L0027
L0026:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      MOVE.W    #-1,(A0)
      ADDQ.W    #1,-2(A6)
L0027:CMPI.W    #32,-2(A6)
      BLE.S     L0026

      MOVE.W    #32,-2(A6)
      BRA       L0029
L0028:MOVE.W    #1000,-4(A6)
      CLR.W     -6(A6)
      MOVE.W    -2(A6),(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      JSR       sincos
      ADDQ.L    #8,A7
      MOVE.W    -4(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #32,-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      MOVE.W    -2(A6),(A0)
      SUBQ.W    #1,-2(A6)
L0029:TST.W     -2(A6)
      BGE.S     L0028

      CLR.W     -2(A6)
      BRA       L002C
L002A:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      CMPI.W    #-1,(A0)
      BNE       L002B
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      MOVEA.W   -2(A6),A1
      SUBQ.W    #1,A1
      ADDA.L    A1,A1
      ADDA.L    #drone_angle_table,A1
      MOVE.W    (A1),(A0)
L002B:ADDQ.W    #1,-2(A6)
L002C:CMPI.W    #32,-2(A6)
      BLE.S     L002A
      UNLK      A6
      RTS

load_datas:LINK      A6,#-4
      MOVE.L    #load_buffer1,(A7)
      MOVE.L    #$104B6,-(A7)
      MOVE.W    midimaze_d8a_filehandle,-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      CMP.L     #$104B6,D0
      BEQ       L002E
      JSR       switch_org_scr
      MOVE.L    #str_booboo_reading_midimaze_d8a,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVE.W    midimaze_d8a_filehandle,(A7)
      MOVE.W    #$3E,-(A7)                  ; Fclose()
      JSR       _gemdos
      ADDQ.L    #2,A7
      MOVEQ     #-1,D0
      BRA       L002F
L002E:MOVE.W    midimaze_d8a_filehandle,(A7)
      MOVE.W    #$3E,-(A7)                  ; Fclose()
      JSR       _gemdos
      ADDQ.L    #2,A7
      MOVE.L    #load_buffer1,sinus_table
      MOVE.L    #shape_face_data,shape_face_ptr
      MOVE.L    #shape_img,shape_ptr
      CLR.W     D0
      BRA       L002F
L002F:UNLK      A6
      RTS

init_richtung:LINK      A6,#-6
      CLR.W     -2(A6)
      BRA       L0032
L0031:MOVE.W    -2(A6),D0
      MULS      #14,D0
      ADD.L     #richtung_table,D0
      MOVEA.L   D0,A0
      MOVE.W    (A0),D0
      ASL.W     #8,D0
      MOVE.W    D0,(A0)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      ADD.L     #richtung_table,D0
      MOVEA.L   D0,A0
      MOVE.W    2(A0),D0
      ASL.W     #8,D0
      MOVE.W    D0,2(A0)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      ADD.L     #richtung_table,D0
      MOVEA.L   D0,A0
      MOVE.W    4(A0),D0
      ASL.W     #8,D0
      MOVE.W    D0,4(A0)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      ADD.L     #richtung_table,D0
      MOVEA.L   D0,A0
      MOVE.W    6(A0),D0
      ASL.W     #8,D0
      MOVE.W    D0,6(A0)
      ADDQ.W    #1,-2(A6)
L0032:CMPI.W    #8,-2(A6)
      BLT.S     L0031
      UNLK      A6
      RTS

make_draw_list:LINK      A6,#-6
      MOVE.W    8(A6),var_y_koord
      MOVE.W    10(A6),var_x_koord
      MOVE.W    12(A6),var_richtung
      MOVE.W    12(A6),D0
      ASR.W     #5,D0
      AND.W     #7,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    12(A6),(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    12(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    6(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    4(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    2(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    0(A0,D1.L),-(A7)
      MOVE.W    10(A6),-(A7)
      ANDI.W    #$FF,(A7)
      MOVE.W    8(A6),-(A7)
      ANDI.W    #$FF,(A7)
      JSR       dm_calc_blick
      ADDA.L    #14,A7
      JSR       set_all_player
      MOVE.W    -2(A6),(A7)
      ANDI.W    #1,(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    12(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    10(A0,D1.L),-(A7)
      MOVE.W    -2(A6),D0
      MULS      #14,D0
      MOVEA.L   D0,A0
      MOVE.L    #richtung_table,D1
      MOVE.W    8(A0,D1.L),-(A7)
      MOVE.W    10(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       draw_mazes_d
      ADDA.L    #10,A7
      UNLK      A6
      RTS

init_screen:LINK      A6,#0
      MOVEM.L   A4-A5/D6-D7,-(A7)
      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs

      MOVE.L    #screen_buffer,D0
      AND.L     #$FFFFFF00,D0
      SUBA.L    A1,A1
      MOVE.W    A1,screen_flag
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #screen_ptr,A1
      MOVE.L    D0,(A1)

      MOVE.W    #2,(A7)                 ; Physbase()
      JSR       _xbios
      MOVE.L    D0,screen_ptr+4

      JSR       init_aes_window
      TST.W     D0
      BGE       L0035
      MOVEQ     #-1,D0
      BRA       init_screen_return

L0035:JSR       check_copy_protection
      MOVE.W    D0,protection_flag
      CLR.W     (A7)
      MOVE.L    #str_midimaze_d8a,-(A7)
      MOVE.W    #$3D,-(A7)                  ; Fopen()
      JSR       _gemdos
      ADDQ.L    #6,A7
      MOVE.W    D0,midimaze_d8a_filehandle
      TST.W     midimaze_d8a_filehandle
      BGE       L0036
      JSR       switch_org_scr
      MOVE.L    #str_booboo_opening_midimaze_d8a,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-1,D0
      BRA       init_screen_return

L0036:TST.W     screen_rez
      BEQ       L0037
      JSR       load_sw_shapes
      BRA       L0038
L0037:JSR       load_color_shapes
L0038:TST.W     D0
      BGE       L0039
      MOVEQ     #-1,D0
      BRA       init_screen_return

L0039:JSR       switch_screens
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #screen_ptr,A0
      MOVEA.L   (A0),A5
      MOVE.W    screen_flag,D0
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #screen_ptr,A0
      MOVEA.L   (A0),A4
      CLR.W     D7
      BRA       L003B
L003A:MOVE.W    (A4)+,(A5)+
      ADDQ.W    #1,D7
L003B:CMP.W     #16000,D7
      BLT.S     L003A
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      CLR.W     screen_flag
      CLR.W     (A7)
      JSR       save_part_of_screen_for_dialog
      CLR.W     D0
      BRA       init_screen_return
init_screen_return:TST.L     (A7)+
      MOVEM.L   (A7)+,A4-A5/D7
      UNLK      A6
      RTS

load_color_shapes:LINK      A6,#-4
      MOVE.L    #color_palette,(A7)
      MOVE.W    #6,-(A7)                ; Setpalette()
      JSR       _xbios
      ADDQ.L    #2,A7
      MOVE.L    #load_buffer1,(A7)
      MOVE.L    #$5076,-(A7)
      MOVE.W    midimaze_d8a_filehandle,-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.L    #load_buffer1,-(A7)
      JSR       decompress_image_to_screen
      ADDQ.L    #4,A7
      MOVE.L    #load_buffer1,(A7)
      MOVE.L    #$5A62,-(A7)
      MOVE.W    midimaze_d8a_filehandle,-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      CLR.W     D0
      BRA       L003E
L003E:UNLK      A6
      RTS

load_sw_shapes:LINK      A6,#-4
      MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)            ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
      MOVE.L    #load_buffer1,(A7)
      MOVE.L    #$5076,-(A7)
      MOVE.W    midimaze_d8a_filehandle,-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      MOVE.L    #load_buffer1,(A7)
      MOVE.L    #$5A62,-(A7)
      MOVE.W    midimaze_d8a_filehandle,-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.L    #load_buffer1,-(A7)
      JSR       decompress_image_to_screen
      ADDQ.L    #4,A7
      CLR.W     D0
      BRA       L0040
L0040:UNLK      A6
      RTS

set_screen_offs:LINK      A6,#-4
      MOVE.W    8(A6),screen_offset
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),D0
      MOVE.W    screen_offset,D1
      EXT.L     D1
      ADD.L     D1,D0
      MOVE.L    D0,screen_offs_adr
      UNLK      A6
      RTS

switch_screens:LINK      A6,#-4
      EORI.W    #1,screen_flag
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),D0
      MOVE.W    screen_offset,D1
      EXT.L     D1
      ADD.L     D1,D0
      MOVE.L    D0,screen_offs_adr
      MOVE.W    #-1,(A7)
      MOVE.W    screen_flag,D0
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),-(A7)
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      UNLK      A6
      RTS

switch_logbase:LINK      A6,#-4
      EORI.W    #1,screen_flag
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),D0
      MOVE.W    screen_offset,D1
      EXT.L     D1
      ADD.L     D1,D0
      MOVE.L    D0,screen_offs_adr
      MOVE.W    #-1,(A7)
      MOVE.L    #-1,-(A7)
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #screen_ptr,D1
      MOVE.L    0(A0,D1.L),-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      UNLK      A6
      RTS

switch_org_scr:LINK      A6,#-4
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      UNLK      A6
      RTS

init_sound:LINK      A6,#-6
      CLR.W     -2(A6)
      BRA       L0047
L0046:MOVEA.W   -2(A6),A0
      ADDA.L    #saved_sound_regs,A0
      MOVE.L    A0,-(A7)
      MOVE.W    -2(A6),-(A7)
      CLR.W     -(A7)
      MOVE.W    #$1C,-(A7)              ; Giaccess()
      JSR       _xbios
      ADDQ.L    #6,A7
      MOVEA.L   (A7)+,A0
      MOVE.B    D0,(A0)
      ADDQ.W    #1,-2(A6)
L0047:CMPI.W    #14,-2(A6)
      BLT.S     L0046
      MOVE.L    #sound_shot,sound_shot_ptr
      MOVE.L    #sound_hit,sound_hit_ptr
      UNLK      A6
      RTS

exit_sound:LINK      A6,#-6
      CLR.W     -2(A6)
      BRA       L004A
L0049:MOVE.W    -2(A6),(A7)
      ORI.W     #$80,(A7)
      MOVEA.W   -2(A6),A0
      MOVE.L    #saved_sound_regs,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVE.W    D0,-(A7)
      MOVE.W    #$1C,-(A7)              ; Giaccess()
      JSR       _xbios
      ADDQ.L    #4,A7
      ADDQ.W    #1,-2(A6)
L004A:CMPI.W    #14,-2(A6)
      BLT.S     L0049
      UNLK      A6
      RTS

dispatch:LINK      A6,#-6
      MOVE.W    #3,-2(A6)           ;dispatch_automatic
dispatch_loop:
      MOVE.W    -2(A6),D0
      BRA       L0057

; case -1: (quit)
dispatch_nothing:
      BRA       dispatch_continue

; case 0:
dispatch_master:
      CLR.W     (A7)            ;master
      JSR       master_solo_loop
      MOVE.W    D0,-2(A6)
      BRA       dispatch_continue

; case 1: (forced Slave)
dispatch_slave:
      CLR.W     (A7)
      JSR       slave_midicam_loop
      MOVE.W    D0,-2(A6)
      BRA       dispatch_continue

; case 2:
dispatch_solo:
      MOVE.W    #1,(A7)         ;solo
      JSR       master_solo_loop
      MOVE.W    D0,-2(A6)
      BRA       dispatch_continue

; case 3: (Master)
dispatch_automatic:
      BRA       L0053
L0052:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L0053:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L0052
      CLR.W     (A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,own_number
      TST.W     own_number
      BNE       L0054
      CLR.W     D0
      BRA       L0055
L0054:MOVEQ     #1,D0
L0055:MOVE.W    D0,-2(A6)
      BRA       dispatch_continue

; case 4: Midicam
dispatch_midicam:
      MOVE.W    #1,(A7)
      JSR       slave_midicam_loop
      MOVE.W    D0,-2(A6)
      BRA       dispatch_continue

L0057:SUB.W     #-1,D0
      CMP.W     #5,D0
      BHI       dispatch_continue
      ASL.W     #2,D0
      MOVEA.W   D0,A0
      ADDA.L    #dispatch_table,A0
      MOVEA.L   (A0),A0
      JMP       (A0)
dispatch_continue:CMPI.W    #-1,-2(A6)
      BNE       dispatch_loop
      UNLK      A6
      RTS

init_end_shape:LINK      A6,#-4
      MOVE.L    #loosershape_img,loosershape_ptr
      MOVE.L    #blinzshape_img,blinzshape_ptr
      TST.W     screen_rez
      BEQ       L005A
      MOVE.L    #18,(A7)
      MOVE.L    loosershape_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
      MOVE.L    #6,(A7)
      MOVE.L    blinzshape_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
L005A:UNLK      A6
      RTS

play_game:LINK      A6,#-32
      CLR.W     -16(A6)
      CLR.W     -18(A6)
      CLR.W     -20(A6)
      CLR.W     -26(A6)
      CLR.W     -28(A6)
      CLR.W     screen_flag
      CLR.W     display_2d_map_flag
      TST.W     protection_flag
      BNE       L005C
      MOVE.W    #-2,machines_online
      MOVE.W    #-2,all_players
L005C:TST.W     user_is_midicam
      BEQ       L005D
      CLR.W     own_number
      MOVE.W    #50,midicam_timer_counter
      MOVE.W    #1,midicam_autoselect_player_flag
L005D:MOVE.W    screen_offset_score_notes,(A7)
      JSR       set_screen_offs

      CLR.W     -4(A6)
      BRA       L005F
L005E:MOVE.W    #-1,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       draw_one_note_score
      ADDQ.L    #2,A7
      ADDQ.W    #1,-4(A6)
L005F:CMPI.W    #16,-4(A6)
      BLT.S     L005E

      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs

      MOVE.W    active_drones,D0
      ADD.W     active_drones+2,D0
      ADD.W     active_drones+4,D0
      ADD.W     machines_online,D0
      MOVE.W    D0,all_players

      MOVE.W    all_players,D0
      CMP.W     machines_online,D0
      BGT       L0060
      CLR.W     D0
      BRA       L0061
L0060:MOVEQ     #1,D0
L0061:MOVE.W    D0,drones_active

      TST.W     screen_rez
      BEQ       L0064
      CLR.W     -4(A6)
      BRA       L0063
L0062:MOVE.W    -4(A6),D0
      ADDQ.W    #3,D0
      MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #team_notes_color_table,A1
      MOVE.W    D0,(A1)
      ADDQ.W    #1,-4(A6)
L0063:CMPI.W    #4,-4(A6)
      BLT.S     L0062
L0064:

      CLR.W     -4(A6)
      BRA       L006A
L0065:TST.W     screen_rez
      BEQ       L0066
      MOVE.W    -4(A6),D0
      ADDQ.W    #3,D0
      BRA       L0067
L0066:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #color_ply_back,D1
      MOVE.W    0(A0,D1.L),D0
L0067:MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #color_cnv_back,A1
      MOVE.W    D0,(A1)
      TST.W     screen_rez
      BEQ       L0068
      CLR.W     D0
      BRA       L0069
L0068:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #color_ply_frame,D1
      MOVE.W    0(A0,D1.L),D0
L0069:MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #color_cnv_frame,A1
      MOVE.W    D0,(A1)
      ADDQ.W    #1,-4(A6)
L006A:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L0065

; set all drone types
      MOVE.W    machines_online,-6(A6)
      CLR.W     -8(A6)
      BRA       L0073
L006B:CLR.W     -4(A6)
      BRA       L0072
L006C:MOVE.W    -8(A6),D0
      BRA       L0070
L006D:MOVE.W    -6(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #'r',ply_dronetype(A0)
      BRA       L0071
L006E:MOVE.W    -6(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #'l',ply_dronetype(A0)
      BRA       L0071
L006F:MOVE.W    -6(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #'k',ply_dronetype(A0)
      BRA       L0071
      BRA       L0071
L0070:TST.W     D0
      BEQ.S     L006D
      CMP.W     #1,D0
      BEQ.S     L006E
      CMP.W     #2,D0
      BEQ.S     L006F
      BRA       L0071
L0071:ADDQ.W    #1,-6(A6)
      ADDQ.W    #1,-4(A6)
L0072:MOVEA.W   -8(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #active_drones,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     -4(A6),D0
      BGT       L006C
      ADDQ.W    #1,-8(A6)
L0073:CMPI.W    #3,-8(A6)
      BLT       L006B

      TST.W     team_flag
      BEQ       L0076
      CLR.W     -4(A6)
      BRA       L0075
L0074:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #color_cnv_back,A0
      MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEA.W   ply_team(A1),A1
      ADDA.L    A1,A1
      ADDA.L    #team_notes_color_table,A1
      MOVE.W    (A1),(A0)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #color_cnv_frame,A0
      CLR.W     (A0)
      ADDQ.W    #1,-4(A6)
L0075:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L0074
L0076:

      TST.W     user_is_midicam
      BEQ       L007B
      MOVE.W    all_players,-4(A6)
      BRA       L007A
L0077:TST.W     screen_rez
      BEQ       L0078
      MOVEQ     #2,D0
      BRA       L0079
L0078:MOVEQ     #7,D0
L0079:MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #color_cnv_frame,A1
      MOVE.W    D0,(A1)
      MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #color_cnv_back,A1
      MOVE.W    D0,(A1)
      MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_hitflag(A0)
      ADDQ.W    #1,-4(A6)
L007A:CMPI.W    #16,-4(A6)
      BLT.S     L0077
L007B:

      MOVE.W    machines_online,(A7)
      JSR       drone_setup
      TST.W     own_number
      BNE       L0080
      TST.W     user_is_midicam
      BNE       L0080
      TST.W     8(A6)
      BNE       L007E
      MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      MOVE.L    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,_random_seed
      TST.W     _random_seed
      BGE       L007C
      MOVEQ     #-1,D0
      BRA       play_game_return

L007C:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      MOVE.L    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-10(A6)
      TST.W     -10(A6)
      BGE       L007D
      MOVEQ     #-1,D0
      BRA       play_game_return
L007D:MOVE.W    _random_seed,D0
      ASL.W     #8,D0
      ADD.W     -10(A6),D0
      MOVE.W    D0,_random_seed
      BRA       L007F
L007E:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      MOVE.L    D0,-(A7)
      MOVE.W    #$11,-(A7)          ; Random()
      JSR       _xbios
      ADDQ.L    #2,A7
      ASL.L     #8,D0
      ADD.L     (A7)+,D0
      MOVE.W    D0,_random_seed
L007F:BRA       L0083
L0080:

      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,_random_seed
      TST.W     _random_seed
      BGE       L0081
      MOVEQ     #-1,D0
      BRA       play_game_return

L0081:MOVE.W    _random_seed,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-10(A6)
      TST.W     -10(A6)
      BGE       L0082
      MOVEQ     #-1,D0
      BRA       play_game_return

L0082:MOVE.W    -10(A6),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    _random_seed,D0
      ASL.W     #8,D0
      ADD.W     -10(A6),D0
      MOVE.W    D0,_random_seed
L0083:MOVE.W    drones_active,(A7)
      MOVE.W    all_players,-(A7)
      JSR       init_all_player
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L0084
      MOVEQ     #-3,D0
      BRA       play_game_return

L0084:TST.W     user_is_midicam
      BEQ       L0085
      JSR       position_midicam_user
L0085:TST.W     team_flag
      BEQ       L008A

      CLR.W     -4(A6)
      BRA       L0087
L0086:MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVEQ     #-1,D0
      MOVE.W    D0,(A1)
      MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #team_scores,A1
      MOVE.W    D0,(A1)
      ADDQ.W    #1,-4(A6)
L0087:CMPI.W    #4,-4(A6)
      BLT.S     L0086

      CLR.W     -4(A6)
      BRA       L0089
L0088:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_team(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    #team_scores,A0
      CLR.W     (A0)
      ADDQ.W    #1,-4(A6)
L0089:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L0088

L008A:CLR.W     -2(A6)
      MOVE.W    #1,we_dont_have_a_winner

      MOVE.W    pscore_wind_off,(A7)
      JSR       set_screen_offs
      TST.W     screen_rez
      BEQ       L008B
      CLR.W     (A7)
      MOVE.W    #74,-(A7)
      MOVE.W    #242,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      BRA       L008C
L008B:CLR.W     (A7)
      MOVE.W    #37,-(A7)
      MOVE.W    #121,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
L008C:JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L008D
      CLR.W     (A7)
      MOVE.W    #74,-(A7)
      MOVE.W    #242,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      BRA       L008E
L008D:CLR.W     (A7)
      MOVE.W    #37,-(A7)
      MOVE.W    #121,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
L008E:

      TST.W     user_is_midicam
      BEQ       L0097

      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #41,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L008F
      MOVE.W    #48,(A7)
      BRA       L0090
L008F:MOVE.W    #24,(A7)
L0090:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0091
      MOVE.W    #1,(A7)
      BRA       L0092
L0091:MOVE.W    #15,(A7)
L0092:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.L    #str_midicam_1,(A7)
      JSR       bconout_string
      JSR       switch_logbase
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #41,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0093
      MOVE.W    #48,(A7)
      BRA       L0094
L0093:MOVE.W    #24,(A7)
L0094:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0095
      MOVE.W    #1,(A7)
      BRA       L0096
L0095:MOVE.W    #15,(A7)
L0096:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.L    #str_midicam_2,(A7)
      JSR       bconout_string
      JSR       switch_logbase
L0097:

      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      JSR       update_smily
      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      TST.W     team_flag
      BEQ       L0098
      MOVE.W    #4,(A7)
      BRA       L0099
L0098:MOVE.W    all_players,(A7)
L0099:JSR       draw_all_notes_score

      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      JSR       draw_karte
      CLR.W     -4(A6)
      BRA       L009B
L009A:MOVE.W    -4(A6),(A7)
      JSR       set_ply_karte
      ADDQ.W    #1,-4(A6)
L009B:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L009A

      CLR.W     -4(A6)
      BRA       L009D
L009C:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-4(A6)
L009D:TST.W     screen_rez
      BEQ       L009E
      MOVE.W    #350,D0
      BRA       L009F
L009E:MOVE.W    #300,D0
L009F:CMP.W     -4(A6),D0
      BGT.S     L009C

      TST.W     10(A6)
      BEQ       L00A0
      JSR       init_joystick
      BRA       L00A1
L00A0:JSR       init_mouse
L00A1:

      BRA       L00A3
L00A2:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L00A3:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L00A2

      TST.W     user_is_midicam
      BEQ       L00A4
      JSR       midicam_print_current_player

L00A4:MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L00A7
      MOVE.L    sound_hit_ptr,(A7)
      MOVE.W    #$20,-(A7)
      JSR       _xbios              ; Dosound()
      ADDQ.L    #2,A7
      TST.W     screen_rez
      BEQ       L00A5
      MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      MOVE.W    #1,(A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)            ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
      MOVE.W    #1,-28(A6)
      BRA       L00A6
L00A5:MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_gunman(A0,A1.L),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      MOVE.L    #color_palette,D1
      MOVE.W    0(A0,D1.L),(A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)             ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
L00A6:BRA       L00AA

L00A7:TST.W     screen_rez
      BEQ       L00A9
      TST.W     -28(A6)
      BEQ       L00A8
      CLR.W     -28(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)                ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
L00A8:BRA       L00AA
L00A9:CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)                ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
L00AA:

      TST.W     team_flag
      BEQ       L00AB
      MOVE.W    #4,(A7)
      BRA       L00AC
L00AB:MOVE.W    all_players,(A7)
L00AC:JSR       draw_all_notes_score

      TST.W     display_2d_map_flag
      BEQ       L00B6
      JSR       draw_karte
      TST.W     user_is_midicam
      BEQ       L00B0
      CLR.W     -4(A6)
      BRA       L00AF
L00AD:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L00AE
      MOVE.W    -4(A6),(A7)
      JSR       set_ply_karte
L00AE:ADDQ.W    #1,-4(A6)
L00AF:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L00AD
      BRA       L00B5
L00B0:

      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L00B1
      MOVE.W    own_number,(A7)
      JSR       set_ply_karte
      BRA       L00B5
L00B1:

      CLR.W     -4(A6)
      BRA       L00B4
L00B2:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L00B3
      MOVE.W    -4(A6),(A7)
      JSR       set_ply_karte
L00B3:ADDQ.W    #1,-4(A6)
L00B4:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L00B2

L00B5:JSR       switch_screens
      JSR       set_all_player
      BRA       L00C5

L00B6:MOVE.W    own_number,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L00BA

      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_richtung(A0,D1.L),(A7)
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),-(A7)
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      JSR       make_draw_list
      ADDQ.L    #4,A7

      JSR       draw_list

      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_reload(A0)
      BNE       L00B9
      TST.W     user_is_midicam
      BNE       L00B9

      JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L00B7
      CLR.W     (A7)
      MOVE.W    #158,-(A7)
      MOVE.W    #101,-(A7)
      MOVE.W    #99,-(A7)
      JSR       dr_sw_vline
      ADDQ.L    #6,A7
      CLR.W     (A7)
      MOVE.W    #162,-(A7)
      MOVE.W    #101,-(A7)
      MOVE.W    #99,-(A7)
      JSR       dr_sw_vline
      ADDQ.L    #6,A7
      CLR.W     (A7)
      MOVE.W    #$62,-(A7)
      MOVE.W    #161,-(A7)
      MOVE.W    #159,-(A7)
      JSR       dr_sw_hline
      ADDQ.L    #6,A7
      CLR.W     (A7)
      MOVE.W    #102,-(A7)
      MOVE.W    #161,-(A7)
      MOVE.W    #159,-(A7)
      JSR       dr_sw_hline
      ADDQ.L    #6,A7
      BRA       L00B8
L00B7:MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #78,-(A7)
      MOVE.W    #51,-(A7)
      MOVE.W    #50,-(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #80,-(A7)
      MOVE.W    #51,-(A7)
      MOVE.W    #50,-(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #79,-(A7)
      MOVE.W    #49,-(A7)
      MOVE.W    #49,-(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #79,-(A7)
      MOVE.W    #52,-(A7)
      MOVE.W    #52,-(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7
L00B8:JSR       switch_logbase
L00B9:BRA       L00C5
L00BA:TST.W     screen_rez
      BEQ       L00BB
      MOVE.W    #1,(A7)
      MOVE.W    #201,-(A7)
      MOVE.W    #319,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),(A7)
      MOVE.W    #100,-(A7)
      CLR.W     -(A7)
      MOVE.W    #64,-(A7)
      MOVE.W    #96,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
      BRA       L00BC
L00BB:MOVE.W    #7,(A7)
      MOVE.W    #100,-(A7)
      MOVE.W    #159,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),(A7)
      MOVE.W    #50,-(A7)
      CLR.W     -(A7)
      MOVE.W    #32,-(A7)
      MOVE.W    #48,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
L00BC:MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #39,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L00BD
      MOVE.W    #15,(A7)
      BRA       L00BE
L00BD:MOVE.W    #3,(A7)
L00BE:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L00BF
      MOVE.W    #1,(A7)
      BRA       L00C0
L00BF:MOVE.W    #7,(A7)
L00C0:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),(A7)
      JSR       print_playername
      MOVE.L    #str_says,(A7)
      JSR       bconout_string
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #49,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L00C1
      MOVE.W    #15,(A7)
      BRA       L00C2
L00C1:MOVE.W    #3,(A7)
L00C2:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L00C3
      MOVE.W    #1,(A7)
      BRA       L00C4
L00C3:MOVE.W    #7,(A7)
L00C4:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.L    #str_have_a_nice_day_1,(A7)
      JSR       bconout_string
      JSR       switch_screens
      JSR       set_all_player
L00C5:TST.W     user_is_midicam
      BNE       L00C6
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_score(A0,D1.L),D0
      CMP.W     -2(A6),D0
      BEQ       L00C6
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_looser(A0,D1.L),(A7)
      ADDQ.W    #1,-2(A6)
      MOVE.W    -2(A6),-(A7)
      JSR       add_one_smily
      ADDQ.L    #2,A7
L00C6:TST.W     we_dont_have_a_winner
      BEQ       L00FA
      TST.W     user_is_midicam
      BEQ       L00CB
      ADDQ.W    #1,-20(A6)

      MOVE.W    all_players,-4(A6)
      BRA       L00CA
L00C7:BTST      #6,-19(A6)
      BEQ       L00C8
      MOVEQ     #-1,D0
      BRA       L00C9
L00C8:MOVEQ     #1,D0
L00C9:MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      ADD.W     D0,ply_richtung(A1)
      ADDQ.W    #1,-4(A6)
L00CA:CMPI.W    #16,-4(A6)
      BLT.S     L00C7

L00CB:MOVE.W    own_number,midicam_player_number

      TST.W     10(A6)
      BEQ       L00CD
      MOVE.L    A6,(A7)
      ADDI.L    #-24,(A7)
      MOVE.W    #1,-(A7)
      JSR       ask_joystick
      ADDQ.L    #2,A7
      MOVE.W    D0,-12(A6)
      TST.W     user_is_midicam
      BNE       L00CC
      MOVE.W    -24(A6),D0
      ASL.W     #4,D0
      OR.W      -12(A6),D0
      MOVEA.W   own_number,A1
      MOVE.W    A1,-4(A6)
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L00CC:BRA       L00CE
L00CD:TST.W     user_is_midicam
      BNE       L00CE
      JSR       ask_mouse
      MOVE.W    D0,-(A7)
      MOVEA.W   own_number,A0
      MOVE.W    A0,-4(A6)
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    (A7)+,(A0)

L00CE:TST.W     user_is_midicam
      BEQ       L00D5
      TST.W     -26(A6)
      BNE       L00CF
      TST.W     -24(A6)
      BEQ       L00CF
      EORI.W    #1,display_2d_map_flag
      CLR.W     midicam_autoselect_player_flag
L00CF:MOVE.W    -24(A6),-26(A6)
      BTST      #0,-11(A6)
      BEQ       L00D1
      ADDQ.W    #1,own_number
      MOVE.W    own_number,D0
      CMP.W     #16,D0
      BLT       L00D0
      CLR.W     own_number
L00D0:CLR.W     D0
      MOVE.W    D0,display_2d_map_flag
      MOVE.W    D0,midicam_autoselect_player_flag
L00D1:BTST      #1,-11(A6)
      BEQ       L00D3
      SUBQ.W    #1,own_number
      BGE       L00D2
      MOVE.W    #15,own_number
L00D2:CLR.W     D0
      MOVE.W    D0,display_2d_map_flag
      MOVE.W    D0,midicam_autoselect_player_flag
L00D3:MOVE.W    -12(A6),D0
      AND.W     #12,D0
      BEQ       L00D4
      MOVE.W    #1,midicam_autoselect_player_flag
      CLR.W     midicam_timer_counter
L00D4:JSR       midicam_keyboard_shortcuts
      BRA       L00DA

L00D5:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BEQ       L00DA
      MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      MOVE.W    D0,-12(A6)
      CMPI.W    #' ',-12(A6)            ;Space
      BNE       L00D6
      EORI.W    #1,display_2d_map_flag
      BRA       L00D7
L00D6:CMPI.W    #$1B,-12(A6)            ;ESC
      BNE       L00D7
      TST.W     own_number
      BNE       L00D7
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    #$82,(A0)
L00D7:BRA       L00D9
L00D8:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L00D9:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L00D8
L00DA:TST.W     user_is_midicam
      BEQ       L00DE

      MOVE.W    midicam_player_count,-4(A6)
L00DB:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-(A7)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    (A7)+,(A0)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      TST.W     (A0)
      BGE       L00DC
      MOVEQ     #-1,D0
      BRA       play_game_return
L00DC:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #player_joy_table,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      SUBQ.W    #1,-4(A6)
      BGE       L00DD
      MOVE.W    machines_online,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-4(A6)
L00DD:MOVE.W    -4(A6),D0
      CMP.W     midicam_player_count,D0
      BNE.S     L00DB

      BRA       L00E2
L00DE:TST.W     8(A6)
      BNE       L00E2
L00DF:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #player_joy_table,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      SUBQ.W    #1,-4(A6)
      BGE       L00E0
      MOVE.W    machines_online,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-4(A6)
L00E0:MOVE.W    #30,(A7)
      JSR       get_midi
      MOVE.W    D0,-(A7)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    (A7)+,(A0)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      TST.W     (A0)
      BGE       L00E1
      MOVEQ     #-1,D0
      BRA       play_game_return
L00E1:MOVE.W    -4(A6),D0
      CMP.W     own_number,D0
      BNE.S     L00DF

L00E2:MOVE.W    machines_online,-4(A6)
      BRA       L00E4
L00E3:MOVE.W    -4(A6),(A7)
      JSR       drone_action
      ADDQ.W    #1,-4(A6)
L00E4:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L00E3

      CLR.W     -4(A6)
      BRA       L00E6
L00E5:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_hitflag(A0)
      ADDQ.W    #1,-4(A6)
L00E6:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT.S     L00E5

      CMPI.W    #$82,player_joy_table
      BNE       L00F3

      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)                ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
      TST.W     user_is_midicam
      BNE       L00F0
      TST.W     own_number
      BNE       L00F0
      JSR       switch_logbase
      TST.W     10(A6)
      BEQ       L00E7
      JSR       exit_joystick
      BRA       L00E8
L00E7:JSR       exit_mouse
L00E8:MOVE.L    #str_game_suspended_continue,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVE.W    D0,-4(A6)
      TST.W     10(A6)
      BEQ       L00E9
      JSR       init_joystick
      BRA       L00EA
L00E9:JSR       init_mouse
L00EA:JSR       switch_logbase
      TST.W     8(A6)
      BEQ       L00EC
      CMPI.W    #1,-4(A6)
      BEQ       L00EB
      MOVEQ     #-2,D0
      BRA       play_game_return
      BRA       L00EC
L00EB:BRA       L00F2
L00EC:CMPI.W    #1,-4(A6)
      BNE       L00ED
      MOVE.W    #$84,(A7)
      BRA       L00EE
L00ED:MOVE.W    #$82,(A7)
L00EE:MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-4(A6)
      TST.W     -4(A6)
      BGE       L00EF
      MOVEQ     #-1,D0
      BRA       play_game_return

L00EF:BRA       L00F1
L00F0:JSR       copy_screen
      MOVE.W    #10,(A7)                ; 'Game is suspended'
      JSR       rsc_draw_buttonless_dialog
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    -4(A6),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      JSR       copy_screen
      JSR       switch_logbase
L00F1:CMPI.W    #$84,-4(A6)
      BEQ       L00F2
      MOVEQ     #-2,D0
      BRA       play_game_return

L00F2:CLR.W     player_joy_table    ;Joystick Spieler 0 (Master) lschen
L00F3:MOVE.W    display_2d_map_flag,-22(A6)
      MOVE.W    -16(A6),-4(A6)
L00F4:MOVE.W    drones_active,(A7)
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #player_joy_table,D1
      MOVE.W    0(A0,D1.L),-(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       move_player
      ADDQ.L    #4,A7
      MOVE.W    D0,-10(A6)
      TST.W     -10(A6)
      BGE       L00F5
      MOVEQ     #-3,D0
      BRA       play_game_return

L00F5:TST.W     we_dont_have_a_winner
      BEQ       L00F7
      SUBQ.W    #1,-4(A6)
      BGE       L00F6
      MOVE.W    all_players,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-4(A6)
L00F6:MOVE.W    -4(A6),D0
      CMP.W     -16(A6),D0
      BNE.S     L00F4

L00F7:ADDQ.W    #1,-16(A6)
      MOVE.W    -16(A6),D0
      CMP.W     all_players,D0
      BNE       L00F8
      CLR.W     -16(A6)
L00F8:TST.W     user_is_midicam
      BEQ       L00F9
      MOVE.W    -22(A6),display_2d_map_flag
L00F9:BRA       L00A4

L00FA:CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)            ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7

      CLR.W     -4(A6)
      BRA       L00FC
L00FB:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-4(A6)
L00FC:CMPI.W    #10,-4(A6)
      BLT.S     L00FB

      CLR.W     -4(A6)
      BRA       L0121
L00FD:TST.W     team_flag
      BEQ       L00FE
      MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_team(A0,A1.L),A0
      ADDA.L    A0,A0
      MOVE.L    #team_scores,D1
      MOVE.W    0(A0,D1.L),D0
      BRA       L00FF
L00FE:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_score(A0,D1.L),D0
L00FF:CMP.W     #10,D0
      BNE       L0120

      CLR.W     -6(A6)
      BRA       L011F
L0100:TST.W     screen_rez
      BEQ       L0108
      MOVE.W    #1,(A7)
      MOVE.W    #201,-(A7)
      MOVE.W    #319,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      MOVE.W    -4(A6),(A7)
      MOVE.W    #100,-(A7)
      TST.W     team_flag
      BEQ       L0103
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BEQ       L0101
      CLR.W     D0
      BRA       L0102
L0101:MOVEQ     #1,D0
L0102:BRA       L0105
L0103:MOVE.W    own_number,D0
      CMP.W     -4(A6),D0
      BEQ       L0104
      CLR.W     D0
      BRA       L0105
L0104:MOVEQ     #1,D0
L0105:TST.W     D0
      BEQ       L0106
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #winner_anim,D1
      MOVE.W    0(A0,D1.L),-(A7)
      BRA       L0107
L0106:MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #lose_anim,D1
      MOVE.W    0(A0,D1.L),-(A7)
L0107:MOVE.W    #64,-(A7)
      MOVE.W    #96,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
      BRA       L0110
L0108:MOVE.W    #7,(A7)
      MOVE.W    #100,-(A7)
      MOVE.W    #159,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
      MOVE.W    -4(A6),(A7)
      MOVE.W    #50,-(A7)
      TST.W     team_flag
      BEQ       L010B
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BEQ       L0109
      CLR.W     D0
      BRA       L010A
L0109:MOVEQ     #1,D0
L010A:BRA       L010D
L010B:MOVE.W    own_number,D0
      CMP.W     -4(A6),D0
      BEQ       L010C
      CLR.W     D0
      BRA       L010D
L010C:MOVEQ     #1,D0
L010D:TST.W     D0
      BEQ       L010E
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #winner_anim,D1
      MOVE.W    0(A0,D1.L),-(A7)
      BRA       L010F
L010E:MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #lose_anim,D1
      MOVE.W    0(A0,D1.L),-(A7)
L010F:MOVE.W    #32,-(A7)
      MOVE.W    #48,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
L0110:MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #39,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0111
      MOVE.W    #15,(A7)
      BRA       L0112
L0111:MOVE.W    #3,(A7)
L0112:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0113
      MOVE.W    #1,(A7)
      BRA       L0114
L0113:MOVE.W    #7,(A7)
L0114:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     team_flag
      BEQ       L0117
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BNE       L0115
      MOVE.L    #str_your_team_wins,(A7)
      JSR       bconout_string
      BRA       L0116
L0115:MOVE.L    #str_your_team_loses,(A7)
      JSR       bconout_string
L0116:BRA       L0119
L0117:MOVE.W    own_number,D0
      CMP.W     -4(A6),D0
      BNE       L0118
      MOVE.L    #str_you_win,(A7)
      JSR       bconout_string
      BRA       L0119
L0118:MOVE.W    -4(A6),(A7)
      JSR       print_playername
      MOVE.L    #str_wins,(A7)
      JSR       bconout_string
L0119:MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #49,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L011A
      MOVE.W    #15,(A7)
      BRA       L011B
L011A:MOVE.W    #3,(A7)
L011B:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L011C
      MOVE.W    #1,(A7)
      BRA       L011D
L011C:MOVE.W    #7,(A7)
L011D:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.L    #str_have_a_nice_day_2,(A7)
      JSR       bconout_string
      JSR       switch_screens
      MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      TST.W     screen_rez
      BNE       L011E
      MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
L011E:ADDQ.W    #1,-6(A6)
L011F:CMPI.W    #31,-6(A6)
      BLT       L0100

      BRA       L0122
L0120:ADDQ.W    #1,-4(A6)
L0121:MOVE.W    -4(A6),D0
      CMP.W     all_players,D0
      BLT       L00FD

L0122:TST.W     team_flag
      BEQ       L0124
      MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_team(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      ADDQ.W    #1,(A0)
      MOVE.W    (A0),D0
      CMP.W     #10,D0
      BLE       L0123
      MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_team(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      MOVE.W    #1,(A0)
L0123:BRA       L0125
L0124:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      ADDQ.W    #1,(A0)
      MOVE.W    (A0),D0
      CMP.W     #10,D0
      BLE       L0125
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      MOVE.W    #1,(A0)
L0125:TST.W     team_flag
      BEQ       L0128
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    -4(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BEQ       L0126
      CLR.W     D0
      BRA       L0127
L0126:MOVEQ     #1,D0
L0127:BRA       L012A
L0128:MOVE.W    own_number,D0
      CMP.W     -4(A6),D0
      BEQ       L0129
      CLR.W     D0
      BRA       L012A
L0129:MOVEQ     #1,D0
L012A:TST.W     D0
      BEQ       play_game_in_loser_team

; winner team
      JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L012B
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #97,-(A7)
      MOVE.W    #189,-(A7)
      MOVE.W    #58,-(A7)
      MOVE.W    #170,-(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #6,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    blinzshape_ptr,-(A7)
      ADDI.L    #24,(A7)
      MOVE.W    #86,-(A7)
      MOVE.W    #164,-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L012C
L012B:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #color_cnv_back,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    #48,-(A7)
      MOVE.W    #94,-(A7)
      MOVE.W    #31,-(A7)
      MOVE.W    #85,-(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #6,-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    blinzshape_ptr,-(A7)
      ADDI.L    #12,(A7)
      MOVE.W    #$2B,-(A7)
      MOVE.W    #82,-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L012C:JSR       switch_logbase

      CLR.W     -6(A6)
      BRA       L012E
L012D:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-6(A6)
L012E:CMPI.W    #10,-6(A6)
      BLT.S     L012D

      TST.W     screen_rez
      BEQ       L012F
      MOVE.W    -4(A6),(A7)
      MOVE.W    #100,-(A7)
      CLR.W     -(A7)
      MOVE.W    #64,-(A7)
      MOVE.W    #96,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
      BRA       L0130
L012F:MOVE.W    -4(A6),(A7)
      MOVE.W    #50,-(A7)
      CLR.W     -(A7)
      MOVE.W    #32,-(A7)
      MOVE.W    #48,-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
L0130:JSR       switch_screens

      CLR.W     -4(A6)
      BRA       L0132
L0131:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-4(A6)
L0132:TST.W     screen_rez
      BEQ       L0133
      MOVEQ     #127,D0
      BRA       L0134
L0133:MOVEQ     #109,D0
L0134:CMP.W     -4(A6),D0
      BGT.S     L0131
      BRA       L013C

; loser team
play_game_in_loser_team:
      JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L0136
      MOVE.L    sw_fllmuster,(A7)
      MOVE.W    #9,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    loosershape_ptr,-(A7)
      ADDI.L    #72,(A7)
      MOVE.W    #$91,-(A7)
      MOVE.W    #$8E,-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0137
L0136:MOVE.L    col_farb2jmptab,(A7)
      MOVE.W    #9,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    loosershape_ptr,-(A7)
      ADDI.L    #36,(A7)
      MOVE.W    #72,-(A7)
      MOVE.W    #71,-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0137:JSR       switch_logbase
      CLR.W     -4(A6)
      BRA       L0139
L0138:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-4(A6)
L0139:TST.W     screen_rez
      BEQ       L013A
      MOVE.W    #140,D0
      BRA       L013B
L013A:MOVEQ     #120,D0
L013B:CMP.W     -4(A6),D0
      BGT.S     L0138

L013C:TST.W     team_flag
      BEQ       L013D
      MOVE.W    #4,(A7)
      BRA       L013E
L013D:MOVE.W    all_players,(A7)
L013E:JSR       update_notes_score

      BRA       L0140
L013F:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L0140:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L013F

      CLR.W     D0
      BRA       play_game_return

play_game_return:
      UNLK      A6
      RTS



midicam_keyboard_shortcuts:LINK      A6,#-8
      MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BEQ       L015D
      CLR.W     midicam_autoselect_player_flag
      CLR.W     -4(A6)
      MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      MOVE.W    D0,-2(A6)
      BRA       L0158

receive_own_number_table_9:MOVE.W    #9,own_number
      BRA       L015A
receive_own_number_table_0:CLR.W     own_number
      BRA       L015A
receive_own_number_table_1:MOVE.W    #1,own_number
      BRA       L015A
receive_own_number_table_2:MOVE.W    #2,own_number
      BRA       L015A
receive_own_number_table_3:MOVE.W    #3,own_number
      BRA       L015A
receive_own_number_table_4:MOVE.W    #4,own_number
      BRA       L015A
receive_own_number_table_5:MOVE.W    #5,own_number
      BRA       L015A
receive_own_number_table_6:MOVE.W    #6,own_number
      BRA       L015A
receive_own_number_table_7:MOVE.W    #7,own_number
      BRA       L015A
receive_own_number_table_8:MOVE.W    #8,own_number
      BRA       L015A
receive_own_number_table_9:MOVE.W    #9,own_number
      BRA       L015A
receive_own_number_table_10:MOVE.W    #10,own_number
      BRA       L015A
receive_own_number_table_11:MOVE.W    #11,own_number
      BRA       L015A
receive_own_number_table_12:MOVE.W    #12,own_number
      BRA       L015A
receive_own_number_table_13:MOVE.W    #13,own_number
      BRA       L015A
receive_own_number_table_14:MOVE.W    #14,own_number
      BRA       L015A
receive_own_number_table_15:MOVE.W    #15,own_number
      BRA       L015A

receive_own_number_table_20:TST.W     display_2d_map_flag
      BEQ       L0155
      CLR.W     D0
      BRA       L0156
L0155:MOVEQ     #1,D0
L0156:MOVE.W    D0,-4(A6)
      BRA       L015A

receive_own_number_table_default:MOVE.W    #1,midicam_autoselect_player_flag
      CLR.W     midicam_timer_counter
      MOVE.W    display_2d_map_flag,-4(A6)
      BRA       L015A

L0158:EXT.L     D0
      MOVEA.L   #receive_own_number_table,A0
      MOVEQ     #18,D1
L0159:CMP.L     (A0)+,D0
      DBEQ      D1,L0159
      MOVEA.L   72(A0),A0
      JMP       (A0)
L015A:

      BRA       L015C
L015B:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L015C:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L015B

      MOVE.W    -4(A6),display_2d_map_flag
L015D:TST.W     midicam_autoselect_player_flag
      BEQ       L015E
      JSR       midicam_find_next_player
      MOVE.W    D0,own_number
L015E:MOVE.W    own_number,D0
      CMP.W     midicam_player_number,D0
      BEQ       L015F
      JSR       midicam_print_current_player
      JSR       update_smily
L015F:UNLK      A6
      RTS



midicam_find_next_player:LINK      A6,#-8
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L0161
      TST.W     display_2d_map_flag
      BNE       L0161
      CMPI.W    #5,midicam_timer_counter
      BLE       L0161
      MOVE.W    #5,midicam_timer_counter
L0161:SUBQ.W    #1,midicam_timer_counter
      TST.W     midicam_timer_counter
      BLE       L0162
      MOVE.W    own_number,D0
      BRA       L016C
L0162:MOVE.W    #50,midicam_timer_counter

      TST.W     display_2d_map_flag
      BNE       L0163
      MOVE.W    #1,display_2d_map_flag
      MOVE.W    own_number,D0
      BRA       L016C
L0163:CLR.W     display_2d_map_flag
      CLR.W     -4(A6)
      CLR.W     -2(A6)
      BRA       L0167
L0164:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L0165
      CLR.W     D0
      BRA       L0166
L0165:MOVEQ     #1,D0
L0166:OR.W      D0,-4(A6)
      ADDQ.W    #1,-2(A6)
L0167:MOVE.W    -2(A6),D0
      CMP.W     all_players,D0
      BLT.S     L0164
      TST.W     -4(A6)
      BEQ       L016A
      MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.L     #1,D0
      BEQ       L016A
      BRA       L0169
L0168:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.W     #$7FFF,D0
      EXT.L     D0
      DIVS      all_players,D0
      SWAP      D0
      MOVE.W    D0,-2(A6)
      TST.W     -2(A6)
      BLT       L0169
      MOVE.W    -2(A6),D0
      CMP.W     all_players,D0
      BGE       L0169
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L0169
      MOVE.W    -2(A6),D0
      BRA       L016C
L0169:BRA.S     L0168
      BRA       L016C
L016A:CMPI.W    #16,all_players
      BNE       L016B
      MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.W     #$7FFF,D0
      EXT.L     D0
      DIVS      all_players,D0
      SWAP      D0
      BRA       L016C
L016B:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.W     #$7FFF,D0
      EXT.L     D0
      MOVEQ     #16,D1
      SUB.W     all_players,D1
      DIVS      D1,D0
      SWAP      D0
      ADD.W     all_players,D0
      BRA       L016C
L016C:UNLK      A6
      RTS



position_midicam_user:
      LINK      A6,#-16
      MOVE.W    all_players,-2(A6)
      BRA       L0175
L016E:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.L     #$7FFF,D0
      EXT.L     D0
      DIVS      maze_size,D0
      SWAP      D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.L     #$7FFF,D0
      EXT.L     D0
      DIVS      maze_size,D0
      SWAP      D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
      CLR.W     -8(A6)
      CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L016F
      ADDQ.W    #1,-8(A6)
L016F:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0170
      ADDQ.W    #1,-8(A6)
L0170:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0171
      ADDQ.W    #1,-8(A6)
L0171:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0172
      ADDQ.W    #1,-8(A6)
L0172:TST.W     -8(A6)
      BEQ       L016E
      CMPI.W    #4,-8(A6)
      BEQ       L016E
      MOVE.W    #1,-10(A6)
      BRA       L0174
L0173:MOVE.W    #$11,(A7)           ; Random()
      JSR       _xbios
      AND.L     #$7FFF,D0
      AND.W     #3,D0
      MOVE.W    D0,-12(A6)
      CLR.W     (A7)
      MOVE.W    -12(A6),D0
      MULS      #6,D0
      MOVEA.L   D0,A0
      MOVE.L    #midicam_start_setup,D1
      MOVE.W    2(A0,D1.L),-(A7)
      MOVE.W    -6(A6),D0
      ADD.W     D0,(A7)
      MOVE.W    -12(A6),D0
      MULS      #6,D0
      MOVEA.L   D0,A0
      MOVE.L    #midicam_start_setup,D1
      MOVE.W    0(A0,D1.L),-(A7)
      MOVE.W    -4(A6),D0
      ADD.W     D0,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0174
      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    -12(A6),D1
      MULS      #6,D1
      ADD.L     #midicam_start_setup,D1
      MOVEA.L   D1,A1
      MOVE.W    (A1),D1
      MULS      #120,D1
      ADD.W     D1,D0
      MOVE.W    -2(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)
      MOVE.W    -6(A6),D0
      ASL.W     #7,D0
      MOVE.W    -12(A6),D1
      MULS      #6,D1
      ADD.L     #midicam_start_setup,D1
      MOVEA.L   D1,A1
      MOVE.W    2(A1),D1
      MULS      #120,D1
      ADD.W     D1,D0
      MOVE.W    -2(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),D1
      MULS      #6,D1
      ADD.L     #midicam_start_setup,D1
      MOVEA.L   D1,A1
      MOVE.W    4(A1),ply_richtung(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #3,ply_lives(A0)
      CLR.W     -10(A6)
L0174:TST.W     -10(A6)
      BNE       L0173
      ADDQ.W    #1,-2(A6)
L0175:CMPI.W    #16,-2(A6)
      BLT       L016E
      UNLK      A6
      RTS

add_one_smily:LINK      A6,#-18
      CMPI.W    #5,8(A6)
      BGT       L0177
      MOVEQ     #16,D0
      BRA       L0178
L0177:MOVEQ     #33,D0
L0178:MOVE.W    D0,-4(A6)
      MOVE.W    8(A6),D0
      SUBQ.W    #1,D0
      EXT.L     D0
      DIVS      #5,D0
      SWAP      D0
      MULS      #25,D0
      ADDQ.W    #1,D0
      MOVE.W    D0,-2(A6)
      TST.W     screen_rez
      BEQ       L0179
      ASL       -2(A6)
      ASL       -4(A6)
L0179:MOVE.W    #16,8(A6)
      TST.W     screen_rez
      BEQ       L017A
      MOVEQ     #2,D0
      BRA       L017B
L017A:MOVEQ     #1,D0
L017B:MOVE.W    D0,-8(A6)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_tab4,A0
      MOVE.W    (A0),-10(A6)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_face_offset_table,A0
      MOVE.W    (A0),-6(A6)

      MOVE.W    -6(A6),D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     shape_face_ptr,D0
      MOVE.L    D0,-14(A6)

      MOVE.W    pscore_wind_off,(A7)
      JSR       set_screen_offs
      TST.W     screen_rez
      BEQ       L017C
      MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L017D
L017C:MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L017D:JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L017E
      MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L017F
L017E:MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L017F:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab6,D1
      MOVE.L    0(A0,D1.L),D0
      ASL.L     #1,D0
      ADD.L     shape_ptr,D0
      MOVE.L    D0,-14(A6)

      TST.W     screen_rez
      BEQ       L0180
      MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      MOVE.L    sw_fllmuster,(A7)
      MOVE.W    #15,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    crossedsmil_ptr,-(A7)
      ADDI.L    #120,(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #2,(A7)
      MOVE.W    -2(A6),-(A7)
      SUBQ.W    #2,(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0181
L0180:MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
      MOVE.L    col_farb2jmptab,(A7)
      MOVE.W    #15,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    crossedsmil_ptr,-(A7)
      ADDI.L    #$3C,(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0181:JSR       switch_logbase
      TST.W     screen_rez
      BEQ       L0182
      MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      MOVE.L    sw_fllmuster,(A7)
      MOVE.W    #15,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    crossedsmil_ptr,-(A7)
      ADDI.L    #120,(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #2,(A7)
      MOVE.W    -2(A6),-(A7)
      SUBQ.W    #2,(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0183
L0182:MOVEA.W   10(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -14(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
      MOVE.L    col_farb2jmptab,(A7)
      MOVE.W    #15,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    crossedsmil_ptr,-(A7)
      ADDI.L    #$3C,(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0183:MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      UNLK      A6
      RTS

init_crossedsmil_img:LINK      A6,#-20
      MOVE.L    #crossedsmil_img,-16(A6)
      CLR.W     -2(A6)
      BRA       L018A
L0185:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    -16(A6),A0
      MOVE.L    (A0),-8(A6)
      CLR.L     -12(A6)
      CLR.W     -4(A6)
      BRA       L0189
L0186:MOVE.L    -12(A6),D0
      ASR.L     #1,D0
      MOVE.L    D0,-12(A6)
      BTST      #7,-8(A6)
      BEQ       L0187
      MOVE.L    #$80000000,D0
      OR.L      D0,-12(A6)
      BRA       L0188
L0187:MOVE.L    #$7FFFFFFF,D0
      AND.L     D0,-12(A6)
L0188:MOVE.L    -8(A6),D0
      ASL.L     #1,D0
      MOVE.L    D0,-8(A6)
      ADDQ.W    #1,-4(A6)
L0189:CMPI.W    #18,-4(A6)
      BLT.S     L0186
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    -16(A6),A0
      MOVE.L    -12(A6),(A0)
      ADDQ.W    #1,-2(A6)
L018A:CMPI.W    #15,-2(A6)
      BLT.S     L0185
      UNLK      A6
      RTS

init_some_shp:LINK      A6,#-4
      JSR       init_crossedsmil_img
      MOVE.L    #crossedsmil_img,crossedsmil_ptr
      MOVE.L    #mapsmily_img,mapsmily_ptr
      MOVE.L    #mapsmily2_img,mapsmily2_ptr
      TST.W     screen_rez
      BEQ       L018C
      MOVE.L    #30,(A7)
      MOVE.L    crossedsmil_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
      MOVE.L    #5,(A7)
      MOVE.L    mapsmily_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
      MOVE.L    #5,(A7)
      MOVE.L    mapsmily2_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
L018C:UNLK      A6
      RTS

draw_one_note_score:LINK      A6,#-10
      MOVE.W    8(A6),D0
      MULS      #7,D0
      ADDQ.W    #4,D0
      MOVE.W    D0,-2(A6)
      MOVEQ     #35,D0
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVE.W    (A1),D1
      MULS      #3,D1
      SUB.W     D1,D0
      MOVE.W    D0,-4(A6)
      TST.W     screen_rez
      BEQ       L018E
      ASL       -2(A6)
      ASL       -4(A6)
      ADDQ.W    #1,-4(A6)
L018E:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #akt_score,A0
      TST.W     (A0)
      BLT       L0195
      CLR.W     -6(A6)
      BRA       L0194
L018F:TST.W     screen_rez
      BEQ       L0190
      CLR.W     (A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      ADDI.W    #9,(A7)
      MOVE.W    -4(A6),-(A7)
      ADDI.W    #-9,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      BRA       L0191
L0190:CLR.W     (A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      ADDQ.W    #4,(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #4,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_box
      ADDQ.L    #8,A7
L0191:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #akt_score,A0
      BTST      #0,1(A0)
      BEQ       L0193
      TST.W     screen_rez
      BEQ       L0192
      MOVE.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #4,(A7)
      MOVE.W    -2(A6),-(A7)
      ADDI.W    #9,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_hline
      ADDQ.L    #6,A7
      MOVE.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #5,(A7)
      MOVE.W    -2(A6),-(A7)
      ADDI.W    #9,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_hline
      ADDQ.L    #6,A7
      BRA       L0193
L0192:MOVE.W    #15,(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #2,(A7)
      MOVE.W    -2(A6),-(A7)
      ADDQ.W    #4,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_cline
      ADDQ.L    #6,A7
L0193:JSR       switch_logbase
      ADDQ.W    #1,-6(A6)
L0194:CMPI.W    #2,-6(A6)
      BLT       L018F
L0195:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #akt_score,A0
      MOVE.W    10(A6),(A0)
      MOVEQ     #35,D0
      MOVE.W    10(A6),D1
      MULS      #3,D1
      SUB.W     D1,D0
      MOVE.W    D0,-4(A6)
      TST.W     screen_rez
      BEQ       L0196
      MOVE.W    -4(A6),D0
      ADD.W     -4(A6),D0
      ADDQ.W    #1,D0
      MOVE.W    D0,-4(A6)
L0196:TST.W     10(A6)
      BLT       L01A1
      CLR.W     -6(A6)
      BRA       L01A0
L0197:TST.W     screen_rez
      BEQ       L019A
      TST.W     team_flag
      BEQ       L0198
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #team_notes_color_table,A1
      MOVEA.W   0(A0,A1.L),A0
      BRA       L0199
L0198:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
L0199:ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    mapsmily_ptr,-(A7)
      ADDI.L    #20,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L019F
L019A:TST.W     team_flag
      BEQ       L019B
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #team_notes_color_table,A1
      MOVEA.W   0(A0,A1.L),A0
      BRA       L019C
L019B:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
L019C:ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    mapsmily_ptr,-(A7)
      ADDI.L    #10,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
      TST.W     team_flag
      BEQ       L019D
      SUBA.L    A0,A0
      BRA       L019E
L019D:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
L019E:ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    mapsmily2_ptr,-(A7)
      ADDI.L    #10,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L019F:JSR       switch_logbase
      ADDQ.W    #1,-6(A6)
L01A0:CMPI.W    #2,-6(A6)
      BLT       L0197
L01A1:UNLK      A6
      RTS

draw_all_notes_score:LINK      A6,#-6
      MOVE.W    screen_offset_score_notes,(A7)
      JSR       set_screen_offs
      CLR.W     -2(A6)
      BRA       L01A7
L01A3:TST.W     team_flag
      BEQ       L01A5
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #team_scores,D1
      MOVE.W    0(A0,D1.L),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BEQ       L01A4
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #team_scores,D1
      MOVE.W    0(A0,D1.L),(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       draw_one_note_score
      ADDQ.L    #2,A7
L01A4:BRA       L01A6
L01A5:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_score(A0,D1.L),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BEQ       L01A6
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_score(A0,D1.L),(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       draw_one_note_score
      ADDQ.L    #2,A7
L01A6:ADDQ.W    #1,-2(A6)
L01A7:MOVE.W    -2(A6),D0
      CMP.W     8(A6),D0
      BLT       L01A3
      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      UNLK      A6
      RTS

update_notes_score:LINK      A6,#-8
      MOVE.W    screen_offset_score_notes,(A7)
      JSR       set_screen_offs
L01A9:CLR.W     -4(A6)
      CLR.W     -2(A6)
      BRA       L01AD
L01AA:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #score_table,D1
      MOVE.W    0(A0,D1.L),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BLE       L01AB
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #akt_score,D1
      MOVE.W    0(A0,D1.L),(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       draw_one_note_score
      ADDQ.L    #2,A7
      MOVE.W    #1,-4(A6)
      BRA       L01AC
L01AB:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #score_table,D1
      MOVE.W    0(A0,D1.L),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #akt_score,A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BGE       L01AC
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #akt_score,D1
      MOVE.W    0(A0,D1.L),(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       draw_one_note_score
      ADDQ.L    #2,A7
      MOVE.W    #1,-4(A6)
L01AC:ADDQ.W    #1,-2(A6)
L01AD:MOVE.W    -2(A6),D0
      CMP.W     8(A6),D0
      BLT       L01AA
      TST.W     -4(A6)
      BEQ       L01B0
      MOVE.W    #7,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     -2(A6)
      BRA       L01AF
L01AE:MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      ADDQ.W    #1,-2(A6)
L01AF:CMPI.W    #10,-2(A6)
      BLT.S     L01AE
      BRA       L01A9
L01B0:MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      UNLK      A6
      RTS

copy_screen:LINK      A6,#0
      MOVEM.L   A4-A5/D6-D7,-(A7)
      MOVE.W    screen_flag,D0
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #screen_ptr,A0
      MOVEA.L   (A0),A5
      MOVEA.W   screen_flag,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #screen_ptr,A0
      MOVEA.L   (A0),A4
      CLR.W     D7
      BRA       L01B3
L01B2:MOVE.W    (A5)+,(A4)+
      ADDQ.W    #1,D7
L01B3:CMP.W     #16000,D7
      BLT.S     L01B2
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      TST.W     screen_flag
      BNE       L01B4
      JSR       switch_logbase
L01B4:TST.L     (A7)+
      MOVEM.L   (A7)+,A4-A5/D7
      UNLK      A6
      RTS

save_part_of_screen_for_dialog:LINK      A6,#-12
      MOVEM.L   A5/D3-D7,-(A7)
      MOVE.W    main_wind_off,-12(A6)
      TST.W     screen_rez
      BEQ       L01B6
      MOVE.W    #202,D0
      BRA       L01B7
L01B6:MOVEQ     #101,D0
L01B7:MOVE.W    D0,-10(A6)
      TST.W     screen_rez
      BEQ       L01B8
      MOVEQ     #20,D0
      BRA       L01B9
L01B8:MOVEQ     #40,D0
L01B9:MOVE.W    D0,-8(A6)
      MOVE.W    pscore_wind_off,-6(A6)
      TST.W     screen_rez
      BEQ       L01BA
      MOVEQ     #76,D0
      BRA       L01BB
L01BA:MOVEQ     #38,D0
L01BB:MOVE.W    D0,-4(A6)
      TST.W     screen_rez
      BEQ       L01BC
      MOVEQ     #16,D0
      BRA       L01BD
L01BC:MOVEQ     #32,D0
L01BD:MOVE.W    D0,-2(A6)
      CLR.W     D4
      CLR.W     D7
      BRA       L01C7
L01BE:MOVE.W    D7,D0
      MULS      #6,D0
      MOVE.W    -12(A6,D0.L),D0
      EXT.L     D0
      MOVEA.L   D0,A5
      ADDA.L    screen_ptr,A5
      CLR.W     D6
      BRA       L01C6
L01BF:CLR.W     D5
      BRA       L01C3
L01C0:TST.W     8(A6)
      BNE       L01C1
      MOVEA.W   D4,A0
      ADDA.L    A0,A0
      ADDA.L    #save_part_of_screen_for_dialog_buffer,A0
      MOVEA.W   D5,A1
      ADDA.L    A1,A1
      ADDA.L    A5,A1
      MOVE.W    (A1),(A0)
      ADDQ.W    #1,D4
      BRA       L01C2
L01C1:MOVEA.W   D5,A0
      ADDA.L    A0,A0
      ADDA.L    A5,A0
      MOVEA.W   D4,A1
      ADDA.L    A1,A1
      ADDA.L    #save_part_of_screen_for_dialog_buffer,A1
      MOVE.W    (A1),(A0)
      ADDQ.W    #1,D4
L01C2:ADDQ.W    #1,D5
L01C3:MOVE.W    D7,D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      CMP.W     -8(A0),D5
      BLT.S     L01C0
      TST.W     screen_rez
      BEQ       L01C4
      MOVEQ     #40,D0
      BRA       L01C5
L01C4:MOVEQ     #80,D0
L01C5:EXT.L     D0
      ASL.L     #1,D0
      ADDA.L    D0,A5
      ADDQ.W    #1,D6
L01C6:MOVE.W    D7,D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      CMP.W     -10(A0),D6
      BLT.S     L01BF
      ADDQ.W    #1,D7
L01C7:CMP.W     #2,D7
      BLT       L01BE
      TST.L     (A7)+
      MOVEM.L   (A7)+,A5/D4-D7
      UNLK      A6
      RTS

ask_mouse:LINK      A6,#-8
      CLR.W     -4(A6)                  ; joystick bitmask
      MOVE.W    mouse_dx,-2(A6)
      MOVE.W    mouse_dy,D0
      ADD.W     D0,mouse_dy2            ; delta forward/reverse speed
      CLR.W     D0
      MOVE.W    D0,mouse_dy
      MOVE.W    D0,mouse_dx

      CMPI.W    #5,-2(A6)
      BLE       L01C9
      ORI.W     #8,-4(A6)               ; right
      BRA       L01CA
L01C9:CMPI.W    #-5,-2(A6)
      BGE       L01CA
      ORI.W     #4,-4(A6)               ; left
L01CA:

      CMPI.W    #$FFFB,mouse_button     ; both buttons
      BEQ       L01CB
      CMPI.W    #$FFF9,mouse_button     ; left button
      BNE       L01CC
L01CB:CLR.W     mouse_dy2               ; stop motion

L01CC:CMPI.W    #100,mouse_dy2
      BLE       L01CD
      MOVE.W    #100,mouse_dy2
      BRA       L01CE
L01CD:CMPI.W    #-100,mouse_dy2
      BGE       L01CE
      MOVE.W    #-100,mouse_dy2
L01CE:CMPI.W    #20,mouse_dy2
      BLE       L01CF
      ORI.W     #2,-4(A6)               ; down
      BRA       L01D0
L01CF:CMPI.W    #-20,mouse_dy2
      BGE       L01D0
      ORI.W     #1,-4(A6)               ; up
L01D0:

      CMPI.W    #$FFFB,mouse_button     ; both button
      BEQ       L01D1
      CMPI.W    #$FFFA,mouse_button     ; right button
      BNE       L01D2
L01D1:ORI.W     #16,-4(A6)              ; button
L01D2:

      MOVE.W    -4(A6),D0
      BRA       L01D3
L01D3:UNLK      A6
      RTS

bconout_dec_number:LINK      A6,#-4
      TST.W     8(A6)
      BGE       L01D5
      MOVE.W    #'-',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    8(A6),D0
      NEG.W     D0
      MOVE.W    D0,8(A6)
L01D5:CMPI.W    #9,8(A6)
      BLE       L01D6
      MOVE.W    8(A6),D0
      EXT.L     D0
      DIVS      #10,D0
      MOVE.W    D0,(A7)
      JSR       bconout_dec_number
L01D6:MOVE.W    8(A6),D0
      EXT.L     D0
      DIVS      #10,D0
      SWAP      D0
      MOVE.W    D0,(A7)
      ADDI.W    #'0',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      UNLK      A6
      RTS

bconout_string:LINK      A6,#-4
      BRA       L01D9
L01D8:MOVEA.L   8(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      ADDQ.L    #1,8(A6)
L01D9:MOVEA.L   8(A6),A0
      TST.B     (A0)
      BNE.S     L01D8
      UNLK      A6
      RTS

midicam_print_current_player:LINK      A6,#-6
      CLR.W     -2(A6)
      BRA       L01E2
L01DB:MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$2A,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L01DC
      MOVE.W    #48,(A7)
      BRA       L01DD
L01DC:MOVE.W    #24,(A7)
L01DD:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L01DE
      MOVE.W    #1,(A7)
      BRA       L01DF
L01DE:MOVE.W    #15,(A7)
L01DF:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.L    #str_spaces,(A7)
      JSR       bconout_string
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'Y',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #42(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L01E0
      MOVE.W    #48,(A7)
      BRA       L01E1
L01E0:MOVE.W    #24,(A7)
L01E1:ADDI.W    #32,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    own_number,(A7)
      ADDQ.W    #1,(A7)
      JSR       bconout_dec_number
      MOVE.W    #':',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    own_number,(A7)
      JSR       print_playername
      JSR       switch_logbase
      ADDQ.W    #1,-2(A6)
L01E2:CMPI.W    #2,-2(A6)
      BLT       L01DB
      UNLK      A6
      RTS

draw_karte:LINK      A6,#-14
      TST.W     screen_rez
      BEQ       L01F0
      MOVE.W    #2,(A7)
      TST.W     screen_rez
      BEQ       L01E4
      MOVE.W    #6,-(A7)
      BRA       L01E5
L01E4:MOVE.W    #3,-(A7)
L01E5:TST.W     screen_rez
      BEQ       L01E6
      MOVE.W    #188,D0
      BRA       L01E7
L01E6:MOVEQ     #94,D0
L01E7:ADD.W     D0,(A7)
      ADDQ.W    #6,(A7)

      TST.W     screen_rez
      BEQ       L01E8
      MOVE.W    #6,-(A7)
      BRA       L01E9
L01E8:MOVE.W    #3,-(A7)
L01E9:TST.W     screen_rez
      BEQ       L01EA
      MOVE.W    #307,D0
      BRA       L01EB
L01EA:MOVE.W    #153,D0
L01EB:ADD.W     D0,(A7)
      ADDQ.W    #6,(A7)

      TST.W     screen_rez
      BEQ       L01EC
      MOVE.W    #6,-(A7)
      BRA       L01ED
L01EC:MOVE.W    #3,-(A7)
L01ED:SUBQ.W    #6,(A7)
      TST.W     screen_rez
      BEQ       L01EE
      MOVE.W    #6,-(A7)
      BRA       L01EF
L01EE:MOVE.W    #3,-(A7)
L01EF:SUBQ.W    #6,(A7)
      JSR       dr_sw_box
      ADDQ.L    #8,A7
      BRA       L01FD


L01F0:MOVE.W    #7,(A7)
      TST.W     screen_rez
      BEQ       L01F1
      MOVE.W    #6,-(A7)
      BRA       L01F2
L01F1:MOVE.W    #3,-(A7)
L01F2:TST.W     screen_rez
      BEQ       L01F3
      MOVE.W    #188,D0
      BRA       L01F4
L01F3:MOVEQ     #94,D0
L01F4:ADD.W     D0,(A7)
      ADDQ.W    #3,(A7)

      TST.W     screen_rez
      BEQ       L01F5
      MOVE.W    #6,-(A7)
      BRA       L01F6
L01F5:MOVE.W    #3,-(A7)
L01F6:TST.W     screen_rez
      BEQ       L01F7
      MOVE.W    #307,D0
      BRA       L01F8
L01F7:MOVE.W    #153,D0
L01F8:ADD.W     D0,(A7)
      ADDQ.W    #3,(A7)

      TST.W     screen_rez
      BEQ       L01F9
      MOVE.W    #6,-(A7)
      BRA       L01FA
L01F9:MOVE.W    #3,-(A7)
L01FA:SUBQ.W    #3,(A7)

      TST.W     screen_rez
      BEQ       L01FB
      MOVE.W    #6,-(A7)
      BRA       L01FC
L01FB:MOVE.W    #3,-(A7)
L01FC:SUBQ.W    #3,(A7)

      JSR       dr_c_box
      ADDQ.L    #8,A7
L01FD:

      CLR.W     -2(A6)    ;y
      BRA       L021D
L01FE:MOVE.W    #1,-4(A6)   ;x
      BRA       L021C
L01FF:CLR.W     (A7)
      MOVE.W    -4(A6),-(A7)   ;x
      MOVE.W    -2(A6),-(A7)    ;y
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L020D

      TST.W     screen_rez
      BEQ       L0200
      MOVE.W    #188,D0
      BRA       L0201
L0200:MOVEQ     #94,D0
L0201:MULS      -2(A6),D0    ;y
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L0202
      MOVEQ     #6,D1
      BRA       L0203
L0202:MOVEQ     #3,D1
L0203:ADD.W     D1,D0
      MOVE.W    D0,-10(A6)

      TST.W     screen_rez
      BEQ       L0204
      MOVE.W    #307,D0
      BRA       L0205
L0204:MOVE.W    #153,D0
L0205:MOVE.W    -4(A6),D1   ;x
      SUBQ.W    #1,D1
      MULS      D1,D0
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L0206
      MOVEQ     #6,D1
      BRA       L0207
L0206:MOVEQ     #3,D1
L0207:ADD.W     D1,D0
      MOVE.W    D0,-6(A6)

      TST.W     screen_rez
      BEQ       L0208
      MOVE.W    #307,D0
      BRA       L0209
L0208:MOVE.W    #153,D0
L0209:MOVE.W    -4(A6),D1   ;x
      ADDQ.W    #1,D1
      MULS      D1,D0
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L020A
      MOVEQ     #6,D1
      BRA       L020B
L020A:MOVEQ     #3,D1
L020B:ADD.W     D1,D0
      MOVE.W    D0,-8(A6)

      TST.W     screen_rez
      BEQ       L020C
      CLR.W     (A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       dr_sw_hline
      ADDQ.L    #6,A7
      BRA       L020D
L020C:MOVE.W    #2,(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       dr_c_cline
      ADDQ.L    #6,A7

L020D:MOVE.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)   ;x
      MOVE.W    -2(A6),-(A7)    ;y
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L021B

      TST.W     screen_rez
      BEQ       L020E
      MOVE.W    #307,D0
      BRA       L020F
L020E:MOVE.W    #153,D0
L020F:MULS      -2(A6),D0    ;y
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L0210
      MOVEQ     #6,D1
      BRA       L0211
L0210:MOVEQ     #3,D1
L0211:ADD.W     D1,D0
      MOVE.W    D0,-10(A6)

      TST.W     screen_rez
      BEQ       L0212
      MOVE.W    #188,D0
      BRA       L0213
L0212:MOVEQ     #94,D0
L0213:MOVE.W    -4(A6),D1   ;x
      SUBQ.W    #1,D1
      MULS      D1,D0
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L0214
      MOVEQ     #6,D1
      BRA       L0215
L0214:MOVEQ     #3,D1
L0215:ADD.W     D1,D0
      MOVE.W    D0,-6(A6)

      TST.W     screen_rez
      BEQ       L0216
      MOVE.W    #188,D0
      BRA       L0217
L0216:MOVEQ     #94,D0
L0217:MOVE.W    -4(A6),D1   ;x
      ADDQ.W    #1,D1
      MULS      D1,D0
      EXT.L     D0
      DIVS      maze_size,D0
      TST.W     screen_rez
      BEQ       L0218
      MOVEQ     #6,D1
      BRA       L0219
L0218:MOVEQ     #3,D1
L0219:ADD.W     D1,D0
      MOVE.W    D0,-8(A6)

      TST.W     screen_rez
      BEQ       L021A
      CLR.W     (A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       dr_sw_vline
      ADDQ.L    #6,A7
      BRA       L021B
L021A:MOVE.W    #2,(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7

L021B:ADDQ.W    #2,-4(A6)   ;x
L021C:MOVE.W    -4(A6),D0   ;x
      CMP.W     maze_size,D0
      BLT       L01FF
      ADDQ.W    #2,-2(A6)    ;y
L021D:MOVE.W    -2(A6),D0    ;y
      CMP.W     maze_size,D0
      BLE       L01FE
      UNLK      A6
      RTS

set_ply_karte:LINK      A6,#-16
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),-6(A6)

      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),-8(A6)

      MOVE.W    maze_size,D0
      ASL.W     #7,D0
      MOVE.W    D0,(A7)
      MOVE.W    -8(A6),-(A7)
      TST.W     screen_rez
      BEQ       L021F
      MOVE.W    #307,-(A7)
      BRA       L0220
L021F:MOVE.W    #153,-(A7)
L0220:JSR       _muls_divs
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0221
      MOVEQ     #6,D1
      BRA       L0222
L0221:MOVEQ     #3,D1
L0222:ADD.W     D1,D0
      SUBQ.W    #2,D0
      MOVE.W    D0,-10(A6)

      MOVE.W    maze_size,D0
      ASL.W     #7,D0
      MOVE.W    D0,(A7)
      MOVE.W    -6(A6),-(A7)
      TST.W     screen_rez
      BEQ       L0223
      MOVE.W    #188,-(A7)
      BRA       L0224
L0223:MOVE.W    #94,-(A7)
L0224:JSR       _muls_divs
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0225
      MOVEQ     #6,D1
      BRA       L0226
L0225:MOVEQ     #3,D1
L0226:ADD.W     D1,D0
      ADDQ.W    #2,D0
      MOVE.W    D0,-12(A6)

      TST.W     screen_rez
      BEQ       L0227
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    mapsmily_ptr,-(A7)
      ADDI.L    #20,(A7)
      MOVE.W    -12(A6),-(A7)
      ADDQ.W    #2,(A7)
      MOVE.W    -10(A6),-(A7)
      SUBQ.W    #2,(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0228

L0227:MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    mapsmily_ptr,-(A7)
      ADDI.L    #10,(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #5,-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    mapsmily2_ptr,-(A7)
      ADDI.L    #10,(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0228:UNLK      A6
      RTS

drone_setup:LINK      A6,#-220
      CLR.W     -42(A6)
      CLR.W     -44(A6)
      CLR.W     -46(A6)
      CLR.W     D0
      MOVE.W    D0,-56(A6)
      MOVE.W    D0,-54(A6)
      MOVE.W    D0,-52(A6)
      MOVE.W    D0,-50(A6)
      CLR.W     D0
      MOVE.W    D0,-206(A6)
      MOVE.W    D0,-204(A6)
      MOVE.W    D0,-202(A6)
      MOVE.W    D0,-46(A6)
      CLR.W     -208(A6)
      CLR.W     D0
      MOVE.W    D0,-216(A6)
      MOVE.W    D0,-214(A6)
      MOVE.W    D0,-212(A6)
      MOVE.W    D0,-210(A6)
      MOVE.W    active_drones,D0
      ADD.W     active_drones+2,D0
      ADD.W     active_drones+4,D0
      ADD.W     8(A6),D0
      MOVE.W    D0,-44(A6)
      TST.W     team_flag
      BEQ       L028E
      CLR.W     -48(A6)
      BRA       L0231
L022A:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      BRA       L022F
L022B:MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    -48(A6),-92(A0)
      ADDQ.W    #1,-46(A6)
      BRA       L0230
L022C:MOVEA.W   -202(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    -48(A6),-128(A0)
      ADDQ.W    #1,-202(A6)
      BRA       L0230
L022D:MOVEA.W   -204(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    -48(A6),-164(A0)
      ADDQ.W    #1,-204(A6)
      BRA       L0230
L022E:MOVEA.W   -206(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    -48(A6),-200(A0)
      ADDQ.W    #1,-206(A6)
      BRA       L0230
      BRA       L0230
L022F:TST.W     D0
      BEQ.S     L022B
      CMP.W     #1,D0
      BEQ.S     L022C
      CMP.W     #2,D0
      BEQ.S     L022D
      CMP.W     #3,D0
      BEQ.S     L022E
      BRA       L0230
L0230:ADDQ.W    #1,-48(A6)
L0231:MOVE.W    -48(A6),D0
      CMP.W     -44(A6),D0
      BLT       L022A
      MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #-1,-92(A0)
      MOVEA.W   -202(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #-1,-128(A0)
      MOVEA.W   -204(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #-1,-164(A0)
      MOVEA.W   -206(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #-1,-200(A0)
      CMPI.W    #-1,-92(A6)
      BEQ       L0232
      ADDQ.W    #1,-208(A6)
      MOVEQ     #1,D0
      MOVE.W    D0,-210(A6)
      MOVE.W    D0,-50(A6)
L0232:CMPI.W    #-1,-128(A6)
      BEQ       L0233
      ADDQ.W    #1,-208(A6)
      MOVEQ     #1,D0
      MOVE.W    D0,-212(A6)
      MOVE.W    D0,-52(A6)
L0233:CMPI.W    #-1,-164(A6)
      BEQ       L0234
      ADDQ.W    #1,-208(A6)
      MOVEQ     #1,D0
      MOVE.W    D0,-214(A6)
      MOVE.W    D0,-54(A6)
L0234:CMPI.W    #-1,-200(A6)
      BEQ       L0235
      ADDQ.W    #1,-208(A6)
      MOVEQ     #1,D0
      MOVE.W    D0,-216(A6)
      MOVE.W    D0,-56(A6)
L0235:CMPI.W    #1,-208(A6)
      BNE       L0238
      CLR.W     -48(A6)
      BRA       L0237
L0236:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,116(A0)
      ADDQ.W    #1,-48(A6)
L0237:MOVE.W    -48(A6),D0
      CMP.W     -44(A6),D0
      BLT.S     L0236
      BRA       L028D
L0238:CLR.W     D0
      MOVE.W    D0,-206(A6)
      MOVE.W    D0,-204(A6)
      MOVE.W    D0,-202(A6)
      MOVE.W    D0,-46(A6)
      CLR.W     -48(A6)
      BRA       L028C
L0239:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      BRA       L028A
L023A:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L023B
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BNE       L024D
L023B:TST.W     -52(A6)
      BEQ       L0241
      TST.W     -212(A6)
      BEQ       L0241
      MOVEA.W   -202(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-128(A0)
      BNE       L023C
      CLR.W     -202(A6)
L023C:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -202(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -128(A1),116(A0)
      ADDQ.W    #1,-202(A6)
      TST.W     -54(A6)
      BNE       L023D
      TST.W     -56(A6)
      BEQ       L023E
L023D:CLR.W     -212(A6)
L023E:TST.W     -54(A6)
      BEQ       L023F
      MOVE.W    #1,-214(A6)
L023F:TST.W     -56(A6)
      BEQ       L0240
      MOVE.W    #1,-216(A6)
L0240:BRA       L024C
L0241:TST.W     -54(A6)
      BEQ       L0247
      TST.W     -214(A6)
      BEQ       L0247
      MOVEA.W   -204(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-164(A0)
      BNE       L0242
      CLR.W     -204(A6)
L0242:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -204(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -164(A1),116(A0)
      ADDQ.W    #1,-204(A6)
      TST.W     -52(A6)
      BNE       L0243
      TST.W     -56(A6)
      BEQ       L0244
L0243:CLR.W     -214(A6)
L0244:TST.W     -56(A6)
      BEQ       L0245
      MOVE.W    #1,-216(A6)
      BRA       L0246
L0245:TST.W     -52(A6)
      BEQ       L0246
      MOVE.W    #1,-212(A6)
L0246:BRA       L024C
L0247:TST.W     -56(A6)
      BEQ       L024C
      TST.W     -216(A6)
      BEQ       L024C
      MOVEA.W   -206(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-200(A0)
      BNE       L0248
      CLR.W     -206(A6)
L0248:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -206(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -200(A1),116(A0)
      ADDQ.W    #1,-206(A6)
      TST.W     -52(A6)
      BNE       L0249
      TST.W     -54(A6)
      BEQ       L024A
L0249:CLR.W     -216(A6)
L024A:TST.W     -52(A6)
      BEQ       L024B
      MOVE.W    #1,-212(A6)
L024B:TST.W     -54(A6)
      BEQ       L024C
      MOVE.W    #1,-214(A6)
L024C:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
L024D:BRA       L028B
L024E:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L024F
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BNE       L0261
L024F:TST.W     -50(A6)
      BEQ       L0255
      TST.W     -210(A6)
      BEQ       L0255
      MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-92(A0)
      BNE       L0250
      CLR.W     -46(A6)
L0250:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -46(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -92(A1),116(A0)
      ADDQ.W    #1,-46(A6)
      TST.W     -56(A6)
      BNE       L0251
      TST.W     -54(A6)
      BEQ       L0252
L0251:CLR.W     -210(A6)
L0252:TST.W     -56(A6)
      BEQ       L0253
      MOVE.W    #1,-216(A6)
L0253:TST.W     -54(A6)
      BEQ       L0254
      MOVE.W    #1,-214(A6)
L0254:BRA       L0260
L0255:TST.W     -54(A6)
      BEQ       L025B
      TST.W     -214(A6)
      BEQ       L025B
      MOVEA.W   -204(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-164(A0)
      BNE       L0256
      CLR.W     -204(A6)
L0256:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -204(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -164(A1),116(A0)
      ADDQ.W    #1,-204(A6)
      TST.W     -50(A6)
      BNE       L0257
      TST.W     -56(A6)
      BEQ       L0258
L0257:CLR.W     -214(A6)
L0258:TST.W     -56(A6)
      BEQ       L0259
      MOVE.W    #1,-216(A6)
      BRA       L025A
L0259:TST.W     -50(A6)
      BEQ       L025A
      MOVE.W    #1,-210(A6)
L025A:BRA       L0260
L025B:TST.W     -56(A6)
      BEQ       L0260
      TST.W     -216(A6)
      BEQ       L0260
      MOVEA.W   -206(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-200(A0)
      BNE       L025C
      CLR.W     -206(A6)
L025C:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -206(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -200(A1),116(A0)
      ADDQ.W    #1,-206(A6)
      TST.W     -50(A6)
      BNE       L025D
      TST.W     -54(A6)
      BEQ       L025E
L025D:CLR.W     -216(A6)
L025E:TST.W     -50(A6)
      BEQ       L025F
      MOVE.W    #1,-210(A6)
L025F:TST.W     -54(A6)
      BEQ       L0260
      MOVE.W    #1,-214(A6)
L0260:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
L0261:BRA       L028B
L0262:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L0263
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BNE       L0275
L0263:TST.W     -52(A6)
      BEQ       L0269
      TST.W     -212(A6)
      BEQ       L0269
      MOVEA.W   -202(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-128(A0)
      BNE       L0264
      CLR.W     -202(A6)
L0264:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -202(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -128(A1),116(A0)
      ADDQ.W    #1,-202(A6)
      TST.W     -50(A6)
      BNE       L0265
      TST.W     -56(A6)
      BEQ       L0266
L0265:CLR.W     -212(A6)
L0266:TST.W     -50(A6)
      BEQ       L0267
      MOVE.W    #1,-210(A6)
L0267:TST.W     -56(A6)
      BEQ       L0268
      MOVE.W    #1,-216(A6)
L0268:BRA       L0274
L0269:TST.W     -50(A6)
      BEQ       L026F
      TST.W     -210(A6)
      BEQ       L026F
      MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-92(A0)
      BNE       L026A
      CLR.W     -46(A6)
L026A:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -46(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -92(A1),116(A0)
      ADDQ.W    #1,-46(A6)
      TST.W     -52(A6)
      BNE       L026B
      TST.W     -56(A6)
      BEQ       L026C
L026B:CLR.W     -210(A6)
L026C:TST.W     -56(A6)
      BEQ       L026D
      MOVE.W    #1,-216(A6)
      BRA       L026E
L026D:TST.W     -52(A6)
      BEQ       L026E
      MOVE.W    #1,-212(A6)
L026E:BRA       L0274
L026F:TST.W     -56(A6)
      BEQ       L0274
      TST.W     -216(A6)
      BEQ       L0274
      MOVEA.W   -206(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-200(A0)
      BNE       L0270
      CLR.W     -206(A6)
L0270:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -206(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -200(A1),116(A0)
      ADDQ.W    #1,-206(A6)
      TST.W     -50(A6)
      BNE       L0271
      TST.W     -52(A6)
      BEQ       L0272
L0271:CLR.W     -216(A6)
L0272:TST.W     -50(A6)
      BEQ       L0273
      MOVE.W    #1,-210(A6)
L0273:TST.W     -52(A6)
      BEQ       L0274
      MOVE.W    #1,-212(A6)
L0274:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
L0275:BRA       L028B
L0276:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L0277
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BNE       L0289
L0277:TST.W     -52(A6)
      BEQ       L027D
      TST.W     -212(A6)
      BEQ       L027D
      MOVEA.W   -202(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-128(A0)
      BNE       L0278
      CLR.W     -202(A6)
L0278:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -202(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -128(A1),116(A0)
      ADDQ.W    #1,-202(A6)
      TST.W     -54(A6)
      BNE       L0279
      TST.W     -50(A6)
      BEQ       L027A
L0279:CLR.W     -212(A6)
L027A:TST.W     -54(A6)
      BEQ       L027B
      MOVE.W    #1,-214(A6)
L027B:TST.W     -50(A6)
      BEQ       L027C
      MOVE.W    #1,-210(A6)
L027C:BRA       L0288
L027D:TST.W     -54(A6)
      BEQ       L0283
      TST.W     -214(A6)
      BEQ       L0283
      MOVEA.W   -204(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-164(A0)
      BNE       L027E
      CLR.W     -204(A6)
L027E:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -204(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -164(A1),116(A0)
      ADDQ.W    #1,-204(A6)
      TST.W     -50(A6)
      BNE       L027F
      TST.W     -52(A6)
      BEQ       L0280
L027F:CLR.W     -214(A6)
L0280:TST.W     -50(A6)
      BEQ       L0281
      MOVE.W    #1,-210(A6)
      BRA       L0282
L0281:TST.W     -52(A6)
      BEQ       L0282
      MOVE.W    #1,-212(A6)
L0282:BRA       L0288
L0283:TST.W     -50(A6)
      BEQ       L0288
      TST.W     -210(A6)
      BEQ       L0288
      MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-92(A0)
      BNE       L0284
      CLR.W     -46(A6)
L0284:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -46(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -92(A1),116(A0)
      ADDQ.W    #1,-46(A6)
      TST.W     -52(A6)
      BNE       L0285
      TST.W     -54(A6)
      BEQ       L0286
L0285:CLR.W     -210(A6)
L0286:TST.W     -52(A6)
      BEQ       L0287
      MOVE.W    #1,-212(A6)
L0287:TST.W     -54(A6)
      BEQ       L0288
      MOVE.W    #1,-214(A6)
L0288:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
L0289:BRA       L028B
      BRA       L028B
L028A:TST.W     D0
      BEQ       L023A
      CMP.W     #1,D0
      BEQ       L024E
      CMP.W     #2,D0
      BEQ       L0262
      CMP.W     #3,D0
      BEQ       L0276
      BRA       L028B
L028B:ADDQ.W    #1,-48(A6)
L028C:MOVE.W    -48(A6),D0
      CMP.W     -44(A6),D0
      BLT       L0239
L028D:BRA       L0299
L028E:CLR.W     -48(A6)
      BRA       L0290
L028F:MOVEA.W   -48(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    -48(A6),-40(A0)
      ADDQ.W    #1,-48(A6)
L0290:MOVE.W    -48(A6),D0
      CMP.W     8(A6),D0
      BLT.S     L028F
      MOVEA.W   -48(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      MOVE.W    #-1,-40(A0)
      MOVE.W    8(A6),-48(A6)
      BRA       L0298
L0291:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L0292
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BNE       L0295
L0292:CLR.W     -46(A6)
      BRA       L0294
L0293:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -46(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVEA.W   -46(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A6,A1
      MOVE.W    -40(A1),80(A0)
      ADDQ.W    #1,-46(A6)
L0294:MOVEA.W   -46(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-40(A0)
      BNE.S     L0293
L0295:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -46(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,80(A0)
      MOVEA.W   -42(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A6,A0
      CMPI.W    #-1,-40(A0)
      BNE       L0296
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      CLR.W     D2
      MOVE.W    D2,-42(A6)
      EXT.L     D2
      ASL.L     #1,D2
      ADD.L     D2,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    80(A1),116(A0)
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
      BRA       L0297
L0296:MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      MOVE.W    -42(A6),D2
      EXT.L     D2
      ASL.L     #1,D2
      ADD.L     D2,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    80(A1),116(A0)
      ADDQ.W    #1,-42(A6)
      MOVE.W    -48(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -48(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),118(A0)
L0297:ADDQ.W    #1,-48(A6)
L0298:MOVE.W    -48(A6),D0
      CMP.W     -44(A6),D0
      BLT       L0291
L0299:UNLK      A6
      RTS

drone_action:LINK      A6,#-8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_dronetype(A0,D1.L),D0
      BRA       L02B1
L029B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L029C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L02B2
L029C:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L029E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),D1
      CMP.W     D1,D0
      BEQ       L029E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L029E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BEQ       L029E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BEQ       L029D
      TST.W     team_flag
      BEQ       L029D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_gunman(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L029E
L029D:TST.W     team_flag
      BNE       L029E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_gunman(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
L029E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-4(A6)
      TST.W     -4(A6)
      BGE       L029F
      TST.W     team_flag
      BEQ       L029F
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
      BRA       L02A7
L029F:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02A6
      TST.W     team_flag
      BNE       L02A6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02A0
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L02A0:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    118(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L02A1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    118(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-4(A6)
      BRA       L02A5
L02A1:CLR.W     -2(A6)
      BRA       L02A4
L02A2:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L02A3
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L02A3
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BEQ       L02A3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      MOVE.W    -2(A6),D2
      EXT.L     D2
      ASL.L     #1,D2
      ADD.L     D2,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    80(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-4(A6)
      BRA       L02A5
L02A3:ADDQ.W    #1,-2(A6)
L02A4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -2(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #-1,80(A0)
      BNE       L02A2
L02A5:BRA       L02A7
L02A6:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02A7
      TST.W     team_flag
      BEQ       L02A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,78(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
L02A7:MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02A8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
L02A8:MOVE.W    8(A6),(A7)
      JSR       drone_sub_a
      TST.W     D0
      BNE       L02B2
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_d
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
L02A9:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02AA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
L02AA:MOVE.W    8(A6),(A7)
      JSR       drone_sub_a
      TST.W     D0
      BNE       L02B2
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
L02AB:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02AC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L02B2
L02AC:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L02AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    116(A1),D1
      CMP.W     D1,D0
      BEQ       L02AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L02AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BEQ       L02AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0
      BEQ       L02AD
      TST.W     team_flag
      BEQ       L02AD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_gunman(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L02AE
L02AD:TST.W     team_flag
      BNE       L02AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_gunman(A1),116(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
L02AE:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-4(A6)
      MOVE.W    -4(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L02AF
      TST.W     team_flag
      BEQ       L02B0
      TST.W     -4(A6)
      BGE       L02B0
L02AF:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
L02B0:MOVE.W    8(A6),(A7)
      JSR       drone_sub_a
      TST.W     D0
      BNE       L02B2
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_k
      MOVE.W    8(A6),(A7)
      JSR       L0361
      BRA       L02B2
      BRA       L02B2
L02B1:CMP.W     #'k',D0
      BEQ       L029B
      CMP.W     #'l',D0
      BEQ       L02AB
      CMP.W     #'r',D0
      BEQ       L02A9
      BRA       L02B2
L02B2:UNLK      A6
      RTS

drone_sub_a:LINK      A6,#-6
      CLR.W     -2(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02B4
      CLR.W     D0
      BRA       L02C9
L02B4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     34(A0,D1.L)
      BEQ       L02B9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BNE       L02B9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BNE       L02B9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L02B9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     drone_var_8
      BEQ       L02B5
      MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
      BRA       L02B8
L02B5:TST.W     drone_var_7
      BEQ       L02B6
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
      BRA       L02B8
L02B6:TST.W     drone_var_6
      BEQ       L02B7
      MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
      BRA       L02B8
L02B7:TST.W     drone_var_5
      BEQ       L02B8
      MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
L02B8:CLR.W     D0
      BRA       L02C9
L02B9:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     28(A0)
      BLE       L02BA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,28(A0)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    32(A1),(A0)
      MOVEQ     #1,D0
      BRA       L02C9
      BRA       L02BB
L02BA:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     28(A0)
      BGE       L02BB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      ADDQ.W    #1,28(A0)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    32(A1),(A0)
      MOVEQ     #1,D0
      BRA       L02C9
L02BB:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     34(A0,D1.L)
      BEQ       L02C7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     28(A0,D1.L)
      BNE       L02C7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_richtung(A0)
      BEQ       L02BC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #64,ply_richtung(A0)
      BNE       L02C0
L02BC:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02BD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #7,28(A0)
      MOVE.W    -2(A6),D0
      OR.W      #8,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L02BF
L02BD:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02BE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$FFF9,28(A0)
      MOVE.W    -2(A6),D0
      OR.W      #4,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L02BF
L02BE:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #14,28(A0)
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #4,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L02BF:BRA       L02C6
L02C0:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$80,ply_richtung(A0)
      BEQ       L02C1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$C0,ply_richtung(A0)
      BNE       L02C5
L02C1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02C2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$FFF9,28(A0)
      MOVE.W    -2(A6),D0
      OR.W      #4,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L02C4
L02C2:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02C3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #7,28(A0)
      MOVE.W    -2(A6),D0
      OR.W      #8,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L02C4
L02C3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #14,28(A0)
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #8,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L02C4:BRA       L02C6
L02C5:MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
      CLR.W     D0
      BRA       L02C9
L02C6:MOVEQ     #1,D0
      BRA       L02C9
L02C7:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     30(A0,D1.L)
      BEQ       L02C8
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    32(A1),(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,30(A0)
      MOVEQ     #1,D0
      BRA       L02C9
L02C8:CLR.W     D0
      BRA       L02C9
L02C9:UNLK      A6
      RTS

drone_sub_b:LINK      A6,#-12
      TST.W     26(A6)
      BNE       L02CB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),-2(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),-4(A6)
      MOVE.W    -2(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
      MOVE.W    -4(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
      BRA       L02CC
L02CB:MOVE.W    28(A6),-6(A6)
      MOVE.W    30(A6),-8(A6)
L02CC:MOVEA.L   22(A6),A1
      CLR.W     D0
      MOVE.W    D0,(A1)
      MOVEA.L   18(A6),A1
      MOVE.W    D0,(A1)
      MOVEA.L   14(A6),A1
      MOVE.W    D0,(A1)
      MOVEA.L   10(A6),A1
      MOVE.W    D0,(A1)
      CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L02CD
      MOVEA.L   10(A6),A0
      MOVE.W    #1,(A0)
L02CD:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      ADDQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L02CE
      MOVEA.L   14(A6),A0
      MOVE.W    #1,(A0)
L02CE:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L02CF
      MOVEA.L   22(A6),A0
      MOVE.W    #1,(A0)
L02CF:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L02D0
      MOVEA.L   18(A6),A0
      MOVE.W    #1,(A0)
L02D0:UNLK      A6
      RTS

drone_sub_c:LINK      A6,#-18
      CLR.W     D0
      MOVE.W    D0,drone_var_1
      MOVE.W    D0,drone_var_2
      MOVE.W    D0,drone_var_3
      MOVE.W    D0,drone_var_4
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-14(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),-6(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),-8(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),-10(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),-12(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,78(A0)
      MOVE.W    -10(A6),D0
      SUB.W     -6(A6),D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -12(A6),D0
      SUB.W     -8(A6),D0
      MOVE.W    D0,-4(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L02D2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L02D2:CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L02D5
      TST.W     -4(A6)
      BGE       L02D4
      TST.W     drone_var_5
      BEQ       L02D3
      MOVE.W    #1,drone_var_1
      BRA       L02D4
L02D3:TST.W     -4(A6)
      BLE       L02D4
      TST.W     drone_var_6
      BEQ       L02D4
      MOVE.W    #1,drone_var_2
L02D4:BRA       L02DF
L02D5:TST.W     -4(A6)
      BNE       L02D8
      TST.W     -2(A6)
      BGE       L02D7
      TST.W     drone_var_8
      BEQ       L02D6
      MOVE.W    #1,drone_var_4
      BRA       L02D7
L02D6:TST.W     -2(A6)
      BLE       L02D7
      TST.W     drone_var_7
      BEQ       L02D7
      MOVE.W    #1,drone_var_3
L02D7:BRA       L02DF
L02D8:TST.W     -2(A6)
      BGE       L02DC
      TST.W     drone_var_8
      BEQ       L02D9
      MOVE.W    #1,drone_var_4
      BRA       L02DB
L02D9:TST.W     -4(A6)
      BGE       L02DA
      TST.W     drone_var_5
      BEQ       L02DA
      MOVE.W    #1,drone_var_1
      BRA       L02DB
L02DA:TST.W     -4(A6)
      BLE       L02DB
      TST.W     drone_var_6
      BEQ       L02DB
      MOVE.W    #1,drone_var_2
L02DB:BRA       L02DF
L02DC:TST.W     -2(A6)
      BLE       L02DF
      TST.W     drone_var_7
      BEQ       L02DD
      MOVE.W    #1,drone_var_3
      BRA       L02DF
L02DD:TST.W     -4(A6)
      BGE       L02DE
      TST.W     drone_var_5
      BEQ       L02DE
      MOVE.W    #1,drone_var_1
      BRA       L02DF
L02DE:TST.W     -4(A6)
      BLE       L02DF
      TST.W     drone_var_6
      BEQ       L02DF
      MOVE.W    #1,drone_var_2
L02DF:TST.W     drone_var_4
      BNE       L02E4
      TST.W     drone_var_3
      BNE       L02E4
      TST.W     drone_var_2
      BNE       L02E4
      TST.W     drone_var_1
      BNE       L02E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L02E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_richtung(A0)
      BLE       L02E0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #32,ply_richtung(A0)
      BGT       L02E0
      TST.W     drone_var_8
      BEQ       L02E0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_richtung(A0)
      MOVE.W    #1,drone_var_4
      BRA       L02E4
L02E0:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #32,ply_richtung(A0)
      BLE       L02E1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #96,ply_richtung(A0)
      BGT       L02E1
      TST.W     drone_var_6
      BEQ       L02E1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,ply_richtung(A0)
      MOVE.W    #1,drone_var_2
      BRA       L02E4
L02E1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #96,ply_richtung(A0)
      BLE       L02E2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #160,ply_richtung(A0)
      BGT       L02E2
      TST.W     drone_var_7
      BEQ       L02E2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,ply_richtung(A0)
      MOVE.W    #1,drone_var_3
      BRA       L02E4
L02E2:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #160,ply_richtung(A0)
      BLE       L02E3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$E0,ply_richtung(A0)
      BGT       L02E3
      TST.W     drone_var_5
      BEQ       L02E3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,ply_richtung(A0)
      MOVE.W    #1,drone_var_1
      BRA       L02E4
L02E3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$E0,ply_richtung(A0)
      BLE       L02E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$100,ply_richtung(A0)
      BGE       L02E4
      TST.W     drone_var_8
      BEQ       L02E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_richtung(A0)
      MOVE.W    #1,drone_var_4
L02E4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L02E8
      TST.W     drone_var_4
      BEQ       L02E5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_richtung(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    #1,drone_var_8
      BRA       L02E8
L02E5:TST.W     drone_var_3
      BEQ       L02E6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,ply_richtung(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_7
      BRA       L02E8
L02E6:TST.W     drone_var_2
      BEQ       L02E7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,ply_richtung(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_6
      BRA       L02E8
L02E7:TST.W     drone_var_1
      BEQ       L02E8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,ply_richtung(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_5
L02E8:UNLK      A6
      RTS

drone_sub_d:LINK      A6,#-36
      CLR.W     D0
      MOVE.W    D0,drone_var_1
      MOVE.W    D0,drone_var_2
      MOVE.W    D0,drone_var_3
      MOVE.W    D0,drone_var_4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-32(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-18(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-20(A6)
      MOVE.W    -32(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    -32(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      MOVE.W    -22(A6),D0
      SUB.W     -18(A6),D0
      MOVE.W    D0,-14(A6)
      MOVE.W    -24(A6),D0
      SUB.W     -20(A6),D0
      MOVE.W    D0,-16(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    #drone_var_5,-(A7)
      MOVE.L    #drone_var_6,-(A7)
      MOVE.L    #drone_var_7,-(A7)
      MOVE.L    #drone_var_8,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -14(A6)
      BNE       L0301
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L0301
      TST.W     -16(A6)
      BGE       L02F5
      TST.W     drone_var_5
      BEQ       L02EE
      MOVE.W    #1,drone_var_1
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L02EC
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L02EA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L02EB
L02EA:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02EB
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L02EB:BRA       L02ED
L02EC:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02ED
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L02ED:BRA       L02F4
L02EE:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_l
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02EF
      BRA       L02F4
L02EF:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02F0
      MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02F0
      BRA       L02F4
L02F0:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02F1
      BRA       L02F4
L02F1:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02F2
      BRA       L02F4
L02F2:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02F3
      BRA       L02F4
L02F3:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L02F4
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
L02F4:BRA       L0300
L02F5:TST.W     -16(A6)
      BLE       L0300
      TST.W     drone_var_6
      BEQ       L02FA
      MOVE.W    #1,drone_var_2
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L02F8
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L02F6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L02F7
L02F6:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02F7
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L02F7:BRA       L02F9
L02F8:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L02F9
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L02F9:BRA       L0300
L02FA:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_l
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02FB
      BRA       L0300
L02FB:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L02FC
      MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02FC
      BRA       L0300
L02FC:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02FD
      BRA       L0300
L02FD:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02FE
      BRA       L0300
L02FE:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L02FF
      BRA       L0300
L02FF:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L0300
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
L0300:BRA       L0338
L0301:TST.W     -16(A6)
      BNE       L0319
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L0319
      TST.W     -14(A6)
      BGE       L030D
      TST.W     drone_var_8
      BEQ       L0306
      MOVE.W    #1,drone_var_4
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0304
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L0302
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L0303
L0302:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0303
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0303:BRA       L0305
L0304:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0305
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0305:BRA       L030C
L0306:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_l
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0307
      BRA       L030C
L0307:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L0308
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0308
      BRA       L030C
L0308:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0309
      BRA       L030C
L0309:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L030A
      BRA       L030C
L030A:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L030B
      BRA       L030C
L030B:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L030C
      MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
L030C:BRA       L0318
L030D:TST.W     -14(A6)
      BLE       L0318
      TST.W     drone_var_7
      BEQ       L0312
      MOVE.W    #1,drone_var_3
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0310
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L030E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L030F
L030E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L030F
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L030F:BRA       L0311
L0310:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0311
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0311:BRA       L0318
L0312:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_l
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0313
      BRA       L0318
L0313:MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L0314
      MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0314
      BRA       L0318
L0314:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0315
      BRA       L0318
L0315:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0316
      BRA       L0318
L0316:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0317
      BRA       L0318
L0317:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L0318
      MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
L0318:BRA       L0338
L0319:TST.W     -14(A6)
      BGE       L0329
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L0329
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L031A
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      BRA       L0328
L031A:TST.W     drone_var_8
      BEQ       L031B
      MOVE.W    #1,drone_var_4
      BRA       L0328
L031B:TST.W     -16(A6)
      BGE       L031C
      TST.W     drone_var_5
      BEQ       L031C
      MOVE.W    #1,drone_var_1
      BRA       L0328
L031C:TST.W     -16(A6)
      BLE       L031D
      TST.W     drone_var_6
      BEQ       L031D
      MOVE.W    #1,drone_var_2
      BRA       L0328
L031D:TST.W     drone_var_8
      BNE       L0323
      TST.W     -16(A6)
      BLE       L0323
      TST.W     drone_var_6
      BNE       L0323
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L031E
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L031E
      BRA       L0322
L031E:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L031F
      BRA       L0322
L031F:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0320
      BRA       L0322
L0320:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0321
      BRA       L0322
L0321:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
L0322:BRA       L0328
L0323:TST.W     drone_var_8
      BNE       L0328
      TST.W     -16(A6)
      BGE       L0328
      TST.W     drone_var_5
      BNE       L0328
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L0324
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0324
      BRA       L0328
L0324:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0325
      BRA       L0328
L0325:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0326
      BRA       L0328
L0326:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0327
      BRA       L0328
L0327:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_n
      ADDQ.L    #2,A7
L0328:BRA       L0338
L0329:TST.W     -14(A6)
      BLE       L0338
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     36(A0)
      BNE       L0338
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L032A
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      BRA       L0338
L032A:TST.W     drone_var_7
      BEQ       L032B
      MOVE.W    #1,drone_var_3
      BRA       L0338
L032B:TST.W     -16(A6)
      BGE       L032C
      TST.W     drone_var_5
      BEQ       L032C
      MOVE.W    #1,drone_var_1
      BRA       L0338
L032C:TST.W     -16(A6)
      BLE       L032D
      TST.W     drone_var_6
      BEQ       L032D
      MOVE.W    #1,drone_var_2
      BRA       L0338
L032D:TST.W     drone_var_7
      BNE       L0333
      TST.W     -16(A6)
      BGE       L0333
      TST.W     drone_var_5
      BNE       L0333
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L032E
      MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L032E
      BRA       L0332
L032E:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L032F
      BRA       L0332
L032F:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_o
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0330
      BRA       L0332
L0330:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0331
      BRA       L0332
L0331:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
L0332:BRA       L0338
L0333:TST.W     drone_var_7
      BNE       L0338
      TST.W     -16(A6)
      BLE       L0338
      TST.W     drone_var_6
      BNE       L0338
      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #1,D0
      BEQ       L0334
      MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0334
      BRA       L0338
L0334:MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0335
      BRA       L0338
L0335:MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_p
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0336
      BRA       L0338
L0336:MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L0337
      BRA       L0338
L0337:MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_m
      ADDQ.L    #2,A7
L0338:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     36(A0,D1.L)
      BEQ       L035C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    72(A0),-30(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    48(A0,D1.L),D0
      CMP.W     -18(A6),D0
      BNE       L0339
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    50(A0,D1.L),D0
      CMP.W     -20(A6),D0
      BNE       L0339
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      ADDQ.W    #1,72(A0)
      MOVE.W    72(A0),D0
      MOVE.W    D0,-30(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     74(A0)
L0339:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #78,74(A0)
      MOVE      SR,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      ADDQ.W    #1,74(A1)
      MOVE      D0,CCR
      BLE       L033A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     74(A0)
L033A:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     48(A0)
      BEQ       L033B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #-1,36(A0)
      BNE       L0345
L033B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      TST.W     -30(A6)
      BLE       L0340
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$100,36(A0)
      BNE       L033C
      MOVE.W    #1,drone_var_4
      BRA       L033F
L033C:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #64,36(A0)
      BNE       L033D
      MOVE.W    #1,drone_var_2
      BRA       L033F
L033D:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$80,36(A0)
      BNE       L033E
      MOVE.W    #1,drone_var_3
      BRA       L033F
L033E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$C0,36(A0)
      BNE       L033F
      MOVE.W    #1,drone_var_1
L033F:BRA       L0344
L0340:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$100,36(A0)
      BNE       L0341
      MOVE.W    #1,drone_var_4
      BRA       L0344
L0341:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #64,36(A0)
      BNE       L0342
      MOVE.W    #1,drone_var_2
      BRA       L0344
L0342:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$80,36(A0)
      BNE       L0343
      MOVE.W    #1,drone_var_3
      BRA       L0344
L0343:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      SUBQ.W    #1,D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$C0,36(A0)
      BNE       L0344
      MOVE.W    #1,drone_var_1
L0344:BRA       L035C
L0345:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$100,36(A0)
      BNE       L034B
      TST.W     drone_var_8
      BEQ       L034B
      TST.W     -30(A6)
      BNE       L0346
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_richtung(A0)
      BEQ       L0346
      MOVE.W    #$6E,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
L0346:MOVE.W    #1,drone_var_4
      TST.W     -16(A6)
      BNE       L034A
      TST.W     -14(A6)
      BGE       L034A
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0349
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L0347
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L0348
L0347:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0348
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0348:BRA       L034A
L0349:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L034A
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L034A:BRA       L035C
L034B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #64,36(A0)
      BNE       L0351
      TST.W     drone_var_6
      BEQ       L0351
      TST.W     -30(A6)
      BNE       L034C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #64,ply_richtung(A0)
      BEQ       L034C
      MOVE.W    #101,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
L034C:MOVE.W    #1,drone_var_2
      TST.W     -14(A6)
      BNE       L0350
      TST.W     -16(A6)
      BLE       L0350
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L034F
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L034D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L034E
L034D:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L034E
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L034E:BRA       L0350
L034F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0350
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0350:BRA       L035C
L0351:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$80,36(A0)
      BNE       L0357
      TST.W     drone_var_7
      BEQ       L0357
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$80,ply_richtung(A0)
      BEQ       L0352
      TST.W     -30(A6)
      BNE       L0352
      MOVE.W    #$73,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
L0352:MOVE.W    #1,drone_var_3
      TST.W     -16(A6)
      BNE       L0356
      TST.W     -14(A6)
      BLE       L0356
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0355
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L0353
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L0354
L0353:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0354
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0354:BRA       L0356
L0355:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0356
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L0356:BRA       L035C
L0357:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVE.W    -30(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$C0,36(A0)
      BNE       L035C
      TST.W     drone_var_5
      BEQ       L035C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #$C0,ply_richtung(A0)
      BEQ       L0358
      TST.W     -30(A6)
      BNE       L0358
      MOVE.W    #$77,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_j
      ADDQ.L    #2,A7
L0358:MOVE.W    #1,drone_var_1
      TST.W     -14(A6)
      BNE       L035C
      TST.W     -16(A6)
      BGE       L035C
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L035B
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L0359
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      BRA       L035A
L0359:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L035A
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L035A:BRA       L035C
L035B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L035C
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L035C:TST.W     drone_var_4
      BEQ       L035D
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    #1,drone_var_8
      BRA       L0360
L035D:TST.W     drone_var_3
      BEQ       L035E
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_7
      BRA       L0360
L035E:TST.W     drone_var_2
      BEQ       L035F
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_6
      BRA       L0360
L035F:TST.W     drone_var_1
      BEQ       L0360
      CLR.W     D0
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_5
L0360:UNLK      A6
      RTS

L0361:LINK      A6,#-6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_richtung(A0),-2(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0362
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #player_joy_table,A0
      MOVE.W    #16,(A0)
      BRA       L0385
L0362:TST.W     -2(A6)
      BNE       L0367
      TST.W     drone_var_8
      BEQ       L0367
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'r',ply_dronetype(A0)
      BNE       L0363
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
      BRA       L0366
L0363:TST.W     drone_var_6
      BEQ       L0364
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0366
L0364:TST.W     drone_var_5
      BEQ       L0365
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0366
L0365:MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
L0366:BRA       L0385
L0367:CMPI.W    #64,-2(A6)
      BNE       L036C
      TST.W     drone_var_6
      BEQ       L036C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'r',ply_dronetype(A0)
      BNE       L0368
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
      BRA       L036B
L0368:TST.W     drone_var_7
      BEQ       L0369
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L036B
L0369:TST.W     drone_var_8
      BEQ       L036A
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L036B
L036A:MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
L036B:BRA       L0385
L036C:CMPI.W    #$80,-2(A6)
      BNE       L0371
      TST.W     drone_var_7
      BEQ       L0371
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'r',ply_dronetype(A0)
      BNE       L036D
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
      BRA       L0370
L036D:TST.W     drone_var_6
      BEQ       L036E
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0370
L036E:TST.W     drone_var_5
      BEQ       L036F
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0370
L036F:MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
L0370:BRA       L0385
L0371:CMPI.W    #$C0,-2(A6)
      BNE       L0376
      TST.W     drone_var_5
      BEQ       L0376
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'r',ply_dronetype(A0)
      BNE       L0372
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
      BRA       L0375
L0372:TST.W     drone_var_7
      BEQ       L0373
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0375
L0373:TST.W     drone_var_8
      BEQ       L0374
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0375
L0374:MOVE.W    8(A6),(A7)
      JSR       drone_sub_t
L0375:BRA       L0385
L0376:TST.W     -2(A6)
      BNE       L037A
      TST.W     drone_var_8
      BNE       L037A
      TST.W     drone_var_6
      BEQ       L0377
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0379
L0377:TST.W     drone_var_5
      BEQ       L0378
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0379
L0378:MOVE.W    8(A6),(A7)
      JSR       drone_sub_u
L0379:BRA       L0385
L037A:CMPI.W    #64,-2(A6)
      BNE       L037E
      TST.W     drone_var_6
      BNE       L037E
      TST.W     drone_var_8
      BEQ       L037B
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L037D
L037B:TST.W     drone_var_7
      BEQ       L037C
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L037D
L037C:MOVE.W    8(A6),(A7)
      JSR       drone_sub_u
L037D:BRA       L0385
L037E:CMPI.W    #$80,-2(A6)
      BNE       L0382
      TST.W     drone_var_7
      BNE       L0382
      TST.W     drone_var_6
      BEQ       L037F
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0381
L037F:TST.W     drone_var_5
      BEQ       L0380
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0381
L0380:MOVE.W    8(A6),(A7)
      JSR       drone_sub_u
L0381:BRA       L0385
L0382:CMPI.W    #$C0,-2(A6)
      BNE       L0385
      TST.W     drone_var_5
      BNE       L0385
      TST.W     drone_var_8
      BEQ       L0383
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_r
      BRA       L0385
L0383:TST.W     drone_var_7
      BEQ       L0384
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_s
      BRA       L0385
L0384:MOVE.W    8(A6),(A7)
      JSR       drone_sub_u
L0385:UNLK      A6
      RTS

L0386:LINK      A6,#-22
      CLR.W     -10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-18(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_y(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_x(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-14(A6)
      TST.W     -12(A6)
      BGE       L0387
      MOVE.W    -12(A6),D0
      NEG.W     D0
      BRA       L0388
L0387:MOVE.W    -12(A6),D0
L0388:CMP.W     #$320,D0
      BGT       L038B
      TST.W     -14(A6)
      BGE       L0389
      MOVE.W    -14(A6),D0
      NEG.W     D0
      BRA       L038A
L0389:MOVE.W    -14(A6),D0
L038A:CMP.W     #$320,D0
      BGT       L038B
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L038C
L038B:CLR.W     D0
      BRA       L038E
L038C:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BNE       L038D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    4(A1),78(A0)
L038D:MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      JSR       drone_sub_e
      ADDQ.L    #2,A7
      MOVE.W    D0,-(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    (A7)+,ply_richtung(A0)
      MOVEQ     #1,D0
      BRA       L038E
L038E:UNLK      A6
      RTS

drone_sub_e:LINK      A6,#-10
      TST.W     8(A6)
      BGE       L0390
      CLR.W     D0
      BRA       L0391
L0390:MOVEQ     #1,D0
L0391:MOVE.W    D0,-2(A6)
      TST.W     8(A6)
      BGE       L0392
      MOVE.W    8(A6),D0
      NEG.W     D0
      MOVE.W    D0,8(A6)
L0392:TST.W     10(A6)
      BGE       L0393
      CLR.W     D0
      BRA       L0394
L0393:MOVEQ     #1,D0
L0394:MOVE.W    D0,-4(A6)
      TST.W     10(A6)
      BGE       L0395
      MOVE.W    10(A6),D0
      NEG.W     D0
      MOVE.W    D0,10(A6)
L0395:MOVE.W    10(A6),D0
      CMP.W     8(A6),D0
      BGT       L0396
      MOVE.W    8(A6),(A7)
      MOVE.W    10(A6),-(A7)
      MOVE.W    #32,-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      MOVE.W    (A0),-6(A6)
      BRA       L0397
L0396:MOVE.W    10(A6),(A7)
      MOVE.W    8(A6),-(A7)
      MOVE.W    #32,-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    #drone_angle_table,A0
      MOVE.W    (A0),-(A7)
      MOVEQ     #64,D0
      SUB.W     (A7)+,D0
      MOVE.W    D0,-6(A6)
L0397:MOVE.W    -2(A6),D0
      ASL.W     #1,D0
      ADD.W     -4(A6),D0
      BRA       L039C
L0398:ADDI.W    #$80,-6(A6)
      BRA       L039D
L0399:MOVE.W    #$80,D0
      SUB.W     -6(A6),D0
      MOVE.W    D0,-6(A6)
      BRA       L039D
L039A:MOVE.W    #$100,D0
      SUB.W     -6(A6),D0
      MOVE.W    D0,-6(A6)
      BRA       L039D
L039B:BRA       L039D
      BRA       L039D
L039C:TST.W     D0
      BEQ.S     L0398
      CMP.W     #1,D0
      BEQ.S     L0399
      CMP.W     #2,D0
      BEQ.S     L039A
      CMP.W     #3,D0
      BEQ.S     L039B
      BRA       L039D
L039D:MOVE.W    #$80,D0
      SUB.W     -6(A6),D0
      AND.W     #$FF,D0
      BRA       L039E
L039E:UNLK      A6
      RTS

drone_sub_f:LINK      A6,#-14
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-10(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L03A0
      CLR.W     D0
      BRA       L03AD
L03A0:MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      TST.W     10(A6)
      BEQ       L03A1
      MOVE.W    10(A6),-6(A6)
      BRA       L03A2
L03A1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
L03A2:TST.W     12(A6)
      BEQ       L03A3
      MOVE.W    12(A6),-8(A6)
      BRA       L03A4
L03A3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
L03A4:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03A5
      MOVE.W    -6(A6),D0
      CMP.W     -2(A6),D0
      BCC       L03A6
L03A5:CLR.W     D0
      BRA       L03AD
      BRA       L03A7
L03A6:CMPI.W    #1,-6(A6)
      BHI       L03A7
      CLR.W     D0
      BRA       L03AD
L03A7:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03A8
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03A8
      MOVEQ     #1,D0
      BRA       L03AD
L03A8:BRA       L03AA
L03A9:SUBQ.W    #2,-6(A6)
      TST.W     -6(A6)
      BEQ       L03AB
L03AA:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L03AB
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE.S     L03A9
L03AB:MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BEQ       L03AC
      CLR.W     D0
      BRA       L03AD
      BRA       L03AD
L03AC:MOVEQ     #1,D0
      BRA       L03AD
L03AD:UNLK      A6
      RTS

drone_sub_g:LINK      A6,#-14
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-10(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L03AF
      CLR.W     D0
      BRA       L03BC
L03AF:MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      TST.W     10(A6)
      BEQ       L03B0
      MOVE.W    10(A6),-6(A6)
      BRA       L03B1
L03B0:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
L03B1:TST.W     12(A6)
      BEQ       L03B2
      MOVE.W    12(A6),-8(A6)
      BRA       L03B3
L03B2:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
L03B3:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03B4
      MOVE.W    -6(A6),D0
      CMP.W     -2(A6),D0
      BLS       L03B5
L03B4:CLR.W     D0
      BRA       L03BC
      BRA       L03B6
L03B5:CMPI.W    #63,-6(A6)
      BLS       L03B6
      CLR.W     D0
      BRA       L03BC
L03B6:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03B7
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03B7
      MOVEQ     #1,D0
      BRA       L03BC
L03B7:BRA       L03B9
L03B8:ADDQ.W    #2,-6(A6)
      MOVE.W    -6(A6),D0
      CMP.W     #63,D0
      BHI       L03BA
L03B9:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      ADDQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L03BA
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE.S     L03B8
L03BA:MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BEQ       L03BB
      CLR.W     D0
      BRA       L03BC
      BRA       L03BC
L03BB:MOVEQ     #1,D0
      BRA       L03BC
L03BC:UNLK      A6
      RTS

drone_sub_h:LINK      A6,#-14
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-10(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L03BE
      CLR.W     D0
      BRA       L03CB
L03BE:MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      TST.W     10(A6)
      BEQ       L03BF
      MOVE.W    10(A6),-6(A6)
      BRA       L03C0
L03BF:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
L03C0:TST.W     12(A6)
      BEQ       L03C1
      MOVE.W    12(A6),-8(A6)
      BRA       L03C2
L03C1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
L03C2:MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03C3
      MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BCC       L03C4
L03C3:CLR.W     D0
      BRA       L03CB
      BRA       L03C5
L03C4:CMPI.W    #63,-8(A6)
      BLS       L03C5
      CLR.W     D0
      BRA       L03CB
L03C5:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03C6
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03C6
      MOVEQ     #1,D0
      BRA       L03CB
L03C6:BRA       L03C8
L03C7:ADDQ.W    #2,-8(A6)
      MOVE.W    -8(A6),D0
      CMP.W     #63,D0
      BHI       L03C9
L03C8:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L03C9
      MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE.S     L03C7
L03C9:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BEQ       L03CA
      CLR.W     D0
      BRA       L03CB
      BRA       L03CB
L03CA:MOVEQ     #1,D0
      BRA       L03CB
L03CB:UNLK      A6
      RTS

drone_sub_i:LINK      A6,#-14
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-10(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L03CD
      CLR.W     D0
      BRA       L03DA
L03CD:MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    -10(A6),D0
      MULU      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      TST.W     10(A6)
      BEQ       L03CE
      MOVE.W    10(A6),-6(A6)
      BRA       L03CF
L03CE:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
L03CF:TST.W     12(A6)
      BEQ       L03D0
      MOVE.W    12(A6),-8(A6)
      BRA       L03D1
L03D0:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
L03D1:MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03D2
      MOVE.W    -8(A6),D0
      CMP.W     -4(A6),D0
      BCC       L03D3
L03D2:CLR.W     D0
      BRA       L03DA
      BRA       L03D4
L03D3:CMPI.W    #1,-8(A6)
      BHI       L03D4
      CLR.W     D0
      BRA       L03DA
L03D4:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE       L03D5
      MOVE.W    -2(A6),D0
      CMP.W     -6(A6),D0
      BNE       L03D5
      MOVEQ     #1,D0
      BRA       L03DA
L03D5:BRA       L03D7
L03D6:SUBQ.W    #2,-8(A6)
      TST.W     -8(A6)
      BEQ       L03D8
L03D7:CLR.W     (A7)
      MOVE.W    -8(A6),-(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L03D8
      MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BNE.S     L03D6
L03D8:MOVE.W    -4(A6),D0
      CMP.W     -8(A6),D0
      BEQ       L03D9
      CLR.W     D0
      BRA       L03DA
      BRA       L03DA
L03D9:MOVEQ     #1,D0
      BRA       L03DA
L03DA:UNLK      A6
      RTS

drone_sub_j:LINK      A6,#-8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    10(A6),D0
      BRA       L03E1
L03DC:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_richtung(A0)
      MOVE.W    -2(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)
      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    #1,drone_var_8
      BRA       L03E2
L03DD:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,ply_richtung(A0)
      MOVE.W    -2(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)
      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_7
      BRA       L03E2
L03DE:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,ply_richtung(A0)
      MOVE.W    -2(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)
      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_5
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_6
      BRA       L03E2
L03DF:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,ply_richtung(A0)
      MOVE.W    -2(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)
      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)
      CLR.W     D0
      MOVE.W    D0,drone_var_6
      MOVE.W    D0,drone_var_7
      MOVE.W    D0,drone_var_8
      MOVE.W    #1,drone_var_5
      BRA       L03E2
L03E0:CLR.W     D0
      BRA       L03E2
      BRA       L03E2
L03E1:CMP.W     #'e',D0
      BEQ       L03DE
      CMP.W     #'n',D0
      BEQ       L03DC
      CMP.W     #'s',D0
      BEQ       L03DD
      CMP.W     #'w',D0
      BEQ       L03DF
      BRA.S     L03E0
L03E2:UNLK      A6
      RTS

drone_sub_k:LINK      A6,#-18
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L03E5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BNE       L03E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BEQ       L03E5
L03E4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_gunman(A0),-14(A6)
      BRA       L03E6
L03E5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-14(A6)
L03E6:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-8(A6)
      MOVE.W    -6(A6),D0
      SUB.W     -2(A6),D0
      MOVE.W    D0,-10(A6)
      MOVE.W    -8(A6),D0
      SUB.W     -4(A6),D0
      MOVE.W    D0,-12(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L03E7
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      JSR       drone_sub_e
      ADDQ.L    #2,A7
      MOVE.W    D0,-(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    (A7)+,ply_richtung(A0)
      BRA       L03FC
L03E7:TST.W     -10(A6)
      BNE       L03F1
      TST.W     -12(A6)
      BGE       L03EC
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L03EA
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L03E8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L03E9
L03E8:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03E9
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03E9:BRA       L03EB
L03EA:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03EB
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03EB:BRA       L03F0
L03EC:TST.W     -12(A6)
      BLE       L03F0
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L03EF
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L03ED
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L03EE
L03ED:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03EE
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03EE:BRA       L03F0
L03EF:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03F0
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03F0:BRA       L03FC
L03F1:TST.W     -12(A6)
      BNE       L03FB
      TST.W     -10(A6)
      BGE       L03F6
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L03F4
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L03F2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L03F3
L03F2:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03F3
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03F3:BRA       L03F5
L03F4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03F5
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03F5:BRA       L03FA
L03F6:TST.W     -10(A6)
      BLE       L03FA
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L03F9
      MOVE.W    8(A6),(A7)
      JSR       L0386
      TST.W     D0
      BEQ       L03F7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,76(A0)
      BRA       L03F8
L03F7:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03F8
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03F8:BRA       L03FA
L03F9:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03FA
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
L03FA:BRA       L03FC
L03FB:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L03FC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),(A7)
      JSR       drone_sub_c
L03FC:UNLK      A6
      RTS

drone_sub_l:LINK      A6,#-30
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-26(A6)
      MOVE.W    -26(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-18(A6)
      MOVE.W    -26(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-20(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0445
      TST.W     -8(A6)
      BEQ       L0420
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
L03FE:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L041F
      SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BLE       L041F
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L03FF
      TST.W     -2(A6)
      BNE       L03FF
      TST.W     -8(A6)
      BNE       L03FF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      BRA       L041F
L03FF:TST.W     -2(A6)
      BEQ       L041E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
L0400:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0401
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L041D
L0401:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGT       L0402
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L041D
L0402:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0403
      TST.W     -2(A6)
      BNE       L0403
      TST.W     -6(A6)
      BNE       L0403
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L041D
      BRA       L0404
L0403:TST.W     -2(A6)
      BEQ       L0404
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0404
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0404:TST.W     -6(A6)
      BEQ       L041C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0405
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    -24(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0405:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0406
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L041B
L0406:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L0407
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L041B
L0407:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0408
      TST.W     -4(A6)
      BNE       L0408
      TST.W     -6(A6)
      BNE       L0408
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L041B
      BRA       L040A
L0408:TST.W     -6(A6)
      BNE       L0409
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0409
      TST.W     -2(A6)
      BNE       L0409
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L041B
      BRA       L040A
L0409:TST.W     -6(A6)
      BNE       L040A
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L040A
      TST.W     -4(A6)
      BNE       L040A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L041B
L040A:TST.W     -2(A6)
      BNE       L040B
      TST.W     -4(A6)
      BEQ       L041A
L040B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0413
      TST.W     -2(A6)
      BEQ       L0413
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L040C:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L040D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0412
L040D:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BLE       L0412
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L040E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L040E:TST.W     -8(A6)
      BNE       L040F
      TST.W     -2(A6)
      BNE       L040F
      TST.W     -6(A6)
      BNE       L040F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0412
      BRA       L0411
L040F:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0410
      TST.W     -8(A6)
      BEQ       L0410
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0411
L0410:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0411
      TST.W     -6(A6)
      BEQ       L0411
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0411:TST.W     -2(A6)
      BNE       L040C
L0412:BRA       L041A
L0413:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L041A
      TST.W     -4(A6)
      BEQ       L041A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0414:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0415
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L041A
L0415:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BGT       L041A
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0416
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),66(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     68(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0416:TST.W     -6(A6)
      BNE       L0417
      TST.W     -8(A6)
      BNE       L0417
      TST.W     -4(A6)
      BNE       L0417
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-22(A6)
      BRA       L041A
      BRA       L0419
L0417:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0418
      TST.W     -8(A6)
      BEQ       L0418
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0419
L0418:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0419
      TST.W     -6(A6)
      BEQ       L0419
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0419:TST.W     -4(A6)
      BNE       L0414
L041A:TST.W     -6(A6)
      BNE       L0405
L041B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L041D
L041C:TST.W     -2(A6)
      BNE       L0400
L041D:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L041F
L041E:TST.W     -8(A6)
      BNE       L03FE
L041F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
L0420:TST.W     -6(A6)
      BEQ       L0444
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
L0421:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0444
      ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BGT       L0444
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0422
      TST.W     -6(A6)
      BNE       L0422
      TST.W     -4(A6)
      BEQ       L0444
L0422:TST.W     -2(A6)
      BEQ       L0443
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
L0423:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0424
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0442
L0424:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGT       L0425
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0442
L0425:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0426
      TST.W     -2(A6)
      BNE       L0426
      TST.W     -6(A6)
      BNE       L0426
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0442
      BRA       L0427
L0426:TST.W     -2(A6)
      BEQ       L0427
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0427
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0427:TST.W     -8(A6)
      BEQ       L0441
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0428
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    -24(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0428:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0429
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0440
L0429:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L042A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0440
L042A:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L042B
      TST.W     -2(A6)
      BNE       L042B
      TST.W     -8(A6)
      BNE       L042B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0440
      BRA       L042D
L042B:TST.W     -2(A6)
      BNE       L042C
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L042C
      TST.W     -8(A6)
      BNE       L042C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0440
      BRA       L042D
L042C:TST.W     -4(A6)
      BNE       L042D
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L042D
      TST.W     -8(A6)
      BNE       L042D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0440
L042D:TST.W     -2(A6)
      BNE       L042E
      TST.W     -4(A6)
      BEQ       L043F
L042E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0437
      TST.W     -2(A6)
      BEQ       L0437
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L042F:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0430
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0436
L0430:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGT       L0431
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0436
L0431:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0432
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0432:TST.W     -6(A6)
      BNE       L0433
      TST.W     -2(A6)
      BNE       L0433
      TST.W     -8(A6)
      BNE       L0433
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0436
      BRA       L0435
L0433:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0434
      TST.W     -8(A6)
      BEQ       L0434
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0435
L0434:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0435
      TST.W     -6(A6)
      BEQ       L0435
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0435:TST.W     -2(A6)
      BNE       L042F
L0436:BRA       L043F
L0437:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L043F
      TST.W     -4(A6)
      BEQ       L043F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0438:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0439
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L043F
L0439:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L043A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L043F
L043A:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L043B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L043B:TST.W     -6(A6)
      BNE       L043C
      TST.W     -8(A6)
      BNE       L043C
      TST.W     -4(A6)
      BNE       L043C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L043F
      BRA       L043E
L043C:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L043D
      TST.W     -8(A6)
      BEQ       L043D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L043E
L043D:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L043E
      TST.W     -6(A6)
      BEQ       L043E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L043E:TST.W     -4(A6)
      BNE       L0438
L043F:TST.W     -6(A6)
      BNE       L0428
L0440:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L0442
L0441:TST.W     -2(A6)
      BNE       L0423
L0442:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
L0443:TST.W     -8(A6)
      BNE       L0421
L0444:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
      BRA       L0527
L0445:CMPI.W    #$73,10(A6)
      BNE       L0490
      TST.W     -8(A6)
      BEQ       L046B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
L0446:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L046A
      SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L0447
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      BRA       L046A
L0447:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0448
      TST.W     -2(A6)
      BNE       L0448
      TST.W     -8(A6)
      BNE       L0448
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      BRA       L046A
L0448:TST.W     -4(A6)
      BEQ       L0469
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
L0449:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L044A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0468
L044A:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L044B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0468
L044B:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L044C
      TST.W     -4(A6)
      BNE       L044C
      TST.W     -6(A6)
      BNE       L044C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0468
      BRA       L044D
L044C:TST.W     -4(A6)
      BEQ       L044D
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L044D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L044D:TST.W     -6(A6)
      BEQ       L0467
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L044E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    -24(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L044E:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L044F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0466
L044F:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L0450
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0466
L0450:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0451
      TST.W     -4(A6)
      BNE       L0451
      TST.W     -6(A6)
      BNE       L0451
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0466
      BRA       L0453
L0451:TST.W     -6(A6)
      BNE       L0452
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0452
      TST.W     -2(A6)
      BNE       L0452
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0466
      BRA       L0453
L0452:TST.W     -6(A6)
      BNE       L0453
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L0453
      TST.W     -4(A6)
      BNE       L0453
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L0466
L0453:TST.W     -2(A6)
      BNE       L0454
      TST.W     -4(A6)
      BEQ       L0465
L0454:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L045D
      TST.W     -2(A6)
      BEQ       L045D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0455:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0456
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L045C
L0456:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGE       L0457
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L045C
L0457:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0458
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0458:TST.W     -8(A6)
      BNE       L0459
      TST.W     -2(A6)
      BNE       L0459
      TST.W     -6(A6)
      BNE       L0459
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L045C
      BRA       L045B
L0459:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L045A
      TST.W     -8(A6)
      BEQ       L045A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      BRA       L045B
L045A:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L045B
      TST.W     -6(A6)
      BEQ       L045B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L045B:TST.W     -2(A6)
      BNE       L0455
L045C:BRA       L0465
L045D:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L0465
      TST.W     -4(A6)
      BEQ       L0465
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L045E:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L045F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0465
L045F:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L0460
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0465
L0460:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0461
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),66(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     68(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0461:TST.W     -6(A6)
      BNE       L0462
      TST.W     -8(A6)
      BNE       L0462
      TST.W     -4(A6)
      BNE       L0462
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-22(A6)
      BRA       L0465
      BRA       L0464
L0462:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0463
      TST.W     -8(A6)
      BEQ       L0463
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0464
L0463:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0464
      TST.W     -6(A6)
      BEQ       L0464
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0464:TST.W     -4(A6)
      BNE       L045E
L0465:TST.W     -6(A6)
      BNE       L044E
L0466:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L0468
L0467:TST.W     -4(A6)
      BNE       L0449
L0468:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L046A
L0469:TST.W     -8(A6)
      BNE       L0446
L046A:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
L046B:TST.W     -6(A6)
      BEQ       L048F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
L046C:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L048F
      ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BGT       L048F
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L046D
      TST.W     -6(A6)
      BNE       L046D
      TST.W     -4(A6)
      BEQ       L048F
L046D:TST.W     -4(A6)
      BEQ       L048E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
L046E:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L046F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L048D
L046F:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L0470
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L048D
L0470:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0471
      TST.W     -4(A6)
      BNE       L0471
      TST.W     -6(A6)
      BNE       L0471
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L048D
      BRA       L0472
L0471:TST.W     -4(A6)
      BEQ       L0472
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0472
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0472:TST.W     -8(A6)
      BEQ       L048C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0473
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    -24(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0473:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0474
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L048B
L0474:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L0475
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L048B
L0475:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0476
      TST.W     -2(A6)
      BNE       L0476
      TST.W     -8(A6)
      BNE       L0476
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L048B
      BRA       L0478
L0476:TST.W     -2(A6)
      BNE       L0477
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0477
      TST.W     -8(A6)
      BNE       L0477
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L048B
      BRA       L0478
L0477:TST.W     -4(A6)
      BNE       L0478
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0478
      TST.W     -8(A6)
      BNE       L0478
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-24(A6)
      BRA       L048B
L0478:TST.W     -2(A6)
      BNE       L0479
      TST.W     -4(A6)
      BEQ       L048A
L0479:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0482
      TST.W     -2(A6)
      BEQ       L0482
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L047A:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L047B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0481
L047B:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGT       L047C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0481
L047C:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L047D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L047D:TST.W     -6(A6)
      BNE       L047E
      TST.W     -2(A6)
      BNE       L047E
      TST.W     -8(A6)
      BNE       L047E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L0481
      BRA       L0480
L047E:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L047F
      TST.W     -8(A6)
      BEQ       L047F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0480
L047F:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0480
      TST.W     -6(A6)
      BEQ       L0480
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0480:TST.W     -2(A6)
      BNE       L047A
L0481:BRA       L048A
L0482:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L048A
      TST.W     -4(A6)
      BEQ       L048A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0483:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0484
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L048A
L0484:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L0485
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L048A
L0485:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0486
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0486:TST.W     -6(A6)
      BNE       L0487
      TST.W     -8(A6)
      BNE       L0487
      TST.W     -4(A6)
      BNE       L0487
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    56(A0),-22(A6)
      BRA       L048A
      BRA       L0489
L0487:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0488
      TST.W     -8(A6)
      BEQ       L0488
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0489
L0488:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0489
      TST.W     -6(A6)
      BEQ       L0489
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0489:TST.W     -4(A6)
      BNE       L0483
L048A:TST.W     -6(A6)
      BNE       L0473
L048B:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L048D
L048C:TST.W     -4(A6)
      BNE       L046E
L048D:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
L048E:TST.W     -8(A6)
      BNE       L046C
L048F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
      BRA       L0527
L0490:CMPI.W    #$77,10(A6)
      BNE       L04DB
      TST.W     -4(A6)
      BEQ       L04B6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
L0491:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L04B5
      ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L0492
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      BRA       L04B5
L0492:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0493
      TST.W     -6(A6)
      BNE       L0493
      TST.W     -8(A6)
      BNE       L0493
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      BRA       L04B5
L0493:TST.W     -8(A6)
      BEQ       L04B4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
L0494:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0495
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04B3
L0495:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L0496
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04B3
L0496:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0497
      TST.W     -2(A6)
      BNE       L0497
      TST.W     -4(A6)
      BNE       L0497
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04B3
      BRA       L0498
L0497:TST.W     -8(A6)
      BEQ       L0498
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0498
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0498:TST.W     -2(A6)
      BEQ       L04B2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0499
      MOVE.W    -22(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,56(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0499:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L049A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04B1
L049A:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGE       L049B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L04B1
L049B:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L049C
      TST.W     -8(A6)
      BNE       L049C
      TST.W     -6(A6)
      BNE       L049C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04B1
      BRA       L049E
L049C:TST.W     -2(A6)
      BNE       L049D
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L049D
      TST.W     -8(A6)
      BNE       L049D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04B1
      BRA       L049E
L049D:TST.W     -2(A6)
      BNE       L049E
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L049E
      TST.W     -6(A6)
      BNE       L049E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04B1
L049E:TST.W     -8(A6)
      BNE       L049F
      TST.W     -6(A6)
      BEQ       L04B0
L049F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L04A8
      TST.W     -8(A6)
      BEQ       L04A8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04A0:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L04A1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04A7
L04A1:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L04A2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04A7
L04A2:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04A3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04A3:TST.W     -8(A6)
      BNE       L04A4
      TST.W     -2(A6)
      BNE       L04A4
      TST.W     -4(A6)
      BNE       L04A4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04A7
      BRA       L04A6
L04A4:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04A5
      TST.W     -2(A6)
      BEQ       L04A5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04A6
L04A5:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04A6
      TST.W     -4(A6)
      BEQ       L04A6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04A6:TST.W     -8(A6)
      BNE       L04A0
L04A7:BRA       L04B0
L04A8:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L04B0
      TST.W     -6(A6)
      BEQ       L04B0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04A9:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L04AA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04B0
L04AA:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L04AB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04B0
L04AB:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04AC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),66(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     68(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04AC:TST.W     -6(A6)
      BNE       L04AD
      TST.W     -2(A6)
      BNE       L04AD
      TST.W     -4(A6)
      BNE       L04AD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04B0
      BRA       L04AF
L04AD:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04AE
      TST.W     -2(A6)
      BEQ       L04AE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04AF
L04AE:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04AF
      TST.W     -4(A6)
      BEQ       L04AF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04AF:TST.W     -6(A6)
      BNE       L04A9
L04B0:TST.W     -2(A6)
      BNE       L0499
L04B1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L04B3
L04B2:TST.W     -8(A6)
      BNE       L0494
L04B3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L04B5
L04B4:TST.W     -4(A6)
      BNE       L0491
L04B5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
L04B6:TST.W     -2(A6)
      BEQ       L04DA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
L04B7:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L04DA
      SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BLT       L04DA
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L04B8
      TST.W     -6(A6)
      BNE       L04B8
      TST.W     -8(A6)
      BEQ       L04DA
L04B8:TST.W     -8(A6)
      BEQ       L04D9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
L04B9:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L04BA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04D8
L04BA:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L04BB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04D8
L04BB:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L04BC
      TST.W     -2(A6)
      BNE       L04BC
      TST.W     -4(A6)
      BNE       L04BC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04D8
      BRA       L04BD
L04BC:TST.W     -8(A6)
      BEQ       L04BD
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04BD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04BD:TST.W     -4(A6)
      BEQ       L04D7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04BE
      MOVE.W    -22(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,56(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04BE:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L04BF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L04D6
L04BF:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L04C0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L04D6
L04C0:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L04C1
      TST.W     -6(A6)
      BNE       L04C1
      TST.W     -8(A6)
      BNE       L04C1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04D6
      BRA       L04C3
L04C1:TST.W     -4(A6)
      BNE       L04C2
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L04C2
      TST.W     -8(A6)
      BNE       L04C2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04D6
      BRA       L04C3
L04C2:TST.W     -4(A6)
      BNE       L04C3
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L04C3
      TST.W     -6(A6)
      BNE       L04C3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04D6
L04C3:TST.W     -8(A6)
      BNE       L04C4
      TST.W     -6(A6)
      BEQ       L04D5
L04C4:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L04CD
      TST.W     -8(A6)
      BEQ       L04CD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04C5:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L04C6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04CC
L04C6:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L04C7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04CC
L04C7:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04C8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04C8:TST.W     -8(A6)
      BNE       L04C9
      TST.W     -2(A6)
      BNE       L04C9
      TST.W     -4(A6)
      BNE       L04C9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04CC
      BRA       L04CB
L04C9:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04CA
      TST.W     -2(A6)
      BEQ       L04CA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04CB
L04CA:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04CB
      TST.W     -4(A6)
      BEQ       L04CB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04CB:TST.W     -8(A6)
      BNE       L04C5
L04CC:BRA       L04D5
L04CD:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L04D5
      TST.W     -6(A6)
      BEQ       L04D5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04CE:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L04CF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04D5
L04CF:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L04D0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04D5
L04D0:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04D1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04D1:TST.W     -6(A6)
      BNE       L04D2
      TST.W     -2(A6)
      BNE       L04D2
      TST.W     -4(A6)
      BNE       L04D2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04D5
      BRA       L04D4
L04D2:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04D3
      TST.W     -2(A6)
      BEQ       L04D3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04D4
L04D3:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04D4
      TST.W     -4(A6)
      BEQ       L04D4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04D4:TST.W     -6(A6)
      BNE       L04CE
L04D5:TST.W     -4(A6)
      BNE       L04BE
L04D6:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L04D8
L04D7:TST.W     -8(A6)
      BNE       L04B9
L04D8:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
L04D9:TST.W     -2(A6)
      BNE       L04B7
L04DA:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
      BRA       L0527
L04DB:CMPI.W    #101,10(A6)
      BNE       L0526
      TST.W     -4(A6)
      BEQ       L0501
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,38(A0)
L04DC:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L0500
      ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L04DD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      BRA       L0500
L04DD:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L04DE
      TST.W     -6(A6)
      BNE       L04DE
      TST.W     -8(A6)
      BNE       L04DE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      BRA       L0500
L04DE:TST.W     -6(A6)
      BEQ       L04FF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
L04DF:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L04E0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04FE
L04E0:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L04E1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04FE
L04E1:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L04E2
      TST.W     -2(A6)
      BNE       L04E2
      TST.W     -4(A6)
      BNE       L04E2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L04FE
      BRA       L04E3
L04E2:TST.W     -6(A6)
      BEQ       L04E3
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04E3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04E3:TST.W     -2(A6)
      BEQ       L04FD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_f
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04E4
      MOVE.W    -22(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,56(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04E4:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L04E5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04FC
L04E5:SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BGE       L04E6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04FC
L04E6:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L04E7
      TST.W     -8(A6)
      BNE       L04E7
      TST.W     -6(A6)
      BNE       L04E7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04FC
      BRA       L04E9
L04E7:TST.W     -2(A6)
      BNE       L04E8
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L04E8
      TST.W     -8(A6)
      BNE       L04E8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04FC
      BRA       L04E9
L04E8:TST.W     -2(A6)
      BNE       L04E9
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L04E9
      TST.W     -6(A6)
      BNE       L04E9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L04FC
L04E9:TST.W     -8(A6)
      BNE       L04EA
      TST.W     -6(A6)
      BEQ       L04FB
L04EA:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L04F3
      TST.W     -8(A6)
      BEQ       L04F3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04EB:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L04EC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04F2
L04EC:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L04ED
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04F2
L04ED:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04EE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04EE:TST.W     -8(A6)
      BNE       L04EF
      TST.W     -2(A6)
      BNE       L04EF
      TST.W     -4(A6)
      BNE       L04EF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04F2
      BRA       L04F1
L04EF:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04F0
      TST.W     -2(A6)
      BEQ       L04F0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04F1
L04F0:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04F1
      TST.W     -4(A6)
      BEQ       L04F1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04F1:TST.W     -8(A6)
      BNE       L04EB
L04F2:BRA       L04FB
L04F3:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L04FB
      TST.W     -6(A6)
      BEQ       L04FB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L04F4:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L04F5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04FB
L04F5:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L04F6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04FB
L04F6:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L04F7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),66(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     68(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04F7:TST.W     -6(A6)
      BNE       L04F8
      TST.W     -2(A6)
      BNE       L04F8
      TST.W     -4(A6)
      BNE       L04F8
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L04FB
      BRA       L04FA
L04F8:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L04F9
      TST.W     -2(A6)
      BEQ       L04F9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L04FA
L04F9:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L04FA
      TST.W     -4(A6)
      BEQ       L04FA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L04FA:TST.W     -6(A6)
      BNE       L04F4
L04FB:TST.W     -2(A6)
      BNE       L04E4
L04FC:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L04FE
L04FD:TST.W     -6(A6)
      BNE       L04DF
L04FE:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L0500
L04FF:TST.W     -4(A6)
      BNE       L04DC
L0500:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
L0501:TST.W     -2(A6)
      BEQ       L0525
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
L0502:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0525
      SUBQ.W    #2,-22(A6)
      TST.W     -22(A6)
      BLT       L0525
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0524
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),50(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
L0503:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0504
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L0523
L0504:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L0505
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L0523
L0505:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0506
      TST.W     -2(A6)
      BNE       L0506
      TST.W     -4(A6)
      BNE       L0506
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-24(A6)
      BRA       L0523
      BRA       L0507
L0506:TST.W     -6(A6)
      BEQ       L0507
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0507
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,40(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0507:TST.W     -4(A6)
      BEQ       L0522
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
L0508:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0509
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L0521
L0509:ADDQ.W    #2,-22(A6)
      CMPI.W    #63,-22(A6)
      BLE       L050A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-22(A6)
      BRA       L0521
L050A:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L050B
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_g
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L050B
      MOVE.W    -22(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,56(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L050E
L050B:TST.W     -4(A6)
      BNE       L050C
      TST.W     -6(A6)
      BNE       L050C
      TST.W     -8(A6)
      BNE       L050C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L0521
      BRA       L050E
L050C:TST.W     -4(A6)
      BNE       L050D
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L050D
      TST.W     -8(A6)
      BNE       L050D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L0521
      BRA       L050E
L050D:TST.W     -4(A6)
      BNE       L050E
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L050E
      TST.W     -6(A6)
      BNE       L050E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-22(A6)
      BRA       L0521
L050E:TST.W     -8(A6)
      BNE       L050F
      TST.W     -6(A6)
      BEQ       L0520
L050F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BGE       L0518
      TST.W     -8(A6)
      BEQ       L0518
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0510:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0511
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0517
L0511:SUBQ.W    #2,-24(A6)
      TST.W     -24(A6)
      BGT       L0512
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0517
L0512:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_i
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L0513
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0513:TST.W     -8(A6)
      BNE       L0514
      TST.W     -2(A6)
      BNE       L0514
      TST.W     -4(A6)
      BNE       L0514
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0517
      BRA       L0516
L0514:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L0515
      TST.W     -2(A6)
      BEQ       L0515
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L0516
L0515:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L0516
      TST.W     -4(A6)
      BEQ       L0516
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVEQ     #1,D0
      BRA       L0527
L0516:TST.W     -8(A6)
      BNE       L0510
L0517:BRA       L0520
L0518:MOVE.W    -20(A6),D0
      CMP.W     -24(A6),D0
      BLE       L0520
      TST.W     -6(A6)
      BEQ       L0520
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
L0519:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L051A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0520
L051A:ADDQ.W    #2,-24(A6)
      CMPI.W    #63,-24(A6)
      BLE       L051B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0520
L051B:MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      MOVE.W    -24(A6),(A7)
      MOVE.W    -22(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_h
      ADDQ.L    #4,A7
      TST.W     D0
      BEQ       L051C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L051C:TST.W     -6(A6)
      BNE       L051D
      TST.W     -2(A6)
      BNE       L051D
      TST.W     -4(A6)
      BNE       L051D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    58(A0),-24(A6)
      BRA       L0520
      BRA       L051F
L051D:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BGE       L051E
      TST.W     -2(A6)
      BEQ       L051E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
      BRA       L051F
L051E:MOVE.W    -18(A6),D0
      CMP.W     -22(A6),D0
      BLE       L051F
      TST.W     -4(A6)
      BEQ       L051F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,46(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -24(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVEQ     #1,D0
      BRA       L0527
L051F:TST.W     -6(A6)
      BNE       L0519
L0520:TST.W     -4(A6)
      BNE       L0508
L0521:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      BRA       L0523
L0522:TST.W     -6(A6)
      BNE       L0503
L0523:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
L0524:TST.W     -2(A6)
      BNE       L0502
L0525:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
      BRA       L0527
L0526:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0527
L0527:UNLK      A6
      RTS

drone_sub_m:LINK      A6,#-24
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-20(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-14(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-16(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #101,10(A6)
      BNE       L0538
      TST.W     -6(A6)
      BNE       L0538
      TST.W     -2(A6)
      BNE       L0538
      TST.W     -8(A6)
      BEQ       L0538
L0529:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L0537
      SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BLE       L0537
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0536
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L052A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L052B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0535
L052B:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L052C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0535
L052C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L052D
      TST.W     -6(A6)
      BNE       L052D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0535
L052D:TST.W     -6(A6)
      BEQ       L0534
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L052E:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L052F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0533
L052F:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L0530
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0533
L0530:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0531
      TST.W     -6(A6)
      BNE       L0531
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0533
L0531:TST.W     -4(A6)
      BEQ       L0532
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L0532:TST.W     -6(A6)
      BNE       L052E
L0533:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0534:TST.W     -2(A6)
      BNE       L052A
L0535:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0536:TST.W     -8(A6)
      BNE       L0529
L0537:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
      BRA       L0563
L0538:CMPI.W    #$77,10(A6)
      BNE       L0548
      TST.W     -8(A6)
      BNE       L0548
      TST.W     -2(A6)
      BNE       L0548
      TST.W     -6(A6)
      BEQ       L0548
L0539:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0547
      ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BGT       L0547
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0546
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L053A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L053B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0545
L053B:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L053C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0545
L053C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L053D
      TST.W     -8(A6)
      BNE       L053D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0545
L053D:TST.W     -8(A6)
      BEQ       L0544
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L053E:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L053F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0543
L053F:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGE       L0540
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0543
L0540:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0541
      TST.W     -4(A6)
      BNE       L0541
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0543
L0541:TST.W     -4(A6)
      BEQ       L0542
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L0542:TST.W     -8(A6)
      BNE       L053E
L0543:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0544:TST.W     -2(A6)
      BNE       L053A
L0545:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0546:TST.W     -6(A6)
      BNE       L0539
L0547:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
      BRA       L0563
L0548:TST.W     -2(A6)
      BEQ       L0563
L0549:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0563
      SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BLT       L0563
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$77,10(A6)
      BNE       L0556
      TST.W     -8(A6)
      BEQ       L0556
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L054A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L054B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0555
L054B:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L054C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0555
L054C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L054D
      TST.W     -4(A6)
      BNE       L054D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0555
L054D:TST.W     -4(A6)
      BEQ       L0554
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L054E:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L054F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0554
L054F:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0550
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0554
L0550:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0551
      TST.W     -6(A6)
      BNE       L0551
      TST.W     -8(A6)
      BNE       L0551
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0554
      BRA       L0553
L0551:MOVE.W    -12(A6),D0
      CMP.W     -16(A6),D0
      BEQ       L0552
      TST.W     -4(A6)
      BNE       L0552
      TST.W     -6(A6)
      BNE       L0552
      TST.W     -8(A6)
      BEQ       L0553
L0552:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L0553:TST.W     -4(A6)
      BNE       L054E
L0554:TST.W     -8(A6)
      BNE       L054A
L0555:BRA       L0562
L0556:CMPI.W    #101,10(A6)
      BNE       L0562
      TST.W     -6(A6)
      BEQ       L0562
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0557:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0558
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0562
L0558:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L0559
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0562
L0559:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L055A
      TST.W     -4(A6)
      BNE       L055A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0562
L055A:TST.W     -4(A6)
      BEQ       L0561
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L055B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L055C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0561
L055C:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L055D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0561
L055D:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L055E
      TST.W     -4(A6)
      BNE       L055E
      TST.W     -8(A6)
      BNE       L055E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0561
      BRA       L0560
L055E:MOVE.W    -12(A6),D0
      CMP.W     -16(A6),D0
      BEQ       L055F
      TST.W     -4(A6)
      BNE       L055F
      TST.W     -6(A6)
      BNE       L055F
      TST.W     -8(A6)
      BEQ       L0560
L055F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L0560:TST.W     -4(A6)
      BNE       L055B
L0561:TST.W     -6(A6)
      BNE       L0557
L0562:TST.W     -2(A6)
      BNE       L0549
L0563:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$77,10(A6)
      BNE       L0573
      TST.W     -2(A6)
      BEQ       L0573
L0564:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0572
      SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BLE       L0572
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0571
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0565:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0566
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0570
L0566:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L0567
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0570
L0567:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0568
      TST.W     -2(A6)
      BNE       L0568
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0570
L0568:TST.W     -2(A6)
      BEQ       L056F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L0569:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L056A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L056E
L056A:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L056B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L056E
L056B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L056C
      TST.W     -8(A6)
      BNE       L056C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L056E
L056C:TST.W     -8(A6)
      BEQ       L056D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L056D:TST.W     -2(A6)
      BNE       L0569
L056E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L056F:TST.W     -6(A6)
      BNE       L0565
L0570:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0571:TST.W     -2(A6)
      BNE       L0564
L0572:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
      BRA       L0585
L0573:CMPI.W    #101,10(A6)
      BNE       L0584
      TST.W     -2(A6)
      BEQ       L0584
L0574:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0583
      SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L0575
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0583
L0575:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L0582
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0576:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0577
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0581
L0577:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L0578
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0581
L0578:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0579
      TST.W     -2(A6)
      BNE       L0579
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0581
L0579:TST.W     -2(A6)
      BEQ       L0580
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L057A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L057B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L057F
L057B:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L057C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L057F
L057C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L057D
      TST.W     -6(A6)
      BNE       L057D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L057F
L057D:TST.W     -6(A6)
      BEQ       L057E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0585
L057E:TST.W     -2(A6)
      BNE       L057A
L057F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0580:TST.W     -8(A6)
      BNE       L0576
L0581:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0582:TST.W     -2(A6)
      BNE       L0574
L0583:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
      BRA       L0585
L0584:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0585
L0585:UNLK      A6
      RTS

drone_sub_n:LINK      A6,#-24
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-20(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-14(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-16(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #101,10(A6)
      BNE       L0590
      TST.W     -6(A6)
      BNE       L0590
      TST.W     -4(A6)
      BNE       L0590
      TST.W     -8(A6)
      BEQ       L0590
L0587:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L058F
      SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BLE       L058F
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L058E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0588:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0589
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L058D
L0589:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L058A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L058D
L058A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L058B
      TST.W     -6(A6)
      BNE       L058B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L058D
L058B:TST.W     -6(A6)
      BEQ       L058C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    -12(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L058C:TST.W     -4(A6)
      BNE       L0588
L058D:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L058E:TST.W     -8(A6)
      BNE       L0587
L058F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
      BRA       L05B6
L0590:CMPI.W    #$77,10(A6)
      BNE       L059A
      TST.W     -8(A6)
      BNE       L059A
      TST.W     -4(A6)
      BNE       L059A
      TST.W     -6(A6)
      BEQ       L059A
L0591:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0599
      ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BGT       L0599
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L0598
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0592:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0593
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0597
L0593:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0594
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0597
L0594:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0595
      TST.W     -8(A6)
      BNE       L0595
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0597
L0595:TST.W     -8(A6)
      BEQ       L0596
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    -12(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,58(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L0596:TST.W     -4(A6)
      BNE       L0592
L0597:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L0598:TST.W     -6(A6)
      BNE       L0591
L0599:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
      BRA       L05B6
L059A:TST.W     -4(A6)
      BEQ       L05B6
L059B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L05B6
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BGT       L05B6
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L059C
      TST.W     -6(A6)
      BNE       L059C
      TST.W     -8(A6)
      BEQ       L05B6
L059C:CMPI.W    #$77,10(A6)
      BNE       L05A9
      TST.W     -8(A6)
      BEQ       L05A9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L059D:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L059E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05A8
L059E:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L059F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05A8
L059F:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05A0
      TST.W     -8(A6)
      BNE       L05A0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05A8
L05A0:TST.W     -2(A6)
      BEQ       L05A7
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05A1:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05A2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05A7
L05A2:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L05A3
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05A7
L05A3:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05A4
      TST.W     -6(A6)
      BNE       L05A4
      TST.W     -8(A6)
      BNE       L05A4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05A7
      BRA       L05A6
L05A4:MOVE.W    -12(A6),D0
      CMP.W     -16(A6),D0
      BEQ       L05A5
      TST.W     -2(A6)
      BNE       L05A5
      TST.W     -6(A6)
      BNE       L05A5
      TST.W     -8(A6)
      BEQ       L05A6
L05A5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L05A6:TST.W     -2(A6)
      BNE       L05A1
L05A7:TST.W     -8(A6)
      BNE       L059D
L05A8:BRA       L05B5
L05A9:CMPI.W    #101,10(A6)
      BNE       L05B5
      TST.W     -6(A6)
      BEQ       L05B5
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05AA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05AB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05B5
L05AB:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L05AC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05B5
L05AC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05AD
      TST.W     -6(A6)
      BNE       L05AD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05B5
L05AD:TST.W     -2(A6)
      BEQ       L05B4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05AE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05AF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05B4
L05AF:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L05B0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05B4
L05B0:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05B1
      TST.W     -6(A6)
      BNE       L05B1
      TST.W     -8(A6)
      BNE       L05B1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05B4
      BRA       L05B3
L05B1:MOVE.W    -12(A6),D0
      CMP.W     -16(A6),D0
      BEQ       L05B2
      TST.W     -2(A6)
      BNE       L05B2
      TST.W     -6(A6)
      BNE       L05B2
      TST.W     -8(A6)
      BEQ       L05B3
L05B2:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L05B3:TST.W     -2(A6)
      BNE       L05AE
L05B4:TST.W     -6(A6)
      BNE       L05AA
L05B5:TST.W     -4(A6)
      BNE       L059B
L05B6:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$77,10(A6)
      BNE       L05C6
      TST.W     -4(A6)
      BEQ       L05C6
L05B7:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L05C5
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BGT       L05C5
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L05C4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05B8:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L05B9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05C3
L05B9:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L05BA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05C3
L05BA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L05BB
      TST.W     -4(A6)
      BNE       L05BB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05C3
L05BB:TST.W     -4(A6)
      BEQ       L05C2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05BC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05BD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05C1
L05BD:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L05BE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05C1
L05BE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05BF
      TST.W     -6(A6)
      BNE       L05BF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05C1
L05BF:TST.W     -6(A6)
      BEQ       L05C0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L05C0:TST.W     -4(A6)
      BNE       L05BC
L05C1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L05C2:TST.W     -8(A6)
      BNE       L05B8
L05C3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L05C4:TST.W     -4(A6)
      BNE       L05B7
L05C5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
      BRA       L05D7
L05C6:CMPI.W    #101,10(A6)
      BNE       L05D6
      TST.W     -4(A6)
      BEQ       L05D6
L05C7:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L05D5
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BGT       L05D5
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L05D4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05C8:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05C9
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05D3
L05C9:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L05CA
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05D3
L05CA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05CB
      TST.W     -4(A6)
      BNE       L05CB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05D3
L05CB:TST.W     -4(A6)
      BEQ       L05D2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05CC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05CD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05D1
L05CD:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L05CE
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05D1
L05CE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05CF
      TST.W     -8(A6)
      BNE       L05CF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05D1
L05CF:TST.W     -8(A6)
      BEQ       L05D0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L05D7
L05D0:TST.W     -4(A6)
      BNE       L05CC
L05D1:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L05D2:TST.W     -6(A6)
      BNE       L05C8
L05D3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L05D4:TST.W     -4(A6)
      BNE       L05C7
L05D5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
      BRA       L05D7
L05D6:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L05D7
L05D7:UNLK      A6
      RTS

drone_sub_o:LINK      A6,#-24
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-20(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-14(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-16(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L05E8
      TST.W     -2(A6)
      BNE       L05E8
      TST.W     -6(A6)
      BNE       L05E8
      TST.W     -4(A6)
      BEQ       L05E8
L05D9:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L05E7
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BGT       L05E7
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L05E6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05DA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05DB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05E5
L05DB:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L05DC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05E5
L05DC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05DD
      TST.W     -2(A6)
      BNE       L05DD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05E5
L05DD:TST.W     -2(A6)
      BEQ       L05E4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05DE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05DF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05E3
L05DF:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L05E0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05E3
L05E0:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05E1
      TST.W     -8(A6)
      BNE       L05E1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05E3
L05E1:TST.W     -8(A6)
      BEQ       L05E2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L05E2:TST.W     -2(A6)
      BNE       L05DE
L05E3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L05E4:TST.W     -6(A6)
      BNE       L05DA
L05E5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L05E6:TST.W     -4(A6)
      BNE       L05D9
L05E7:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
      BRA       L0612
L05E8:CMPI.W    #$73,10(A6)
      BNE       L05F8
      TST.W     -4(A6)
      BNE       L05F8
      TST.W     -6(A6)
      BNE       L05F8
      TST.W     -2(A6)
      BEQ       L05F8
L05E9:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L05F7
      SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BLE       L05F7
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L05F6
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05EA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05EB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L05F5
L05EB:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L05EC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05F5
L05EC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L05ED
      TST.W     -4(A6)
      BNE       L05ED
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L05F5
L05ED:TST.W     -4(A6)
      BEQ       L05F4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05EE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05EF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05F3
L05EF:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L05F0
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05F3
L05F0:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L05F1
      TST.W     -8(A6)
      BNE       L05F1
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L05F3
L05F1:TST.W     -8(A6)
      BEQ       L05F2
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L05F2:TST.W     -4(A6)
      BNE       L05EE
L05F3:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L05F4:TST.W     -6(A6)
      BNE       L05EA
L05F5:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L05F6:TST.W     -2(A6)
      BNE       L05E9
L05F7:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
      BRA       L0612
L05F8:TST.W     -6(A6)
      BEQ       L0612
L05F9:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0612
      ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BGT       L0612
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0606
      TST.W     -2(A6)
      BEQ       L0606
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L05FA:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05FB
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0605
L05FB:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L05FC
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0605
L05FC:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L05FD
      TST.W     -8(A6)
      BNE       L05FD
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0605
L05FD:TST.W     -8(A6)
      BEQ       L0604
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L05FE:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L05FF
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0604
L05FF:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L0600
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0604
L0600:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0601
      TST.W     -2(A6)
      BNE       L0601
      TST.W     -4(A6)
      BNE       L0601
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0604
      BRA       L0603
L0601:MOVE.W    -10(A6),D0
      CMP.W     -14(A6),D0
      BEQ       L0602
      TST.W     -8(A6)
      BNE       L0602
      TST.W     -2(A6)
      BNE       L0602
      TST.W     -4(A6)
      BEQ       L0603
L0602:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L0603:TST.W     -8(A6)
      BNE       L05FE
L0604:TST.W     -2(A6)
      BNE       L05FA
L0605:BRA       L0611
L0606:CMPI.W    #$73,10(A6)
      BNE       L0611
      TST.W     -4(A6)
      BEQ       L0611
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0607:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L0611
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0608
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0611
L0608:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0609
      TST.W     -8(A6)
      BNE       L0609
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0611
L0609:TST.W     -8(A6)
      BEQ       L0610
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L060A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L060B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0610
L060B:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L060C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0610
L060C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L060D
      TST.W     -8(A6)
      BNE       L060D
      TST.W     -4(A6)
      BNE       L060D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0610
      BRA       L060F
L060D:MOVE.W    -10(A6),D0
      CMP.W     -14(A6),D0
      BEQ       L060E
      TST.W     -8(A6)
      BNE       L060E
      TST.W     -2(A6)
      BNE       L060E
      TST.W     -4(A6)
      BEQ       L060F
L060E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L060F:TST.W     -8(A6)
      BNE       L060A
L0610:TST.W     -4(A6)
      BNE       L0607
L0611:TST.W     -6(A6)
      BNE       L05F9
L0612:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0623
      TST.W     -6(A6)
      BEQ       L0623
L0613:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0622
      ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BGT       L0622
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0614
      TST.W     -4(A6)
      BEQ       L0622
L0614:TST.W     -4(A6)
      BEQ       L0621
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0615:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0616
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0620
L0616:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0617
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0620
L0617:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0618
      TST.W     -6(A6)
      BNE       L0618
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0620
L0618:TST.W     -6(A6)
      BEQ       L061F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L0619:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L061A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L061E
L061A:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L061B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L061E
L061B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L061C
      TST.W     -2(A6)
      BNE       L061C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L061E
L061C:TST.W     -2(A6)
      BEQ       L061D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L061D:TST.W     -6(A6)
      BNE       L0619
L061E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L061F:TST.W     -4(A6)
      BNE       L0615
L0620:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L0621:TST.W     -6(A6)
      BNE       L0613
L0622:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
      BRA       L0635
L0623:CMPI.W    #$73,10(A6)
      BNE       L0634
      TST.W     -6(A6)
      BEQ       L0634
L0624:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BEQ       L0633
      ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BGT       L0633
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L0625
      TST.W     -2(A6)
      BEQ       L0633
L0625:TST.W     -2(A6)
      BEQ       L0632
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0626:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0627
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0631
L0627:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L0628
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0631
L0628:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0629
      TST.W     -6(A6)
      BNE       L0629
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0631
L0629:TST.W     -6(A6)
      BEQ       L0630
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L062A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L062B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L062F
L062B:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L062C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-12(A6)
      BRA       L062F
L062C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L062D
      TST.W     -4(A6)
      BNE       L062D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L062F
L062D:TST.W     -4(A6)
      BEQ       L062E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0635
L062E:TST.W     -6(A6)
      BNE       L062A
L062F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L0630:TST.W     -2(A6)
      BNE       L0626
L0631:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L0632:TST.W     -6(A6)
      BNE       L0624
L0633:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
      BRA       L0635
L0634:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0635
L0635:UNLK      A6
      RTS

drone_sub_p:LINK      A6,#-24
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    116(A0),-20(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-14(A6)
      MOVE.W    -20(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-16(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0647
      TST.W     -2(A6)
      BNE       L0647
      TST.W     -8(A6)
      BNE       L0647
      TST.W     -4(A6)
      BEQ       L0647
L0637:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BEQ       L0646
      ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BGT       L0646
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0638
      TST.W     -8(A6)
      BEQ       L0646
L0638:TST.W     -8(A6)
      BEQ       L0645
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0639:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L063A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0644
L063A:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L063B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0644
L063B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L063C
      TST.W     -2(A6)
      BNE       L063C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0644
L063C:TST.W     -2(A6)
      BEQ       L0643
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L063D:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L063E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0642
L063E:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L063F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0642
L063F:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0640
      TST.W     -6(A6)
      BNE       L0640
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0642
L0640:TST.W     -6(A6)
      BEQ       L0641
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L0641:TST.W     -2(A6)
      BNE       L063D
L0642:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0643:TST.W     -8(A6)
      BNE       L0639
L0644:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0645:TST.W     -4(A6)
      BNE       L0637
L0646:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
      BRA       L0673
L0647:CMPI.W    #$73,10(A6)
      BNE       L0658
      TST.W     -4(A6)
      BNE       L0658
      TST.W     -8(A6)
      BNE       L0658
      TST.W     -2(A6)
      BEQ       L0658
L0648:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BEQ       L0657
      SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BLE       L0657
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0649
      TST.W     -8(A6)
      BEQ       L0657
L0649:TST.W     -8(A6)
      BEQ       L0656
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L064A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L064B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0655
L064B:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L064C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0655
L064C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L064D
      TST.W     -4(A6)
      BNE       L064D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-12(A6)
      BRA       L0655
L064D:TST.W     -4(A6)
      BEQ       L0654
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L064E:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L064F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0653
L064F:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0650
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0653
L0650:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0651
      TST.W     -6(A6)
      BNE       L0651
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    52(A0),-10(A6)
      BRA       L0653
L0651:TST.W     -6(A6)
      BEQ       L0652
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),60(A0)
      MOVE.W    -12(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,62(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L0652:TST.W     -4(A6)
      BNE       L064E
L0653:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0654:TST.W     -8(A6)
      BNE       L064A
L0655:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0656:TST.W     -2(A6)
      BNE       L0648
L0657:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
      BRA       L0673
L0658:TST.W     -8(A6)
      BEQ       L0673
L0659:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L0673
      SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BLE       L0673
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0666
      TST.W     -2(A6)
      BEQ       L0666
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L065A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L065B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0665
L065B:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L065C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0665
L065C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L065D
      TST.W     -6(A6)
      BNE       L065D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0665
L065D:TST.W     -6(A6)
      BEQ       L0664
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L065E:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L065F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0664
L065F:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L0660
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0664
L0660:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0661
      TST.W     -6(A6)
      BNE       L0661
      TST.W     -2(A6)
      BNE       L0661
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0664
      BRA       L0663
L0661:MOVE.W    -10(A6),D0
      CMP.W     -14(A6),D0
      BEQ       L0662
      TST.W     -6(A6)
      BNE       L0662
      TST.W     -8(A6)
      BNE       L0662
      TST.W     -2(A6)
      BEQ       L0663
L0662:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L0663:TST.W     -6(A6)
      BNE       L065E
L0664:TST.W     -2(A6)
      BNE       L065A
L0665:BRA       L0672
L0666:CMPI.W    #$73,10(A6)
      BNE       L0672
      TST.W     -4(A6)
      BEQ       L0672
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0667:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0668
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0672
L0668:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0669
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0672
L0669:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L066A
      TST.W     -6(A6)
      BNE       L066A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0672
L066A:TST.W     -6(A6)
      BEQ       L0671
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L066B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -6(A6)
      BNE       L066C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0671
L066C:ADDQ.W    #2,-12(A6)
      CMPI.W    #63,-12(A6)
      BLE       L066D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0671
L066D:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L066E
      TST.W     -6(A6)
      BNE       L066E
      TST.W     -4(A6)
      BNE       L066E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0671
      BRA       L0670
L066E:MOVE.W    -10(A6),D0
      CMP.W     -14(A6),D0
      BEQ       L066F
      TST.W     -6(A6)
      BNE       L066F
      TST.W     -4(A6)
      BNE       L066F
      TST.W     -8(A6)
      BEQ       L0670
L066F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     60(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #64,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L0670:TST.W     -6(A6)
      BNE       L066B
L0671:TST.W     -4(A6)
      BNE       L0667
L0672:TST.W     -8(A6)
      BNE       L0659
L0673:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    0(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    2(A0,D1.L),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-12(A6)
      CLR.W     (A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      CMPI.W    #$6E,10(A6)
      BNE       L0684
      TST.W     -8(A6)
      BEQ       L0684
L0674:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L0683
      SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BLE       L0683
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0675
      TST.W     -4(A6)
      BEQ       L0683
L0675:TST.W     -4(A6)
      BEQ       L0682
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0676:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0677
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0681
L0677:ADDQ.W    #2,-10(A6)
      CMPI.W    #63,-10(A6)
      BLE       L0678
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    50(A0),-10(A6)
      BRA       L0681
L0678:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -4(A6)
      BNE       L0679
      TST.W     -8(A6)
      BNE       L0679
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0681
L0679:TST.W     -8(A6)
      BEQ       L0680
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L067A:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L067B
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L067F
L067B:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L067C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L067F
L067C:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L067D
      TST.W     -2(A6)
      BNE       L067D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L067F
L067D:TST.W     -2(A6)
      BEQ       L067E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      SUBQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L067E:TST.W     -8(A6)
      BNE       L067A
L067F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0680:TST.W     -4(A6)
      BNE       L0676
L0681:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0682:TST.W     -8(A6)
      BNE       L0674
L0683:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
      BRA       L0696
L0684:CMPI.W    #$73,10(A6)
      BNE       L0695
      TST.W     -8(A6)
      BEQ       L0695
L0685:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BEQ       L0694
      SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BLE       L0694
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L0686
      TST.W     -2(A6)
      BEQ       L0694
L0686:TST.W     -2(A6)
      BEQ       L0693
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),48(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),50(A0)
L0687:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L0688
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0692
L0688:SUBQ.W    #2,-10(A6)
      TST.W     -10(A6)
      BGT       L0689
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0692
L0689:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -2(A6)
      BNE       L068A
      TST.W     -8(A6)
      BNE       L068A
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    48(A0),-10(A6)
      BRA       L0692
L068A:TST.W     -8(A6)
      BEQ       L0691
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),52(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),54(A0)
L068B:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L068C
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0690
L068C:SUBQ.W    #2,-12(A6)
      TST.W     -12(A6)
      BGT       L068D
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0690
L068D:MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    #1,-(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       drone_sub_b
      ADDA.L    #$16,A7
      TST.W     -8(A6)
      BNE       L068E
      TST.W     -4(A6)
      BNE       L068E
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    54(A0),-12(A6)
      BRA       L0690
L068E:TST.W     -4(A6)
      BEQ       L068F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -10(A6),56(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),58(A0)
      MOVE.W    -10(A6),D0
      ADDQ.W    #2,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,60(A1)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),62(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     64(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$100,38(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$C0,40(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #$80,42(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,44(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVEQ     #1,D0
      BRA       L0696
L068F:TST.W     -8(A6)
      BNE       L068B
L0690:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0691:TST.W     -2(A6)
      BNE       L0687
L0692:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0693:TST.W     -8(A6)
      BNE       L0685
L0694:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
      BRA       L0696
L0695:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      CLR.W     D0
      BRA       L0696
L0696:UNLK      A6
      RTS

drone_sub_q:
      LINK      A6,#-4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L0697
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #18,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L0698
L0697:MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #2,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L0698:UNLK      A6
      RTS

drone_sub_r:LINK      A6,#-4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #3,30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L069A
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #25,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L069B
L069A:MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #9,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L069B:UNLK      A6
      RTS

drone_sub_s:LINK      A6,#-4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #3,30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L069D
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #21,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L069E
L069D:MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #5,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L069E:UNLK      A6
      RTS

drone_sub_t:LINK      A6,#-4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L06A0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #$11,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L06A1
L06A0:MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #1,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L06A1:UNLK      A6
      RTS

drone_sub_u:LINK      A6,#-4
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #15,28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BEQ       L06A3
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #24,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
      BRA       L06A4
L06A3:MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVEQ     #8,D0
      MOVE.W    D0,32(A1)
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #player_joy_table,A1
      MOVE.W    D0,(A1)
L06A4:UNLK      A6
      RTS



redraw_window_background:LINK      A6,#-14
      MOVE.W    #1,(A7)         ; BEG_UPDATE
      JSR       wind_update
      MOVE.W    #WF_FIRSTXYWH,-2(A6)
L06A6:MOVE.L    A6,(A7)         ;H
      ADDI.L    #-10,(A7)
      MOVE.L    A6,-(A7)        ;W
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)        ;Y
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)        ;X
      SUBQ.L    #4,(A7)
      MOVE.W    -2(A6),-(A7)    ;mode
      MOVE.W    8(A6),-(A7)     ;handle
      JSR       wind_get
      ADDA.L    #16,A7
      TST.W     -8(A6)          ;W
      BNE       L06A7
      TST.W     -10(A6)         ;H
      BEQ       L06A8
L06A7:MOVE.W    -4(A6),D0       ;X
      MOVE.W    D0,pxy+8
      MOVE.W    D0,pxy
      MOVE.W    -6(A6),D0       ;Y
      MOVE.W    D0,pxy+10
      MOVE.W    D0,pxy+2
      MOVE.W    -4(A6),D0       ;X
      ADD.W     -8(A6),D0       ;W
      SUBQ.W    #1,D0
      MOVE.W    D0,pxy+12
      MOVE.W    D0,pxy+4
      MOVE.W    -6(A6),D0       ;Y
      ADD.W     -10(A6),D0      ;H
      SUBQ.W    #1,D0
      MOVE.W    D0,pxy+14
      MOVE.W    D0,pxy+6
      MOVE.L    #dest_MFDB,(A7)     ;dest
      MOVE.L    #src_MFDB,-(A7)    ;src
      MOVE.L    #pxy,-(A7)    ;pxy
      MOVE.W    #S_ONLY,-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       vro_cpyfm
      ADDA.L    #12,A7
      MOVE.W    #WF_NEXTXYWH,-2(A6)
      BRA       L06A6
L06A8:CLR.W     (A7)         ; END_UPDATE
      JSR       wind_update
      UNLK      A6
      RTS

init_aes_window:LINK      A6,#-8
      SUBQ.W    #1,rsrc_tree+sizeof(OBJECT)*6+ob_x
      CLR.W     -4(A6)
      MOVE.L    #rsrc_tree,rsrc_tree_ptr
      CLR.W     -2(A6)
      BRA       L06AE
L06AA:MOVE.W    -2(A6),(A7)
      MOVE.L    #rsrc_tree,-(A7)
      JSR       rsrc_obfix
      ADDQ.L    #4,A7
      MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     #rsrc_tree,D0
      MOVEA.L   D0,A0
      CMPI.W    #G_TITLE,ob_type(A0)
      BEQ       L06AB
      MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     #rsrc_tree,D0
      MOVEA.L   D0,A0
      CMPI.W    #G_STRING,ob_type(A0)
      BEQ       L06AB
      MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     #rsrc_tree,D0
      MOVEA.L   D0,A0
      CMPI.W    #G_BUTTON,ob_type(A0)
      BNE       L06AC
L06AB:MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     #rsrc_tree,D0
      MOVEA.L   D0,A0
      MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #rsc_strings,A1
      MOVE.L    (A1),ob_spec(A0)
      ADDQ.W    #1,-4(A6)
      BRA       L06AD
L06AC:MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     #rsrc_tree,D0
      MOVEA.L   D0,A0
      CMPI.W    #G_FBOXTEXT,ob_type(A0)
      BNE       L06AD
      ADDQ.W    #3,-4(A6)
L06AD:ADDQ.W    #1,-2(A6)
L06AE:CMPI.W    #219,-2(A6)
      BLT       L06AA

      CLR.W     -2(A6)
      BRA       L06B0
L06AF:MOVE.L    #sizeof(OBJECT),-(A7)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_indices,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       mul_ULONG
      ADDQ.L    #8,A7
      ADD.L     #rsrc_tree,D0
      MOVE.L    D0,-(A7)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #rsrc_object_array,A0
      MOVE.L    (A7)+,(A0)
      ADDQ.W    #1,-2(A6)
L06B0:CMPI.W    #14,-2(A6)
      BLT.S     L06AF

      MOVEA.L   rsrc_object_array[8],A0
      MOVE.W    #G_IBOX,ob_type(A0)
      MOVEA.L   rsrc_object_array[11],A0
      MOVE.L    #rsrc_str_player_xx,24+ob_spec(A0)
      MOVEA.L   rsrc_str_player_xx,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_strings,A0
      MOVE.L    (A0),rsrc_str_player_xx
      MOVEA.L   rsrc_str_name,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_strings,A0
      MOVE.L    (A0),rsrc_str_name
      MOVEA.L   rsrc_str_name_mask,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_strings,A0
      MOVE.L    (A0),rsrc_str_name_mask

      MOVE.W    #1,(A7)
      MOVE.L    rsrc_object_array[0],-(A7)
      JSR       menu_bar
      ADDQ.L    #4,A7

      MOVE.L    screen_ptr,src_MFDB.fd_addr

      MOVE.W    #2,(A7)                 ; Physbase()
      JSR       _xbios
      MOVE.L    D0,dest_MFDB.fd_addr

      TST.W     screen_rez
      BEQ       L06B1
      MOVE.W    #640,D0
      BRA       L06B2
L06B1:MOVE.W    #320,D0
L06B2:MOVE.W    D0,dest_MFDB.fd_width
      MOVE.W    D0,src_MFDB.fd_width

      TST.W     screen_rez
      BEQ       L06B3
      MOVE.W    #400,D0
      BRA       L06B4
L06B3:MOVE.W    #200,D0
L06B4:MOVE.W    D0,dest_MFDB.fd_height
      MOVE.W    D0,src_MFDB.fd_height

      TST.W     screen_rez
      BEQ       L06B5
      MOVEQ     #40,D0
      BRA       L06B6
L06B5:MOVEQ     #20,D0
L06B6:MOVE.W    D0,dest_MFDB.fd_wdwidth
      MOVE.W    D0,src_MFDB.fd_wdwidth
      CLR.W     D0
      MOVE.W    D0,dest_MFDB.fd_stand
      MOVE.W    D0,src_MFDB.fd_stand

      TST.W     screen_rez
      BEQ       L06B7
      MOVEQ     #1,D0
      BRA       L06B8
L06B7:MOVEQ     #4,D0
L06B8:MOVE.W    D0,dest_MFDB.fd_planes
      MOVE.W    D0,src_MFDB.fd_planes

      CLR.W     pxy
      CLR.W     pxy+2
      TST.W     screen_rez
      BEQ       L06B9
      MOVE.W    #639,D0
      BRA       L06BA
L06B9:MOVE.W    #319,D0
L06BA:MOVE.W    D0,pxy+4

      TST.W     screen_rez
      BEQ       L06BB
      MOVE.W    #399,D0
      BRA       L06BC
L06BB:MOVE.W    #199,D0
L06BC:MOVE.W    D0,pxy+6
      CLR.W     pxy+8
      CLR.W     pxy+10

      TST.W     screen_rez
      BEQ       L06BD
      MOVE.W    #639,D0
      BRA       L06BE
L06BD:MOVE.W    #319,D0
L06BE:MOVE.W    D0,pxy+12

      TST.W     screen_rez
      BEQ       L06BF
      MOVE.W    #399,D0
      BRA       L06C0
L06BF:MOVE.W    #199,D0
L06C0:MOVE.W    D0,pxy+14

      TST.W     screen_rez
      BEQ       L06C1
      MOVE.W    #391,(A7)
      BRA       L06C2
L06C1:MOVE.W    #191,(A7)
L06C2:TST.W     screen_rez
      BEQ       L06C3
      MOVE.W    #642,-(A7)
      BRA       L06C4
L06C3:MOVE.W    #322,-(A7)
L06C4:TST.W     screen_rez
      BEQ       L06C5
      MOVE.W    #18,-(A7)
      BRA       L06C6
L06C5:MOVE.W    #10,-(A7)
L06C6:MOVE.W    #-1,-(A7)
      CLR.W     -(A7)
      JSR       wind_create
      ADDQ.L    #8,A7
      MOVE.W    D0,wind_handle

      TST.W     wind_handle
      BGE       L06C7
      MOVE.L    #rsrc_str_cant_open_window,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-1,D0
      BRA       init_aes_window_return

L06C7:TST.W     screen_rez
      BEQ       L06C8
      MOVE.W    #391,(A7)
      BRA       L06C9
L06C8:MOVE.W    #191,(A7)
L06C9:TST.W     screen_rez
      BEQ       L06CA
      MOVE.W    #642,-(A7)
      BRA       L06CB
L06CA:MOVE.W    #322,-(A7)
L06CB:TST.W     screen_rez
      BEQ       L06CC
      MOVE.W    #18,-(A7)
      BRA       L06CD
L06CC:MOVE.W    #10,-(A7)
L06CD:MOVE.W    #-1,-(A7)
      MOVE.W    wind_handle,-(A7)
      JSR       wind_open
      ADDQ.L    #8,A7
      CLR.W     D0
      BRA       init_aes_window_return
init_aes_window_return:UNLK      A6
      RTS

exit_aes_window:LINK      A6,#-4
      MOVE.W    wind_handle,(A7)
      JSR       wind_close
      MOVE.W    wind_handle,(A7)
      JSR       wind_delete
      CLR.W     (A7)
      MOVE.L    rsrc_object_array[0],-(A7)
      JSR       menu_bar
      ADDQ.L    #4,A7
      UNLK      A6
      RTS

master_solo_loop:LINK      A6,#-230
      MOVE.W    #1,-34(A6)          ; Joystick active
      BRA       L06D2
L06D1:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L06D2:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L06D1
      TST.W     8(A6)
      BEQ       L06D3
      MOVE.L    #rsrc_str_this_is_a_solo_machine,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       L06D4
L06D3:MOVE.L    #rsrc_str_this_is_the_master_machine,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
L06D4:CLR.L     (A7)
      CLR.W     -(A7)                 ;ARROW
      JSR       graf_mouse
      ADDQ.L    #2,A7
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      CLR.W     own_number
      CLR.W     user_is_midicam

      MOVE.W    #10,reload_time
      MOVE.W    #100,regen_time
      MOVE.W    #50,revive_time
      MOVE.W    #2,revive_lives
      CLR.W     team_flag

      CLR.W     D0
      MOVE.W    D0,active_drones+4
      MOVE.W    D0,active_drones+2
      MOVE.W    D0,active_drones

      MOVE.W    #$19,(A7)               ; Dgetdrv()
      JSR       _gemdos
      MOVE.W    D0,-2(A6)
      MOVE.W    -2(A6),D0
      ADD.W     #'A',D0
      EXT.W     D0
      MOVE.B    D0,-106(A6)
      MOVE.B    #':',-105(A6)
      MOVE.W    -2(A6),(A7)
      ADDQ.W    #1,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-104,(A7)
      MOVE.W    #$47,-(A7)              ; Dgetpath()
      JSR       _gemdos
      ADDQ.L    #6,A7
      CLR.W     -2(A6)
      BRA       L06D6
L06D5:ADDQ.W    #1,-2(A6)
L06D6:MOVE.W    -2(A6),D0
      EXT.L     D0
      TST.B     -106(A6,D0.L)
      BNE.S     L06D5
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'\',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'*',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'.',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'M',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'A',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      MOVE.B    #'Z',-106(A0)
      ADDQ.W    #1,-2(A6)
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      CLR.B     -106(A0)
      ADDQ.W    #1,-2(A6)

      CLR.B     -126(A6)
      TST.W     maze_loaded_flag
      BNE       L06D8
      MOVE.L    #rsrc_str_midimaze_maz_2,(A7)
      MOVE.L    #rsrc_str_midimaze_maz_1,-(A7)
      JSR       LoadMaze
      ADDQ.L    #4,A7
      TST.W     D0
      BGE       L06D7
      CLR.W     maze_loaded_flag
      BRA       L06D8
L06D7:MOVE.W    #1,maze_loaded_flag
L06D8:MOVE.W    #1,-6(A6)           ; stay in event loop
      BRA       do_eventloop_while

do_eventloop:BRA       do_eventloop2

do_eventloop1:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
do_eventloop2:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     do_eventloop1

      MOVE.L    #temp_WORD,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-36,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-38,(A7)
      MOVE.L    #temp_WORD,-(A7)
      MOVE.L    #temp_WORD,-(A7)
      MOVE.L    #temp_WORD,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-28,(A7)           ; msg
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.W    #MU_KEYBD|MU_MESAG,-(A7)
      JSR       evnt_multi          ; evnt_multi( events, bclicks, bmask, bstate, m1flag, m1x, m1y, m1w, m1h, m2flag, m2x, m2y, m2w, m2h, msg, locount, hicount, mx, my, ks, kc, mc )
      ADDA.L    #56,A7
      MOVE.W    D0,-40(A6)

      BTST      #0,-39(A6)          ; MU_KEYBD
      BEQ       L06E0
      MOVE.W    -36(A6),D0          ; kc
      AND.W     #$FF,D0
      CMP.W     #13,D0             ; RETURN
      BEQ       menu_reset_play
      MOVE.W    -36(A6),D0          ; kc
      ASR.W     #8,D0
      MOVE.W    -38(A6),D1          ; ks
      ASL.W     #8,D1
      OR.W      D1,D0
      MOVE.W    D0,-36(A6)
      CMPI.W    #$832,-36(A6)      ; K_ALT + M
      BNE       L06DC
      CLR.W     -34(A6)            ; Mouse active
      MOVE.L    #rsrc_str_mouse_control_selected,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       L06DF
L06DC:CMPI.W    #$824,-36(A6)      ; K_ALT + J
      BNE       L06DD
      MOVE.W    #1,-34(A6)         ; Joystick active
      MOVE.L    #rsrc_str_joystick_control_selected,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       L06DF
L06DD:CMPI.W    #$813,-36(A6)      ; K_ALT + R
      BNE       L06DE
      MOVE.W    #3,-42(A6)         ; Master
      CLR.W     -6(A6)             ; exit event loop
      BRA       L06DF
L06DE:CMPI.W    #$81F,-36(A6)      ; K_ALT + S
      BNE       L06DF
      MOVE.W    #1,-42(A6)         ; auf Slave schalten
      CLR.W     -6(A6)             ; exit event loop
L06DF:BRA       do_eventloop_while

L06E0:MOVE.W    -28(A6),D0          ; msg
      BRA       L0724
L06E1:MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      MOVE.W    -22(A6),-8(A6)
      MOVE.W    -20(A6),-10(A6)
      MOVE.W    -8(A6),D0
      BRA       L0720
L06E2:MOVE.W    -10(A6),D0
      BRA       L06E8

menu_about:
      TST.W     8(A6)
      BNE       L06E6
      BRA       L06E5
L06E4:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L06E5:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L06E4

      MOVE.W    #$85,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi

L06E6:MOVE.W    #1,(A7)
      JSR       save_part_of_screen_for_dialog

      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background

      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.L    #rsrc_str_what_about_it,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7

      MOVEA.L   rsrc_object_array[12],A0
      ANDI.W    #~(SELECTED|DISABLED),5*24+ob_state(A0)
      MOVEA.L   rsrc_object_array[12],A0
      ORI.W     #DEFAULT,5*24+ob_flags(A0)
      MOVE.W    #12,(A7)
      JSR       do_about_dialog
      BRA       menu_done_menu_tnormal

L06E7:BRA       menu_done_menu_tnormal
      BRA       menu_done_menu_tnormal

L06E8:CMP.W     #7,D0
      BEQ       menu_about
      BRA.S     L06E7

menu_done_menu_tnormal:MOVE.W    #1,(A7)
      MOVE.W    #3,-(A7)
      MOVE.L    rsrc_object_array[0],-(A7)
      JSR       menu_tnormal
      ADDQ.L    #6,A7
      BRA       L0721

L06EA:MOVE.W    -10(A6),D0
      BRA       menu_switch

menu_load_maze:MOVE.L    A6,(A7)
      ADDI.L    #-12,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-126,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-106,(A7)
      JSR       fsel_input
      ADDQ.L    #8,A7
      TST.W     -12(A6)
      BEQ       L06F2
      CLR.L     (A7)
      MOVE.W    #BUSY_BEE,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      CLR.W     -2(A6)
      CLR.W     -4(A6)
      BRA       L06EC
L06EC:MOVE.W    -4(A6),D0
      EXT.L     D0
      MOVE.B    -106(A6,D0.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A6,A1
      MOVE.B    D0,-226(A1)
      ADDQ.W    #1,-4(A6)
      ADDQ.W    #1,-2(A6)
      TST.W     D0
      BNE.S     L06EC
      BRA       L06ED
L06ED:SUBQ.W    #1,-2(A6)
      BLE       L06EE
      MOVEA.W   -2(A6),A0
      ADDA.L    A6,A0
      CMPI.B    #'\',-226(A0)
      BNE.S     L06ED
L06EE:ADDQ.W    #1,-2(A6)
      CLR.W     -4(A6)
      BRA       L06EF
L06EF:MOVE.W    -4(A6),D0
      EXT.L     D0
      MOVE.B    -126(A6,D0.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A6,A1
      MOVE.B    D0,-226(A1)
      ADDQ.W    #1,-4(A6)
      ADDQ.W    #1,-2(A6)
      TST.W     D0
      BNE.S     L06EF
      MOVE.L    A6,(A7)
      ADDI.L    #-126,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-226,(A7)
      JSR       LoadMaze
      ADDQ.L    #4,A7
      TST.W     D0
      BGE       L06F0
      CLR.W     maze_loaded_flag
      BRA       L06F1
L06F0:MOVE.W    #1,maze_loaded_flag
L06F1:CLR.L     (A7)
      CLR.W     -(A7)                   ;ARROW
      JSR       graf_mouse
      ADDQ.L    #2,A7
L06F2:BRA       menu_switch_done

menu_reset_score:TST.W     8(A6)
      BNE       L06F6
      BRA       L06F5
L06F4:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L06F5:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L06F4
      MOVE.W    #$81,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
L06F6:CLR.W     -2(A6)
      BRA       L06F8
L06F7:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      CLR.W     (A0)
      ADDQ.W    #1,-2(A6)
L06F8:CMPI.W    #16,-2(A6)
      BLT.S     L06F7
      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      TST.W     team_flag
      BEQ       L06F9
      MOVE.W    #4,(A7)
      BRA       L06FA
L06F9:MOVE.W    all_players,(A7)
L06FA:JSR       update_notes_score
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      BRA       menu_switch_done

menu_player:TST.W     8(A6)
      BNE       L0701
      BRA       L06FD
L06FC:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L06FD:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L06FC
      MOVE.W    #$86,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-32(A6)
      BGE       L06FF
L06FE:MOVE.L    #rsrc_str_midi_ring_booboo_1,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L06FF:MOVE.W    #1,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-32(A6)
      BLT.S     L06FE
      MOVE.W    -32(A6),D0
      MOVE.W    D0,machines_online
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      TST.W     D0
      BLT.S     L06FE
      CMPI.W    #16,machines_online
      BLE       L0700
      MOVE.L    #rsrc_str_too_many_machines_online_1,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L0700:BRA       L0702
L0701:MOVE.W    #1,machines_online
L0702:MOVE.W    8(A6),(A7)
      JSR       slave_show_playername_dialog
      BRA       menu_switch_done

menu_reset_play:MOVE.W    #1,(A7)         ; BEG_UPDATE
      JSR       wind_update
      TST.W     maze_loaded_flag
      BNE       L0704
      MOVE.L    #rsrc_str_please_load_a_maze_first,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L0704:TST.W     8(A6)
      BNE       L070A
      BRA       L0706
L0705:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L0706:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L0705
      MOVE.W    #$80,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-32(A6)
      BGE       L0708
L0707:MOVE.L    #rsrc_str_midi_ring_booboo_2,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L0708:MOVE.W    #1,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-32(A6)
      BLT.S     L0707
      MOVE.W    -32(A6),D0
      MOVE.W    D0,machines_online
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      TST.W     D0
      BLT.S     L0707
      CMPI.W    #16,machines_online
      BLE       L0709
      MOVE.L    #rsrc_str_too_many_machines_online_2,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L0709:BRA       L070B
L070A:MOVE.W    #1,machines_online
L070B:MOVE.L    #active_drones,(A7)
      MOVE.W    #16,-(A7)
      MOVE.W    machines_online,D0
      SUB.W     D0,(A7)
      MOVE.L    rsrc_object_array[8],-(A7)
      JSR       do_preference_form
      ADDQ.L    #6,A7
      MOVE.W    D0,-30(A6)
      CLR.W     (A7)         ; END_UPDATE
      JSR       wind_update
      MOVE.W    #1,(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    rsrc_object_array[0],-(A7)
      JSR       menu_tnormal
      ADDQ.L    #6,A7
      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      TST.W     8(A6)
      BNE       L070C
      MOVE.W    #$80,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-32(A6)
      BLT       L0707
L070C:TST.W     -30(A6)
      BGE       L070D
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      BRA       menu_switch_done
L070D:TST.W     8(A6)
      BNE       L070E
      MOVE.W    #$84,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      TST.W     D0
      BLT       L0707
L070E:TST.W     8(A6)
      BNE       L070F
      JSR       send_datas
      TST.W     D0
      BLT       L0707
L070F:MOVE.W    -34(A6),(A7)    ; Mouse/Joystick Active (0/1)
      MOVE.W    8(A6),-(A7)
      JSR       play_game
      ADDQ.L    #2,A7
      MOVE.W    D0,-32(A6)
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0710
      MOVE.W    #1,(A7)
      BRA       L0711
L0710:MOVE.W    #15,(A7)
L0711:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      BRA       L0713
L0712:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L0713:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L0712
      JSR       copy_screen

      TST.W     -34(A6)          ; Mouse/Joystick Active (0/1)
      BEQ       L0714
      JSR       exit_joystick
      BRA       L0715
L0714:JSR       exit_mouse
L0715:
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      TST.W     -32(A6)
      BGE       L0718
      CMPI.W    #-1,-32(A6)
      BNE       L0716
      MOVE.L    #rsrc_str_the_midi_ring_has_times_out,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       L0718
L0716:CMPI.W    #-2,-32(A6)
      BNE       L0717
      MOVE.L    #rsrc_str_game_terminated,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      BRA       L0718
L0717:MOVE.L    #rsrc_str_maze_too_small,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
L0718:CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      TST.W     team_flag
      BEQ       L0719
      MOVE.W    #4,(A7)
      BRA       L071A
L0719:MOVE.W    all_players,(A7)
L071A:JSR       update_notes_score
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      BRA       menu_switch_done

menu_quit:MOVE.L    #rsrc_str_do_you_really_wanna_quit,(A7)
      MOVE.W    #2,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVE.W    D0,-32(A6)
      CMPI.W    #1,-32(A6)
      BNE       menu_switch_done
      MOVE.W    #-1,-42(A6)        ; quit
      CLR.W     -6(A6)             ; exit event loop
      BRA       menu_switch_done

menu_nothing:BRA       menu_switch_done
      BRA       menu_switch_done

menu_switch:SUB.W     #16,D0
      CMP.W     #6,D0
      BHI.S     menu_nothing
      ASL.W     #2,D0
      MOVEA.W   D0,A0
      ADDA.L    #menu_commands,A0
      MOVEA.L   (A0),A0
      JMP       (A0)

menu_switch_done:MOVE.W    #1,(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    rsrc_object_array[0],-(A7)
      JSR       menu_tnormal
      ADDQ.L    #6,A7
      BRA       L0721
L071F:BRA       L0721
      BRA       L0721
L0720:CMP.W     #3,D0
      BEQ       L06E2
      CMP.W     #4,D0
      BEQ       L06EA
      BRA.S     L071F
L0721:BRA       do_eventloop_while

L0722:CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      MOVE.W    -22(A6),(A7)
      JSR       redraw_window_background
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      BRA       do_eventloop_while
L0723:BRA       do_eventloop_while
      BRA       do_eventloop_while
L0724:CMP.W     #10,D0
      BEQ       L06E1
      CMP.W     #20,D0
      BEQ.S     L0722
      CMP.W     #21,D0
      BEQ.S     L0722
      CMP.W     #31,D0
      BEQ.S     L0722
      BRA.S     L0723
do_eventloop_while:
      TST.W     -6(A6)             ; stay in event loop?
      BNE       do_eventloop
      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      MOVE.W    -42(A6),D0
      BRA       L0726
L0726:UNLK      A6
      RTS




rsc_flags_revive:LINK      A6,#-8
      CMPI.W    #50,revive_time
      BNE       L0728
      MOVE.W    #39,-2(A6)          ;revive fast
      MOVE.W    #38,-4(A6)          ;revive slow
      BRA       L0729
L0728:MOVE.W    #38,-2(A6)          ;revive slow
      MOVE.W    #39,-4(A6)          ;revive fast
L0729:MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ORI.W     #SELECTED,ob_state(A0)
      MOVE.W    -4(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ANDI.W    #~SELECTED,ob_state(A0)

      CLR.W     -2(A6)
      BRA       L072D
L072A:MOVE.W    -2(A6),D0
      ADDQ.W    #1,D0
      CMP.W     revive_lives,D0
      BNE       L072B
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #revive_lives_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ORI.W     #SELECTED,ob_state(A0)
      BRA       L072C
L072B:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #revive_lives_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ANDI.W    #~SELECTED,ob_state(A0)
L072C:ADDQ.W    #1,-2(A6)
L072D:CMPI.W    #3,-2(A6)
      BLT.S     L072A
      UNLK      A6
      RTS




do_preference_form:LINK      A6,#-20

      CMPI.W    #10,machines_online
      BGE       L072F
      MOVEQ     #' ',D0
      BRA       L0730
L072F:MOVE.W    machines_online,D0
      EXT.L     D0
      DIVS      #10,D0
      ADD.W     #'0',D0
L0730:MOVEA.L   8(A6),A1
      MOVEA.L   45*24+ob_spec(A1),A1        ; '00 Machines on-line'
      MOVE.B    D0,(A1)
      MOVE.W    machines_online,D0
      EXT.L     D0
      DIVS      #10,D0
      SWAP      D0
      ADD.W     #'0',D0
      MOVEA.L   8(A6),A1
      MOVEA.L   45*24+ob_spec(A1),A1        ; '00 Machines on-line'
      MOVE.B    D0,1(A1)
      CMPI.W    #1,machines_online
      BNE       L0731
      MOVEQ     #' ',D0
      BRA       L0732
L0731:MOVEQ     #'s',D0
L0732:MOVEA.L   8(A6),A1
      MOVEA.L   45*24+ob_spec(A1),A1        ; '00 Machines on-line'
      MOVE.B    D0,10(A1)

      CMPI.W    #10,reload_time
      BNE       L0733
      MOVE.W    #31,-2(A6)          ;reload time slow
      MOVE.W    #30,-4(A6)          ;reload time fast
      BRA       L0734
L0733:MOVE.W    #30,-2(A6)          ;reload time fast
      MOVE.W    #31,-4(A6)          ;reload time slow
L0734:MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ORI.W     #SELECTED,ob_state(A0)
      MOVE.W    -4(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ANDI.W    #~SELECTED,ob_state(A0)

      CMPI.W    #100,regen_time
      BNE       L0735
      MOVE.W    #34,-2(A6)          ;regen fast
      MOVE.W    #33,-4(A6)          ;regen slow
      BRA       L0736
L0735:MOVE.W    #33,-2(A6)          ;regen slow
      MOVE.W    #34,-4(A6)          ;regen fast
L0736:MOVE.W    -2(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ORI.W     #SELECTED,ob_state(A0)
      MOVE.W    -4(A6),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ANDI.W    #~SELECTED,ob_state(A0)

      MOVE.L    8(A6),(A7)
      JSR       rsc_flags_revive

      MOVE.W    rsc_drones,D0
      ADD.W     rsc_drones+2,D0
      ADD.W     rsc_drones+4,D0
      CMP.W     12(A6),D0
      BLE       L0739

      CLR.W     -2(A6)
      BRA       L0738
L0737:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_drones,A0
      CLR.W     (A0)
      MOVEA.L   8(A6),A0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #drone_count_number_rscindices,A1
      MOVE.W    (A1),D1
      MULS      #sizeof(OBJECT),D1
      MOVEA.L   ob_spec(A0,D1.L),A0
      MOVE.B    #' ',(A0)
      MOVEA.L   8(A6),A0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #drone_count_number_rscindices,A1
      MOVE.W    (A1),D1
      MULS      #sizeof(OBJECT),D1
      MOVEA.L   ob_spec(A0,D1.L),A0
      MOVE.B    #'0',1(A0)
      ADDQ.W    #1,-2(A6)
L0738:CMPI.W    #3,-2(A6)
      BLT.S     L0737

L0739:MOVE.L    A6,(A7)
      ADDI.L    #-14,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-12,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-10,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    8(A6),-(A7)
      JSR       form_center
      ADDA.L    #16,A7

      TST.W     screen_rez
      BNE       L073A
      MOVEA.L   8(A6),A0
      MOVE.W    #5,ob_x(A0)
      MOVE.W    #3,-8(A6)
      SUBQ.W    #2,-10(A6)
      ADDQ.W    #4,-12(A6)
      ADDQ.W    #4,-14(A6)
L073A:
      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -14(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      CLR.W     -(A7)           ; FMD_START
      JSR       form_dial
      ADDA.L    #16,A7

      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #999,-(A7)
      CLR.W     -(A7)
      MOVE.L    8(A6),-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7

L073B:CLR.W     (A7)
      MOVE.L    8(A6),-(A7)
      JSR       form_do
      ADDQ.L    #4,A7
      AND.W     #$7FFF,D0
      MOVE.W    D0,-16(A6)          ; pref_return_button

      MOVE.W    -16(A6),D0          ; pref_return_button
      MULS      #sizeof(OBJECT),D0
      ADD.L     8(A6),D0
      MOVEA.L   D0,A0
      ANDI.W    #~SELECTED,ob_state(A0)
      CMPI.W    #49,-16(A6)          ; pref_return_button = 'Yeah'
      BEQ       L0747
      CMPI.W    #48,-16(A6)          ; pref_return_button = 'Nah'
      BEQ       L0747
      CMPI.W    #54,-16(A6)          ; pref_return_button = 'Teams'
      BNE       L073C

      MOVEA.L   8(A6),A0
      ORI.W     #SELECTED,54*24+ob_state(A0)

      MOVE.L    #rsc_drones,(A7)
      JSR       update_names_in_rsc

      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #999,-(A7)
      MOVE.W    #54,-(A7)
      MOVE.L    8(A6),-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7

      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background

      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.L    A6,(A7)
      ADDI.L    #-14,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-12,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-10,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    rsrc_object_array[9],-(A7)
      JSR       form_center
      ADDA.L    #16,A7

      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -14(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      CLR.W     -(A7)               ; FMD_START
      JSR       form_dial
      ADDA.L    #16,A7

      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #999,-(A7)
      CLR.W     -(A7)
      MOVE.L    rsrc_object_array[9],-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7

      CLR.W     (A7)
      MOVE.L    rsrc_object_array[9],-(A7)
      JSR       form_do
      ADDQ.L    #4,A7

      MOVEA.L   rsrc_object_array[9],A0
      ANDI.W    #~SELECTED,101*24+ob_state(A0)

      MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -14(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #FMD_FINISH,-(A7)
      JSR       form_dial
      ADDA.L    #16,A7

      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7

      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background

      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      BRA       L0739
L073C:CLR.W     -2(A6)
      BRA       L0740
L073D:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #drone_count_up_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     -16(A6),D0          ; pref_return_button
      BNE       L073E
      MOVE.W    #1,-4(A6)
      BRA       L0741
      BRA       L073F
L073E:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #drone_count_down_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     -16(A6),D0          ; pref_return_button
      BNE       L073F
      MOVE.W    #-1,-4(A6)
      BRA       L0741
L073F:ADDQ.W    #1,-2(A6)
L0740:CMPI.W    #3,-2(A6)
      BLT.S     L073D
L0741:MOVE.W    -4(A6),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #rsc_drones,A1
      ADD.W     D0,(A1)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_drones,A0
      TST.W     (A0)
      BLT       L0742
      MOVE.W    rsc_drones,D0
      ADD.W     rsc_drones+2,D0
      ADD.W     rsc_drones+4,D0
      CMP.W     12(A6),D0
      BLE       L0743
L0742:MOVE.W    -4(A6),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #rsc_drones,A1
      SUB.W     D0,(A1)
      MOVE.W    #7,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      BRA       L0746
L0743:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #rsc_drones,A0
      CMPI.W    #10,(A0)
      BGE       L0744
      MOVEQ     #' ',D0
      BRA       L0745
L0744:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_drones,D1
      MOVE.W    0(A0,D1.L),D0
      EXT.L     D0
      DIVS      #10,D0
      ADD.W     #'0',D0
L0745:MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #drone_count_number_rscindices,A1
      MOVE.W    (A1),D1
      MULS      #sizeof(OBJECT),D1
      ADD.L     8(A6),D1
      MOVEA.L   D1,A1
      MOVEA.L   ob_spec(A1),A1
      MOVE.B    D0,(A1)

      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_drones,D1
      MOVE.W    0(A0,D1.L),D0
      EXT.L     D0
      DIVS      #10,D0
      SWAP      D0
      ADD.W     #'0',D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #drone_count_number_rscindices,A1
      MOVE.W    (A1),D1
      MULS      #sizeof(OBJECT),D1
      ADD.L     8(A6),D1
      MOVEA.L   D1,A1
      MOVEA.L   ob_spec(A1),A1
      MOVE.B    D0,1(A1)
L0746:MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #999,-(A7)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #drone_count_box_rscindices,D1
      MOVE.W    0(A0,D1.L),-(A7)
      MOVE.L    8(A6),-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7
      BRA       L073B

L0747:MOVE.W    -14(A6),(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -14(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    #FMD_FINISH,-(A7)
      JSR       form_dial
      ADDA.L    #16,A7

      CMPI.W    #48,-16(A6)          ; pref_return_button = 'Nah'
      BNE       L0748
      MOVEQ     #-1,D0
      BRA       do_preference_form_return

L0748:MOVEA.L   8(A6),A0
      BTST      #0,29*24+ob_state+1(A0)
      BEQ       L0749
      MOVEQ     #10,D0
      BRA       L074A
L0749:MOVEQ     #30,D0
L074A:MOVE.W    D0,reload_time

      MOVEA.L   8(A6),A0
      BTST      #0,34*24+ob_state+1(A0)
      BEQ       L074B
      MOVEQ     #100,D0
      BRA       L074C
L074B:MOVE.W    #200,D0
L074C:MOVE.W    D0,regen_time

      MOVEA.L   8(A6),A0
      BTST      #0,39*24+ob_state+1(A0)
      BEQ       L074D
      MOVEQ     #50,D0
      BRA       L074E
L074D:MOVEQ     #100,D0
L074E:MOVE.W    D0,revive_time

      MOVEA.L   8(A6),A0
      BTST      #0,54*24+ob_state+1(A0)
      BEQ       L0754
      MOVE.W    #1,team_flag
      MOVEA.L   rsrc_object_array[9],A0
      MOVE.W    102*24+ob_state(A0),D0
      AND.W     #1,D0
      MOVE.W    D0,friendly_fire
      CLR.W     -2(A6)
      BRA       L0753
L074F:CLR.W     -4(A6)
      BRA       L0752
L0750:MOVE.W    -2(A6),D0
      EXT.L     D0
      ASL.L     #3,D0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      MOVEA.L   D0,A0
      MOVE.L    #team_group_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      BTST      #0,ob_state+1(A0)
      BEQ       L0751
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -4(A6),ply_team(A0)
L0751:ADDQ.W    #1,-4(A6)
L0752:CMPI.W    #4,-4(A6)
      BLT.S     L0750
      ADDQ.W    #1,-2(A6)
L0753:CMPI.W    #16,-2(A6)
      BLT.S     L074F
      BRA       L0755
L0754:CLR.W     team_flag
L0755:

      MOVEA.L   8(A6),A0
      BTST      #0,42*24+ob_state+1(A0)
      BEQ       L0756
      MOVE.W    #1,revive_lives
      BRA       L0758
L0756:MOVEA.L   8(A6),A0
      BTST      #0,43*24+ob_state+1(A0)
      BEQ       L0757
      MOVE.W    #2,revive_lives
      BRA       L0758
L0757:MOVE.W    #3,revive_lives
L0758:
      CLR.W     -2(A6)
      BRA       L075A
L0759:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    14(A6),A0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #rsc_drones,A1
      MOVE.W    (A1),(A0)
      ADDQ.W    #1,-2(A6)
L075A:CMPI.W    #3,-2(A6)
      BLT.S     L0759

      CLR.W     D0
      BRA       do_preference_form_return
do_preference_form_return:
      UNLK      A6
      RTS

update_names_in_rsc:LINK      A6,#-10

      MOVE.W    machines_online,-2(A6)
      BRA       L075E
L075D:MOVEA.L   rsrc_object_array[9],A0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #rsc_playername_rscindices,A1
      MOVE.W    (A1),D1
      MULS      #sizeof(OBJECT),D1
      MOVE.L    ob_spec(A0,D1.L),(A7)
      MOVE.L    str_dash_array,-(A7)
      JSR       string_copy_str2dest
      ADDQ.L    #4,A7
      ADDQ.W    #1,-2(A6)
L075E:CMPI.W    #16,-2(A6)
      BLT.S     L075D

      MOVE.W    machines_online,-4(A6)
      CLR.W     -2(A6)
      BRA       L0762
L075F:CLR.W     -6(A6)
      BRA       L0761
L0760:MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    ob_spec(A0),temp_player_name
      ADDQ.W    #1,-4(A6)
      MOVE.L    temp_player_name,(A7)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #str_drone_type_br_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       string_copy_str2dest
      ADDQ.L    #4,A7
      ADDQ.W    #1,-6(A6)
L0761:MOVEA.L   8(A6),A0
      MOVE.W    -2(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     -6(A6),D0
      BGT.S     L0760
      ADDQ.W    #1,-2(A6)
L0762:CMPI.W    #3,-2(A6)
      BLT.S     L075F
      UNLK      A6
      RTS

string_copy_str2dest:LINK      A6,#-4
      BRA       L0764
L0764:MOVEA.L   8(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVEA.L   12(A6),A1
      MOVE.B    D0,(A1)
      ADDQ.L    #1,8(A6)
      ADDQ.L    #1,12(A6)
      TST.W     D0
      BNE.S     L0764
      UNLK      A6
      RTS

slave_midicam_loop:LINK      A6,#-20
      MOVE.W    8(A6),user_is_midicam
      BEQ       L0766
      MOVE.W    #13,(A7)                   ; 'This is a MIDICAM'
      JSR       rsc_draw_buttonless_dialog
      BRA       L0767
L0766:MOVE.W    #1,(A7)                    ; 'This is a slave'
      JSR       rsc_draw_buttonless_dialog
L0767:MOVE.W    #1,(A7)
      JSR       _conterm_update_shift_status
      MOVE.W    #1,-6(A6)
      MOVE.W    #1,-8(A6)               ; dont_exit_loop
      BRA       L0790

L0768:BRA       L076A
L0769:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L076A:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L0769
      BRA       L076C
L076B:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
L076C:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L076B

      BRA       L0775
L076D:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BEQ       L076F
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      MOVE.W    D0,-4(A6)               ; midi_byte
      BNE       L076E
      CLR.W     (A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      BRA       L076F
L076E:BRA       L0776

L076F:MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BEQ       L0775
      MOVE.W    #DEV_CONSOLE,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      MOVEQ     #16,D1
      ASR.L     D1,D0
      AND.L     #$7FFF,D0
      MOVE.W    D0,-10(A6)
      CMPI.W    #$832,-10(A6)      ; K_ALT + M
      BNE       L0770
      CLR.W     -6(A6)
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      MOVE.W    #5,(A7)             ; 'Mouse control select'
      JSR       rsc_draw_buttonless_dialog
      BRA       L0775
L0770:CMPI.W    #$824,-10(A6)      ; K_ALT + J
      BNE       L0771
      MOVE.W    #1,-6(A6)
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      MOVE.W    #6,(A7)             ; 'Joystick control select'
      JSR       rsc_draw_buttonless_dialog
      BRA       L0775
L0771:CMPI.W    #$810,-10(A6)      ; K_ALT + Q
      BNE       L0772
      MOVE.W    #-1,-12(A6)         ; ret_value
      CLR.W     -8(A6)               ; dont_exit_loop
      BRA       L0776
      BRA       L0775
L0772:CMPI.W    #$813,-10(A6)      ; K_ALT + R
      BNE       L0773
      MOVE.W    #3,-12(A6)         ; ret_value
      CLR.W     -8(A6)               ; dont_exit_loop
      BRA       L0776
      BRA       L0775
L0773:CMPI.W    #$81F,-10(A6)      ; K_ALT + S
      BNE       L0774
      MOVE.W    #2,-12(A6)         ; ret_value
      CLR.W     -8(A6)               ; dont_exit_loop
      BRA       L0776
      BRA       L0775
L0774:CMPI.W    #$82E,-10(A6)      ; K_ALT + C
      BNE       L0775
      MOVE.W    #4,-12(A6)         ; ret_value
      CLR.W     -8(A6)             ; dont_exit_loop
      BRA       L0776
L0775:BRA       L076D

L0776:TST.W     -8(A6)               ; dont_exit_loop
      BNE       L0777
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      BRA       L0791
L0777:MOVE.W    -4(A6),(A7)               ; midi_byte
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7

      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background

      CMPI.W    #$85,-4(A6)                ; midi_byte == Show About
      BNE       L0778

      MOVE.W    #1,(A7)
      JSR       save_part_of_screen_for_dialog
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      MOVEA.L   rsrc_object_array[12],A0
      ORI.W     #DISABLED,5*24+ob_state(A0)
      MOVEA.L   rsrc_object_array[12],A0
      ANDI.W    #~SELECTED,5*24+ob_state(A0)
      MOVEA.L   rsrc_object_array[12],A0
      ANDI.W    #~DEFAULT,5*24+ob_flags(A0)
      MOVE.W    #12,(A7)                    ; About box
      JSR       rsc_draw_buttonless_dialog
      BRA       L0790

L0778:CMPI.W    #$81,-4(A6)                 ; midi_byte == clear scores
      BNE       L077D

      CLR.W     -2(A6)
      BRA       L077A
L0779:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #score_table,A0
      CLR.W     (A0)
      ADDQ.W    #1,-2(A6)
L077A:CMPI.W    #16,-2(A6)
      BLT.S     L0779
      TST.W     team_flag
      BEQ       L077B
      MOVE.W    #4,(A7)
      BRA       L077C
L077B:MOVE.W    all_players,(A7)
L077C:JSR       update_notes_score
      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      BRA       L0790

L077D:CMPI.W    #$80,-4(A6)             ; midi_byte == 0x80
      BNE       L0780
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-4(A6)
      BLT       L0790
      TST.W     user_is_midicam
      BEQ       L077E
      MOVE.W    -4(A6),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    -4(A6),D0
      SUBQ.W    #1,D0
      MOVE.W    D0,midicam_player_count
      BRA       L077F
L077E:MOVE.W    -4(A6),D0
      MOVE.W    D0,own_number
      MOVE.W    D0,(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
L077F:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-4(A6)
      BLT       L0790
      MOVE.W    -4(A6),D0
      MOVE.W    D0,machines_online
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      MOVE.W    #$80,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      BRA       L0790

L0780:CMPI.W    #$84,-4(A6)             ; midi_byte == 0x84
      BNE       L078A
      JSR       receive_datas
      TST.W     D0
      BLT       L0790
      MOVE.W    -6(A6),(A7)
      CLR.W     -(A7)
      JSR       play_game
      ADDQ.L    #2,A7
      MOVE.W    D0,-4(A6)
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'b',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     screen_rez
      BEQ       L0781
      MOVE.W    #1,(A7)
      BRA       L0782
L0781:MOVE.W    #15,(A7)
L0782:MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$1B,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #'c',(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     (A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #$25,(A7)           ; Vsync()
      JSR       _xbios
      CLR.W     (A7)
      CLR.W     -(A7)
      MOVE.W    #7,-(A7)            ; Setcolor()
      JSR       _xbios
      ADDQ.L    #4,A7
      JSR       copy_screen
      TST.W     -6(A6)
      BEQ       L0783
      JSR       exit_joystick
      BRA       L0784
L0783:JSR       exit_mouse
L0784:TST.W     -4(A6)
      BGE       L0787
      CMPI.W    #-1,-4(A6)
      BNE       L0785
      MOVE.W    #2,(A7)                 ; 'MIDI Ring timed out'
      JSR       rsc_draw_buttonless_dialog
      BRA       L0787
L0785:CMPI.W    #-2,-4(A6)
      BNE       L0786
      MOVE.W    #3,(A7)                 ; 'Game terminated by the bozo on the master machine'
      JSR       rsc_draw_buttonless_dialog
      BRA       L0787
L0786:MOVE.W    #4,(A7)                 ; '(maze too small?)'
      JSR       rsc_draw_buttonless_dialog
L0787:

      TST.W     team_flag
      BEQ       L0788
      MOVE.W    #4,(A7)
      BRA       L0789
L0788:MOVE.W    all_players,(A7)
L0789:JSR       update_notes_score

      MOVE.W    #-1,(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.L    screen_ptr+4,-(A7)
      MOVE.W    #5,-(A7)                ; Setscreen()
      JSR       _xbios
      ADDA.L    #10,A7
      BRA       L0790

L078A:CMPI.W    #$86,-4(A6)                 ; midi_byte == 
      BNE       L0790
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-4(A6)
      BLT       L0790
      TST.W     user_is_midicam
      BEQ       L078B
      MOVE.W    -4(A6),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    -4(A6),D0
      SUBQ.W    #1,D0
      MOVE.W    D0,midicam_player_count
      BRA       L078C
L078B:MOVE.W    -4(A6),D0
      MOVE.W    D0,own_number
      MOVE.W    D0,(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
L078C:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-4(A6)
      BLT       L0790
      MOVE.W    -4(A6),D0
      MOVE.W    D0,machines_online
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      TST.W     user_is_midicam
      BEQ       L078F
      CLR.W     -2(A6)
      BRA       L078E
L078D:CLR.W     (A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      ADDQ.W    #1,-2(A6)
L078E:MOVE.W    -2(A6),D0
      CMP.W     machines_online,D0
      BLT.S     L078D
      JSR       midi_send_playernames
      BRA       L0790
L078F:CLR.W     (A7)
      JSR       slave_show_playername_dialog
L0790:BRA       L0768

L0791:CLR.W     (A7)
      JSR       _conterm_update_shift_status
      MOVE.W    -12(A6),D0         ; ret_value
      BRA       L0792
L0792:UNLK      A6
      RTS



slave_show_playername_dialog:LINK      A6,#-16
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    12(A0),L0B34
      MOVE.L    rsrc_str_player_xx,(A7)
      MOVE.L    L0B34,-(A7)
      JSR       string_copy_str2dest
      ADDQ.L    #4,A7
      MOVEA.L   L0B34,A0
      CMPI.B    #'(',(A0)
      BEQ       L0794
      MOVEA.L   L0B34,A0
      CMPI.B    #'-',(A0)
      BNE       L0799
L0794:MOVE.L    L0B34,(A7)
      MOVE.L    str_player_array,-(A7)
      JSR       string_copy_str2dest
      ADDQ.L    #4,A7
      ADDQ.W    #1,own_number
      CMPI.W    #9,own_number
      BLE       L0795
      MOVE.W    own_number,D0
      EXT.L     D0
      DIVS      #10,D0
      BRA       L0796
L0795:MOVE.W    own_number,D0
      EXT.L     D0
      DIVS      #10,D0
      SWAP      D0
L0796:ADD.W     #'0',D0
      MOVEA.L   L0B34,A1
      MOVE.B    D0,8(A1)
      CMPI.W    #9,own_number
      BLE       L0797
      MOVE.W    own_number,D0
      EXT.L     D0
      DIVS      #10,D0
      SWAP      D0
      ADD.W     #'0',D0
      BRA       L0798
L0797:MOVEQ     #' ',D0
L0798:MOVEA.L   L0B34,A1
      MOVE.B    D0,9(A1)
      SUBQ.W    #1,own_number
L0799:MOVE.L    A6,(A7)
      ADDI.L    #-12,(A7)
      MOVE.L    A6,-(A7)
      ADDI.L    #-10,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    rsrc_object_array[11],-(A7)
      JSR       form_center
      ADDA.L    #16,A7
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      CLR.W     -(A7)           ; FMD_START
      JSR       form_dial
      ADDA.L    #16,A7
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #999,-(A7)
      CLR.W     -(A7)
      MOVE.L    rsrc_object_array[11],-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7
      CLR.W     (A7)
      MOVE.L    rsrc_object_array[11],-(A7)
      JSR       form_do
      ADDQ.L    #4,A7
      MOVEA.L   rsrc_object_array[11],A0
      ANDI.W    #$FFFE,58(A0)
      MOVE.W    -12(A6),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #FMD_FINISH,-(A7)
      JSR       form_dial
      ADDA.L    #16,A7
      TST.W     own_number
      BNE       L079A
      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
L079A:MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      TST.W     own_number
      BNE       L079B
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
L079B:MOVE.L    L0B34,(A7)
      MOVE.L    rsrc_str_player_xx,-(A7)
      JSR       string_copy_str2dest
      ADDQ.L    #4,A7
      TST.W     8(A6)
      BNE       L079E
      CLR.W     -2(A6)
      BRA       L079D
L079C:CLR.W     (A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
      ADDQ.W    #1,-2(A6)
L079D:MOVE.W    -2(A6),D0
      CMP.W     machines_online,D0
      BLT.S     L079C
      JSR       midi_send_playernames
L079E:UNLK      A6
      RTS



midi_send_playernames:LINK      A6,#-12
      TST.W     user_is_midicam
      BEQ       L07A4
      MOVE.W    midicam_player_count,-2(A6)
L07A0:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    12(A0),-8(A6)
      CLR.W     -4(A6)
L07A1:MOVEA.W   -4(A6),A0
      ADDA.L    -8(A6),A0
      MOVE.L    A0,-(A7)
      MOVE.W    #20,-(A7)
      JSR       get_midi
      ADDQ.L    #2,A7
      MOVEA.L   (A7)+,A0
      MOVE.B    D0,(A0)
      MOVEA.W   -4(A6),A0
      ADDA.L    -8(A6),A0
      TST.B     (A0)
      BGE       L07A2
      MOVEQ     #-1,D0
      BRA       L07AA
L07A2:MOVEA.L   -8(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVEA.L   -8(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      ADDQ.W    #1,-4(A6)
      TST.B     D0
      BNE.S     L07A1
      SUBQ.W    #1,-2(A6)
      BGE       L07A3
      MOVE.W    machines_online,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-2(A6)
L07A3:MOVE.W    -2(A6),D0
      CMP.W     midicam_player_count,D0
      BNE       L07A0
      BRA       L07AA

L07A4:MOVE.W    own_number,-2(A6)
L07A5:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    12(A0),-8(A6)
      CLR.W     -4(A6)
L07A6:MOVEA.L   -8(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVEA.L   -8(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      ADDQ.W    #1,-4(A6)
      TST.B     D0
      BNE.S     L07A6
      SUBQ.W    #1,-2(A6)
      BGE       L07A7
      MOVE.W    machines_online,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-2(A6)
L07A7:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    12(A0),-8(A6)
      CLR.W     -4(A6)
L07A8:MOVEA.W   -4(A6),A0
      ADDA.L    -8(A6),A0
      MOVE.L    A0,-(A7)
      MOVE.W    #20,-(A7)
      JSR       get_midi
      ADDQ.L    #2,A7
      MOVEA.L   (A7)+,A0
      MOVE.B    D0,(A0)
      MOVEA.W   -4(A6),A0
      ADDA.L    -8(A6),A0
      TST.B     (A0)
      BGE       L07A9
      MOVEQ     #-1,D0
      BRA       L07AA
L07A9:MOVEA.L   -8(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      ADDQ.W    #1,-4(A6)
      TST.B     D0
      BNE.S     L07A8
      MOVE.W    -2(A6),D0
      CMP.W     own_number,D0
      BNE       L07A5
L07AA:UNLK      A6
      RTS

print_playername:LINK      A6,#-10
      MOVE.W    8(A6),D0
      CMP.W     machines_online,D0
      BGE       L07AE
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #rsc_playername_rscindices,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      #sizeof(OBJECT),D0
      ADD.L     rsrc_object_array[9],D0
      MOVEA.L   D0,A0
      MOVE.L    12(A0),-6(A6)
      BRA       L07AD
L07AC:MOVEA.L   -6(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      ADDQ.L    #1,-6(A6)
L07AD:MOVEA.L   -6(A6),A0
      TST.B     (A0)
      BNE.S     L07AC
      BRA       print_playername_return

L07AE:MOVE.W    8(A6),D0
      CMP.W     all_players,D0
      BLT       L07AF
      MOVE.L    #str_remote,(A7)
      JSR       bconout_string
      BRA       print_playername_return

L07AF:MOVE.W    machines_online,D0
      SUB.W     D0,8(A6)
      CLR.W     -2(A6)
      BRA       L07B4
L07B0:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #active_drones,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     8(A6),D0
      BLE       L07B3
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #str_drone_type_array,A0
      MOVE.L    (A0),-6(A6)
      BRA       L07B2
L07B1:MOVEA.L   -6(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      ADDQ.L    #1,-6(A6)
L07B2:MOVEA.L   -6(A6),A0
      TST.B     (A0)
      BNE.S     L07B1
      MOVE.W    8(A6),(A7)
      ADDQ.W    #1,(A7)
      JSR       bconout_dec_number
      BRA       print_playername_return
L07B3:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #active_drones,A0
      MOVE.W    (A0),D0
      SUB.W     D0,8(A6)
      ADDQ.W    #1,-2(A6)
L07B4:CMPI.W    #3,-2(A6)
      BLT       L07B0
print_playername_return:UNLK      A6
      RTS

send_datas:LINK      A6,#-10
      BRA       L07B8
L07B7:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #2,-(A7)                ; Bconin()
      JSR       _bios
      ADDQ.L    #2,A7
      AND.L     #$FF,D0
L07B8:MOVE.W    #DEV_MIDI,(A7)
      MOVE.W    #1,-(A7)                     ; Bconstat()
      JSR       _bios
      ADDQ.L    #2,A7
      TST.L     D0
      BNE.S     L07B7
      MOVE.W    #$83,(A7)         ;Header-Byte senden
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07B9
      MOVEQ     #-1,D0
      BRA       send_datas_return
L07B9:CMPI.W    #$83,-6(A6)
      BEQ       L07BA
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BA:JSR       midi_send_playernames

      MOVE.W    maze_size,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,maze_size
      TST.W     maze_size
      BGE       L07BB
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BB:MOVE.W    reload_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,reload_time
      TST.W     reload_time
      BGE       L07BC
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BC:MOVE.W    regen_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,regen_time
      TST.W     regen_time
      BGE       L07BD
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BD:MOVE.W    revive_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,revive_time
      TST.W     revive_time
      BGE       L07BE
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BE:MOVE.W    revive_lives,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,revive_lives
      TST.W     revive_lives
      BGE       L07BF
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07BF:MOVE.W    active_drones,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07C0
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07C0:MOVE.W    active_drones+2,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07C1
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07C1:MOVE.W    active_drones+4,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07C2
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07C2:MOVE.W    #64*64,-4(A6)
      CLR.W     -2(A6)
      BRA       L07C6
L07C3:MOVEA.W   -2(A6),A0
      MOVE.L    #maze_datas,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVE.W    D0,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CMPI.W    #50,-2(A6)
      BLT       L07C4
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
L07C4:TST.W     -6(A6)
      BGE       L07C5
      MOVEQ     #-1,D0
      BRA       send_datas_return
L07C5:ADDQ.W    #1,-2(A6)
L07C6:MOVE.W    -2(A6),D0
      CMP.W     -4(A6),D0
      BLT.S     L07C3

      CLR.W     -2(A6)
      BRA       L07C8
L07C7:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      ADDQ.W    #1,-2(A6)
L07C8:CMPI.W    #50,-2(A6)
      BLT.S     L07C7
      TST.W     -6(A6)
      BGE       L07C9
      MOVEQ     #-1,D0
      BRA       send_datas_return

L07C9:MOVE.W    team_flag,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     -2(A6)
      BRA       L07CB
L07CA:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      ADDQ.W    #1,-2(A6)
L07CB:CMPI.W    #16,-2(A6)
      BLT.S     L07CA

      CLR.W     -2(A6)
      BRA       L07CD
L07CC:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      ADDQ.W    #1,-2(A6)
L07CD:CMPI.W    #16,-2(A6)
      BLE.S     L07CC

      TST.W     -6(A6)
      BGE       L07CE
      MOVEQ     #-1,D0
      BRA       send_datas_return
L07CE:MOVE.W    friendly_fire,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,friendly_fire
      TST.W     friendly_fire
      BGE       L07CF
      MOVEQ     #-1,D0
      BRA       send_datas_return
L07CF:CLR.W     D0
      BRA       send_datas_return
send_datas_return:

      UNLK      A6
      RTS

receive_datas:LINK      A6,#-10
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07D2
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D2:CMPI.W    #$83,-6(A6)
      BEQ       L07D3
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D3:MOVE.W    #$83,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      JSR       midi_send_playernames
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,maze_size
      TST.W     maze_size
      BGE       L07D4
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D4:MOVE.W    maze_size,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,reload_time
      TST.W     reload_time
      BGE       L07D5
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D5:MOVE.W    reload_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,regen_time
      TST.W     regen_time
      BGE       L07D6
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D6:MOVE.W    regen_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,revive_time
      TST.W     revive_time
      BGE       L07D7
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D7:MOVE.W    revive_time,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,revive_lives
      TST.W     revive_lives
      BGE       L07D8
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D8:MOVE.W    revive_lives,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,active_drones
      TST.W     active_drones
      BGE       L07D9
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07D9:MOVE.W    active_drones,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,active_drones+2
      TST.W     active_drones+2
      BGE       L07DA
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07DA:MOVE.W    active_drones+2,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,active_drones+4
      TST.W     active_drones+4
      BGE       L07DB
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07DB:MOVE.W    active_drones+4,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7

      MOVE.W    #4096,-4(A6)
      CLR.W     -2(A6)
      BRA       L07DE
L07DC:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07DD
      MOVEQ     #-1,D0
      BRA       receive_datas_return
L07DD:MOVE.W    -6(A6),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    -6(A6),D0
      MOVEA.W   -2(A6),A1
      ADDA.L    #maze_datas,A1
      MOVE.B    D0,(A1)
      ADDQ.W    #1,-2(A6)
L07DE:MOVE.W    -2(A6),D0
      CMP.W     -4(A6),D0
      BLT.S     L07DC

      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,team_flag
      TST.W     team_flag
      BGE       L07DF
      MOVEQ     #-1,D0
      BRA       receive_datas_return

L07DF:MOVE.W    team_flag,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7

      CLR.W     -2(A6)
      BRA       L07E2
L07E0:MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,-(A7)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    (A7)+,ply_team(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_team(A0)
      BGE       L07E1
      MOVEQ     #-1,D0
      BRA       receive_datas_return
L07E1:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      ADDQ.W    #1,-2(A6)
L07E2:CMPI.W    #16,-2(A6)
      BLT.S     L07E0

      MOVE.W    #20,(A7)
      JSR       get_midi
      MOVE.W    D0,friendly_fire
      TST.W     friendly_fire
      BGE       L07E3
      MOVEQ     #-1,D0
      BRA       receive_datas_return
L07E3:MOVE.W    friendly_fire,(A7)
      MOVE.W    #DEV_MIDI,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      CLR.W     D0
      BRA       receive_datas_return
receive_datas_return:UNLK      A6
      RTS

rsc_draw_buttonless_dialog:LINK      A6,#-12
      MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       form_center
      ADDA.L    #16,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      CLR.W     -(A7)           ; FMD_START
      JSR       form_dial
      ADDA.L    #16,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    #999,-(A7)
      CLR.W     -(A7)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    #FMD_FINISH,-(A7)
      JSR       form_dial
      ADDA.L    #16,A7
      UNLK      A6
      RTS

do_about_dialog:LINK      A6,#-12
      MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       form_center
      ADDA.L    #16,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      CLR.W     -(A7)
      JSR       form_dial
      ADDA.L    #16,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    #999,-(A7)
      CLR.W     -(A7)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       objc_draw
      ADDA.L    #14,A7
      CLR.W     (A7)
      MOVEA.W   8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #rsrc_object_array,D1
      MOVE.L    0(A0,D1.L),-(A7)
      JSR       form_do
      ADDQ.L    #4,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      MOVE.W    #3,-(A7)
      JSR       form_dial
      ADDA.L    #16,A7
      CLR.L     (A7)
      MOVE.W    #M_OFF,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      MOVE.W    wind_handle,(A7)
      JSR       redraw_window_background
      CLR.L     (A7)
      MOVE.W    #M_ON,-(A7)
      JSR       graf_mouse
      ADDQ.L    #2,A7
      UNLK      A6
      RTS

_conterm_set_shift:LINK      A6,#-4
      ORI.B     #8,$484.W
      UNLK      A6
      RTS

_conterm_clear_shift:LINK      A6,#-4
      ANDI.B    #$F7,$484.W
      UNLK      A6
      RTS

_conterm_update_shift_status:LINK      A6,#-4
      TST.W     8(A6)
      BEQ       L07EA
      MOVE.L    #_conterm_set_shift,(A7)
      BRA       L07EB
L07EA:MOVE.L    #_conterm_clear_shift,(A7)
L07EB:MOVE.W    #38,-(A7)                  ; Supexec()
      JSR       _xbios
      ADDQ.L    #2,A7
      UNLK      A6
      RTS

LoadMaze:LINK      A6,#-144
      CLR.W     -8(A6)
      CLR.W     (A7)
      MOVE.L    8(A6),-(A7)
      MOVE.W    #$3D,-(A7)                  ; Fopen()
      JSR       _gemdos
      ADDQ.L    #6,A7
      MOVE.W    D0,-6(A6)
      TST.W     -6(A6)
      BGE       L07F0
      CLR.W     -2(A6)
      CLR.W     -4(A6)
      BRA       L07ED
L07ED:MOVEA.W   -4(A6),A0
      MOVE.L    #str_cant_open,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A6,A1
      MOVE.B    D0,-140(A1)
      ADDQ.W    #1,-4(A6)
      ADDQ.W    #1,-2(A6)
      TST.W     D0
      BNE.S     L07ED
      SUBQ.W    #1,-2(A6)
      CLR.W     -4(A6)
      BRA       L07EE
L07EE:MOVEA.L   12(A6),A0
      MOVE.W    -4(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A6,A1
      MOVE.B    D0,-140(A1)
      ADDQ.W    #1,-4(A6)
      ADDQ.W    #1,-2(A6)
      TST.W     D0
      BNE.S     L07EE
      SUBQ.W    #1,-2(A6)
      CLR.W     -4(A6)
      BRA       L07EF
L07EF:MOVEA.W   -4(A6),A0
      MOVE.L    #str_cant_open_2,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A6,A1
      MOVE.B    D0,-140(A1)
      ADDQ.W    #1,-4(A6)
      ADDQ.W    #1,-2(A6)
      TST.W     D0
      BNE.S     L07EF
      MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFF74,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-1,D0
      BRA       LoadMaze_return
L07F0:MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFFB4,(A7)
      MOVE.L    #1,-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      CMPI.B    #'0',-76(A6)
      BLT       L07F1
      CMPI.B    #'9',-76(A6)
      BLE       L07F2
L07F1:MOVE.L    str_maze_file_header_booboo_ptr,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-3,D0
      BRA       LoadMaze_return
L07F2:MOVE.B    -76(A6),D0
      EXT.W     D0
      ADD.W     #-'0',D0
      MULS      #10,D0
      MOVE.W    D0,maze_size
      MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFFB4,(A7)
      MOVE.L    #1,-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      CMPI.B    #'0',-76(A6)
      BLT       L07F3
      CMPI.B    #'9',-76(A6)
      BLE       L07F4
L07F3:MOVE.L    str_maze_file_header_booboo_ptr,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-3,D0
      BRA       LoadMaze_return
L07F4:MOVE.B    -76(A6),D0
      EXT.W     D0
      ADD.W     #-'0',D0
      ADD.W     D0,maze_size
      MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFFB4,(A7)
      MOVE.L    #1,-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFFB4,(A7)
      MOVE.L    #1,-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      CLR.W     -2(A6)
      BRA       L0801
L07F5:MOVE.W    -2(A6),D0
      CMP.W     maze_size,D0
      BGT       L07F6
      MOVE.L    A6,(A7)
      ADDI.L    #$FFFFFFB6,(A7)
      MOVEA.W   maze_size,A0
      MOVE.L    A0,-(A7)
      ADDQ.L    #3,(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    #$3F,-(A7)                  ; Fread()
      JSR       _gemdos
      ADDQ.L    #8,A7
      MOVE.W    maze_size,D1
      EXT.L     D1
      ADDQ.L    #3,D1
      CMP.L     D1,D0
      BEQ       L07F6
      MOVE.L    str_error_reading_maze_file_ptr,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
      MOVEQ     #-2,D0
      BRA       LoadMaze_return
L07F6:CLR.W     -4(A6)
      BRA       L0800
L07F7:MOVE.W    -2(A6),D0
      CMP.W     maze_size,D0
      BGT       L07FC
      MOVE.W    -4(A6),D0
      CMP.W     maze_size,D0
      BGT       L07FC
      BTST      #0,-1(A6)
      BEQ       L07F8
      BTST      #0,-3(A6)
      BEQ       L07F8
      MOVEA.W   -4(A6),A0
      ADDA.L    A6,A0
      CMPI.B    #'.',-74(A0)
      BEQ       L07F8
      MOVE.W    #1,-8(A6)
L07F8:MOVEA.W   -4(A6),A0
      ADDA.L    A6,A0
      CMPI.B    #$58,-74(A0)
      BNE       L07F9
      MOVE.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
      BRA       L07FB
L07F9:MOVEA.W   -4(A6),A0
      ADDA.L    A6,A0
      CMPI.B    #'.',-74(A0)
      BNE       L07FA
      MOVE.W    #-1,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
      BRA       L07FB
L07FA:MOVE.W    #1,-8(A6)
L07FB:BRA       L07FF
L07FC:MOVE.W    -2(A6),D0
      AND.W     -4(A6),D0
      AND.W     #1,D0
      BEQ       L07FD
      MOVE.W    #-1,(A7)
      BRA       L07FE
L07FD:MOVE.W    #1,(A7)
L07FE:MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
L07FF:ADDQ.W    #1,-4(A6)
L0800:CMPI.W    #63,-4(A6)
      BLE       L07F7
      ADDQ.W    #1,-2(A6)
L0801:CMPI.W    #63,-2(A6)
      BLE       L07F5
      MOVE.W    -6(A6),(A7)
      MOVE.W    #$3E,-(A7)                  ; Fclose()
      JSR       _gemdos
      ADDQ.L    #2,A7
      TST.W     -8(A6)
      BEQ       L0802
      MOVE.L    str_maze_file_format_booboo_ptr,(A7)
      MOVE.W    #1,-(A7)
      JSR       form_alert
      ADDQ.L    #2,A7
L0802:CLR.W     D0
      BRA       LoadMaze_return
LoadMaze_return:UNLK      A6
      RTS

get_maze_data:LINK      A6,#-4
      TST.W     8(A6)
      BLT       L0805
      CMPI.W    #63,8(A6)
      BGT       L0805
      TST.W     10(A6)
      BLT       L0805
      CMPI.W    #63,10(A6)
      BLE       L0808
L0805:MOVE.W    8(A6),D0
      AND.W     10(A6),D0
      AND.W     #1,D0
      BEQ       L0806
      MOVEQ     #-1,D0
      BRA       L0807
L0806:MOVEQ     #1,D0
L0807:BRA       L080B
      BRA       L080B
L0808:TST.W     12(A6)
      BNE       L0809
      MOVE.W    8(A6),D0
      ASL.W     #6,D0
      MOVEA.W   D0,A0
      MOVEA.W   10(A6),A1
      ADDA.L    A1,A0
      MOVE.L    #maze_datas,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      BRA       L080A
L0809:MOVE.W    10(A6),D0
      ASL.W     #6,D0
      MOVEA.W   D0,A0
      MOVEA.W   8(A6),A1
      ADDA.L    A1,A0
      MOVE.L    #maze_datas,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
L080A:BRA       L080B
L080B:UNLK      A6
      RTS

set_maze_data:LINK      A6,#-4
      TST.W     8(A6)
      BLT       L080D
      CMPI.W    #63,8(A6)
      BGT       L080D
      TST.W     10(A6)
      BLT       L080D
      CMPI.W    #63,10(A6)
      BGT       L080D
      MOVE.W    12(A6),D0
      MOVE.W    8(A6),D1
      ASL.W     #6,D1
      MOVEA.W   D1,A1
      MOVEA.W   10(A6),A2
      ADDA.L    A2,A1
      ADDA.L    #maze_datas,A1
      MOVE.B    D0,(A1)
L080D:UNLK      A6
      RTS

set_all_player:LINK      A6,#-6
      BRA       L0810
L080F:SUBQ.W    #1,objekt_anz
      MOVE.W    #-1,(A7)
      MOVE.W    objekt_anz,D0
      MULS      #6,D0
      MOVEA.L   D0,A0
      MOVE.L    #objekt_table,D1
      MOVE.W    2(A0,D1.L),-(A7)
      MOVE.W    objekt_anz,D0
      MULS      #6,D0
      MOVEA.L   D0,A0
      MOVE.L    #objekt_table,D1
      MOVE.W    0(A0,D1.L),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
L0810:TST.W     objekt_anz
      BGT.S     L080F
      CLR.W     -2(A6)
      BRA       L0815
L0811:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BGT       L0812
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L0813
L0812:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),(A7)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)
L0813:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_shoot(A0)
      BLE       L0814
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_shootx(A0,D1.L),(A7)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_shooty(A0,D1.L),-(A7)
      MOVE.W    -2(A6),-(A7)
      ADDI.W    #16,(A7)
      JSR       set_object
      ADDQ.L    #4,A7
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_slist(A0)
L0814:ADDQ.W    #1,-2(A6)
L0815:MOVE.W    -2(A6),D0
      CMP.W     all_players,D0
      BLT       L0811
      UNLK      A6
      RTS

set_object:LINK      A6,#-16
      MOVE.W    10(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    12(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    10(A6),D0
      AND.W     #$FF,D0
      MOVE.W    D0,-6(A6)
      MOVE.W    12(A6),D0
      AND.W     #$FF,D0
      MOVE.W    D0,-8(A6)
      CLR.W     (A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      MOVE.W    D0,-10(A6)
      CMPI.W    #-1,-10(A6)
      BNE       L0817
      MOVE.W    8(A6),(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
      MOVE.W    objekt_anz,D0
      MULS      #6,D0
      ADD.L     #objekt_table,D0
      MOVEA.L   D0,A0
      MOVE.W    -2(A6),(A0)
      MOVE.W    objekt_anz,D0
      MULS      #6,D0
      ADD.L     #objekt_table,D0
      MOVEA.L   D0,A0
      MOVE.W    -4(A6),2(A0)
      MOVE.W    objekt_anz,D0
      MULS      #6,D0
      ADD.L     #objekt_table,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),4(A0)
      ADDQ.W    #1,objekt_anz
      BRA       L081C
L0817:CMPI.W    #16,-10(A6)
      BGE       L0818
      MOVE.W    -10(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_plist(A0),-12(A6)
      BRA       L0819
L0818:MOVE.W    -10(A6),D0
      ADD.W     #-16,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_slist(A0),-12(A6)
L0819:CMPI.W    #-1,-12(A6)
      BEQ       L081A
      MOVE.W    -12(A6),-10(A6)
      BRA.S     L0817
L081A:CMPI.W    #16,-10(A6)
      BGE       L081B
      MOVE.W    -10(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),ply_plist(A0)
      BRA       L081C
L081B:MOVE.W    -10(A6),D0
      ADD.W     #-16,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),ply_slist(A0)
L081C:UNLK      A6
      RTS

draw_mazes_d:LINK      A6,#-8
      MOVEM.L   D3-D7,-(A7)
      JSR       clear_table_size
      JSR       clear_draw_list
      MOVE.W    8(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-2(A6)       ;_cellY

      MOVE.W    10(A6),D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)       ;_cellX

      TST.W     16(A6)          ;flip
      BNE       L081E
      MOVE.W    -2(A6),-6(A6)   ;cellY = _cellY
      MOVE.W    -4(A6),-8(A6)   ;cellX = _cellX
      BRA       L081F
L081E:MOVE.W    -4(A6),-6(A6)   ;cellY = _cellX
      MOVE.W    -2(A6),-8(A6)   ;cellX = _cellY

L081F:MOVE.W    -6(A6),D7       ;cellFY = cellY
      MOVEQ     #7,D5           ;viewingDistance
      BRA       L082F

L0820:MOVEQ     #7,D4           ;viewingWidth
      MOVE.W    -8(A6),D6       ;cellFX = cellX
L0821:MOVE.W    16(A6),(A7)     ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       draw_3d_ply
      ADDQ.L    #4,A7
      SUB.W     14(A6),D6       ;cellFX -= xAdd
      MOVE.W    16(A6),(A7)    ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0822
      MOVE.W    18(A6),D0     ;compassDir
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVE.W    D0,(A7)
      MOVE.W    16(A6),-(A7)    ;flip
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      ADDQ.W    #1,(A7)
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      JSR       draw_mazes_f
      ADDA.L    #10,A7
      TST.W     D0
      BNE       L0823
L0822:JSR       check_full_obj
      TST.W     D0
      BNE       L0823
      SUB.W     14(A6),D6       ;cellFX -= xAdd
      SUBQ.W    #1,D4           ;viewingWidth
      BGE.S     L0821

L0823:MOVEQ     #8,D4           ;viewingWidth
      MOVE.W    -8(A6),D6       ;cellFX = cellX
      ADD.W     14(A6),D6       ;cellFX += xAdd
L0824:MOVE.W    16(A6),(A7)    ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0825
      MOVE.W    18(A6),(A7)     ;compassDir
      MOVE.W    16(A6),-(A7)    ;flip
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      ADDQ.W    #1,(A7)
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      JSR       draw_mazes_f
      ADDA.L    #10,A7
      TST.W     D0
      BNE       L0826
L0825:JSR       check_full_obj
      TST.W     D0
      BNE       L0826
      CMP.W     #16,D4           ;viewingWidth
      BEQ       L0826
      ADD.W     14(A6),D6       ;cellFX += xAdd
      MOVE.W    16(A6),(A7)    ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       draw_3d_ply
      ADDQ.L    #4,A7
      ADD.W     14(A6),D6       ;cellFX += xAdd
      ADDQ.W    #1,D4           ;viewingWidth
      BRA.S     L0824

L0826:ADD.W     12(A6),D7       ;cellFY += yAdd
      MOVE.W    -8(A6),D6       ;cellFX = cellX
      MOVEQ     #7,D4           ;viewingWidth
      BRA       L0829
L0827:MOVE.W    16(A6),(A7)    ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0828
      MOVE.W    18(A6),D0     ;compassDir
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVE.W    D0,(A7)
      MOVE.W    16(A6),D0    ;flip
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVE.W    D0,-(A7)
      MOVE.W    D4,-(A7)           ;viewingWidth
      ADDQ.W    #1,(A7)
      MOVE.W    D5,-(A7)           ;viewingDistance
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      JSR       draw_mazes_f
      ADDA.L    #10,A7
      TST.W     D0
      BNE       L082A
L0828:JSR       check_full_obj
      TST.W     D0
      BNE       L082A
      MOVE.W    14(A6),D0   ;xAdd
      ADD.W     14(A6),D0   ;xAdd
      SUB.W     D0,D6       ;cellFX
      SUBQ.W    #1,D4           ;viewingWidth
L0829:TST.W     D4           ;viewingWidth
      BGE.S     L0827

L082A:MOVE.W    -8(A6),D6       ;cellFX = cellX
      ADD.W     14(A6),D6       ;cellFX += xAdd
      ADD.W     14(A6),D6       ;cellFX += xAdd
      MOVEQ     #8,D4           ;viewingWidth
      BRA       L082D
L082B:MOVE.W    16(A6),(A7)    ;flip
      MOVE.W    D6,-(A7)       ;cellFX
      MOVE.W    D7,-(A7)       ;cellFY
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L082C
      MOVE.W    18(A6),(A7)     ;compassDir
      MOVE.W    16(A6),D0    ;flip
      MOVEQ     #1,D1
      EOR.W     D1,D0
      MOVE.W    D0,-(A7)
      MOVE.W    D4,-(A7)           ;viewingWidth
      ADDQ.W    #1,(A7)
      MOVE.W    D5,-(A7)           ;viewingDistance
      MOVE.W    D4,-(A7)           ;viewingWidth
      MOVE.W    D5,-(A7)           ;viewingDistance
      JSR       draw_mazes_f
      ADDA.L    #10,A7
      TST.W     D0
      BNE       L082E
L082C:JSR       check_full_obj
      TST.W     D0
      BNE       L082E
      MOVE.W    14(A6),D0   ;xAdd
      ADD.W     14(A6),D0   ;xAdd
      ADD.W     D0,D6       ;cellFX
      ADDQ.W    #1,D4           ;viewingWidth
L082D:CMP.W     #16,D4           ;viewingWidth
      BLT.S     L082B

L082E:ADD.W     12(A6),D7       ;cellFY += yAdd
      JSR       check_full_obj
      TST.W     D0
      BNE       L0830
      SUBQ.W    #1,D5           ;viewingDistance
L082F:TST.W     D5           ;viewingDistance
      BGE       L0820
L0830:TST.L     (A7)+
      MOVEM.L   (A7)+,D4-D7
      UNLK      A6
      RTS

_random:LINK      A6,#-4
      MOVE.W    _random_seed,D0
      MULS      #6907,D0
      ADD.L     #130253,D0
      MOVE.W    D0,_random_seed
      MOVE.W    _random_seed,D0
      BRA       _random1
_random1:UNLK      A6
      RTS

_rnd:LINK      A6,#-8  ;Zufallszahl im Wertebereich 0..8(A6) holen
      MOVE.W    #$100,D0
      EXT.L     D0
      DIVS      8(A6),D0
      MULS      8(A6),D0
      MOVE.W    D0,-4(A6)
      BRA       L0834
L0834:JSR       _random
      ASR.W     #4,D0
      AND.W     #$FF,D0
      MOVE.W    D0,-2(A6)
      CMP.W     -4(A6),D0
      BGE.S     L0834
      MOVE.W    -2(A6),D0
      EXT.L     D0
      DIVS      8(A6),D0
      SWAP      D0
      BRA       L0835
L0835:UNLK      A6
      RTS

draw_3d_ply:LINK      A6,#-86       ;alle Spieler bzw. Schsse auf ein Feld im 3D-Maze setzen
      CLR.W     -16(A6)
      MOVE.W    12(A6),(A7)
      MOVE.W    10(A6),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      MOVE.W    D0,-14(A6)
      BRA       L083A
L0837:CMPI.W    #16,-14(A6)
      BGE       L0838               ; => a shot
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),-8(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),-10(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_plist(A0),-18(A6)
      BRA       L0839
L0838:MOVE.W    -14(A6),D0
      ADD.W     #-16,D0
      MOVE.W    D0,-18(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_shooty(A0),-8(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_shootx(A0),-10(A6)
      MOVE.W    -18(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_slist(A0),-18(A6)
L0839:MOVE.W    -8(A6),D0
      SUB.W     var_y_koord,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -10(A6),D0
      SUB.W     var_x_koord,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    var_richtung,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      JSR       sincos
      ADDQ.L    #8,A7
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -2(A6),-82(A0)
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -4(A6),-80(A0)
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -14(A6),-78(A0)
      ADDQ.W    #1,-16(A6)
      CMPI.W    #10,-16(A6)
      BGE       L083B
      MOVE.W    -18(A6),-14(A6)
L083A:CMPI.W    #-1,-14(A6)
      BNE       L0837

L083B:MOVE.W    -16(A6),D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-20(A6)
      BRA       L0840
L083C:CLR.W     -22(A6)
      BRA       L083F
L083D:MOVE.W    -22(A6),D0
      MULS      #6,D0
      MOVE.W    -82(A6,D0.L),D0
      MOVE.W    -22(A6),D1
      ADDQ.W    #1,D1
      MULS      #6,D1
      MOVE.W    -82(A6,D1.L),D1
      CMP.W     D1,D0
      BLE       L083E
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -82(A0),-18(A6)
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),D1
      ADDQ.W    #1,D1
      MULS      #6,D1
      ADD.L     A6,D1
      MOVEA.L   D1,A1
      MOVE.W    -82(A1),-82(A0)
      MOVE.W    -22(A6),D0
      ADDQ.W    #1,D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -18(A6),-82(A0)
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -80(A0),-18(A6)
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),D1
      ADDQ.W    #1,D1
      MULS      #6,D1
      ADD.L     A6,D1
      MOVEA.L   D1,A1
      MOVE.W    -80(A1),-80(A0)
      MOVE.W    -22(A6),D0
      ADDQ.W    #1,D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -18(A6),-80(A0)
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -78(A0),-18(A6)
      MOVE.W    -22(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -22(A6),D1
      ADDQ.W    #1,D1
      MULS      #6,D1
      ADD.L     A6,D1
      MOVEA.L   D1,A1
      MOVE.W    -78(A1),-78(A0)
      MOVE.W    -22(A6),D0
      ADDQ.W    #1,D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -18(A6),-78(A0)
L083E:ADDQ.W    #1,-22(A6)
L083F:MOVE.W    -22(A6),D0
      CMP.W     -20(A6),D0
      BLT       L083D
      SUBQ.W    #1,-20(A6)
L0840:TST.W     -20(A6)
      BGT       L083C
      BRA       L084E
L0841:SUBQ.W    #1,-16(A6)
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -78(A0),-14(A6)
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -82(A0),-2(A6)
      MOVE.W    -16(A6),D0
      MULS      #6,D0
      ADD.L     A6,D0
      MOVEA.L   D0,A0
      MOVE.W    -80(A0),-4(A6)
      CMPI.W    #16,-14(A6)
      BGE       L0848
      MOVE.W    -14(A6),D0
      CMP.W     own_number,D0
      BEQ       L0847
      TST.W     -2(A6)
      BGE       L0847
      MOVE.W    #-4000,D0
      EXT.L     D0
      DIVS      -2(A6),D0
      MOVE.W    D0,-6(A6)
      CMP.W     #1,D0
      BGE       L0842
      MOVE.W    #1,-6(A6)
L0842:CMPI.W    #32,-6(A6)
      BLE       L0843
      MOVE.W    #32,-6(A6)
L0843:TST.W     screen_rez
      BEQ       L0844
      ASL       -6(A6)
L0844:MOVE.W    -2(A6),(A7)
      MOVE.W    window_width2,-(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVE.W    D0,-(A7)
      MOVE.W    window_width,D0
      SUB.W     (A7)+,D0
      MOVE.W    D0,-8(A6)
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),D0
      ADD.W     D0,(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),D0
      SUB.W     D0,(A7)
      JSR       chk_obj_visibl
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L0847
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    4(A0,D1.L),D0
      ADD.W     #-128,D0
      SUB.W     var_richtung,D0
      MOVE.W    -4(A6),D1
      ASL.W     #5,D1
      EXT.L     D1
      DIVS      -2(A6),D1
      ADD.W     D1,D0
      MOVE.W    D0,-12(A6)
      MOVE.W    -12(A6),D0
      ASR.W     #3,D0
      AND.W     #$1F,D0
      MOVEA.W   D0,A0
      ADDA.L    A0,A0
      ADDA.L    #face_shape_tab,A0
      MOVE.W    (A0),-12(A6)
      MOVE.W    window_height,D0
      ADDQ.W    #1,D0
      MOVE.W    word_per_line,D1
      ASL.W     #8,D1
      EXT.L     D1
      DIVS      -2(A6),D1
      SUB.W     D1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_hitflag(A0,D1.L)
      BEQ       L0845
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_gunman(A0,D1.L),(A7)
      BRA       L0846
L0845:MOVE.W    -14(A6),(A7)
L0846:MOVE.W    -6(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),D0
      SUB.W     D0,(A7)
      MOVE.W    -12(A6),-(A7)
      MOVE.W    #2,-(A7)
      JSR       to_draw_list
      ADDA.L    #10,A7
L0847:BRA       L084E
L0848:SUBI.W    #16,-14(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_shooty(A0,D1.L),D0
      SUB.W     var_y_koord,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    -14(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_shootx(A0,D1.L),D0
      SUB.W     var_x_koord,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    var_richtung,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      JSR       sincos
      ADDQ.L    #8,A7
      TST.W     -2(A6)
      BGE       L084E
      TST.W     -4(A6)
      BLT       L0849
      MOVE.W    -2(A6),D0
      NEG.W     D0
      CMP.W     -4(A6),D0
      BGE       L084A
L0849:TST.W     -4(A6)
      BGE       L084E
      MOVE.W    -2(A6),D0
      CMP.W     -4(A6),D0
      BGT       L084E
L084A:MOVE.W    #-1000,D0
      EXT.L     D0
      DIVS      -2(A6),D0
      MOVE.W    D0,-6(A6)
      BNE       L084B
      MOVE.W    #1,-6(A6)
L084B:CMPI.W    #32,-6(A6)
      BLE       L084C
      MOVE.W    #32,-6(A6)
L084C:TST.W     screen_rez
      BEQ       L084D
      ASL       -6(A6)
L084D:MOVE.W    -2(A6),(A7)
      MOVE.W    window_width2,-(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVE.W    D0,-(A7)
      MOVE.W    window_width,D0
      SUB.W     (A7)+,D0
      MOVE.W    D0,-8(A6)
      MOVE.W    window_height,D0
      ADDQ.W    #1,D0
      MOVE.W    word_per_line,D1
      ASL.W     #8,D1
      EXT.L     D1
      DIVS      -2(A6),D1
      SUB.W     D1,D0
      MOVE.W    D0,-10(A6)
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),D0
      ADD.W     D0,(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),D0
      SUB.W     D0,(A7)
      JSR       chk_obj_visibl
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L084E
      MOVE.W    -14(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),D0
      SUB.W     D0,(A7)
      CLR.W     -(A7)
      MOVE.W    #3,-(A7)
      JSR       to_draw_list
      ADDA.L    #10,A7
L084E:TST.W     -16(A6)
      BGT       L0841
      UNLK      A6
      RTS



init_all_player(WORD playerCount, WORD isDrone)

init_all_player:LINK      A6,#-14
      MOVE.W    8(A6),D0
      MOVE.W    D0,we_dont_have_a_winner
      MOVE.W    D0,all_players

;Maze von allen Spieler/Schudaten befreien
      MOVE.W    #1,-2(A6)
      BRA       L0853
L0850:MOVE.W    #1,-4(A6)
      BRA       L0852
L0851:MOVE.W    #-1,(A7)
      MOVE.W    -4(A6),-(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       set_maze_data
      ADDQ.L    #4,A7
      ADDQ.W    #2,-4(A6)
L0852:CMPI.W    #63,-4(A6)
      BLE.S     L0851
      ADDQ.W    #2,-2(A6)
L0853:CMPI.W    #63,-2(A6)
      BLE.S     L0850

      CLR.W     objekt_anz

      CLR.W     -2(A6)
      BRA       L0855
L0854:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_lives(A0)   ;alle Leben lschen
      ADDQ.W    #1,-2(A6)
L0855:MOVE.W    -2(A6),D0
      CMP.W     all_players,D0
      BLT.S     L0854

      CLR.W     -2(A6)
      BRA       L0859
L0856:MOVE.W    -2(A6),(A7)
      JSR       hunt_ply_pos
      TST.W     D0
      BNE       L0857
      CLR.W     D0
      BRA       L085A
L0857:MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #3,ply_lives(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_refresh(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_shoot(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_reload(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_score(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_hitflag(A0)
      TST.W     10(A6)
      BEQ       L0858
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     32(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
      MOVE.W    -2(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     74(A0)
L0858:ADDQ.W    #1,-2(A6)
L0859:MOVE.W    -2(A6),D0
      CMP.W     all_players,D0
      BLT       L0856
      MOVEQ     #1,D0
      BRA       L085A
L085A:UNLK      A6
      RTS



hunt_ply_pos:LINK      A6,#-24
      MOVE.W    #1,-10(A6)      ;nicht gefunden
      CLR.W     -2(A6)          ;Anzahl der Versuche=0
      BRA       L0868
hunt_ply_pos_loop:MOVE.W    maze_size,(A7)
      JSR       _rnd
      OR.W      #1,D0
      MOVE.W    D0,-4(A6)
      MOVE.W    maze_size,(A7)
      JSR       _rnd
      OR.W      #1,D0
      MOVE.W    D0,-6(A6)
      CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #-1,D0
      BNE       L0867
      CLR.W     -8(A6)
      CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      SUBQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L085D
      ADDQ.W    #1,-8(A6)
L085D:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L085E
      ADDQ.W    #1,-8(A6)
L085E:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    -4(A6),-(A7)
      ADDQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L085F
      ADDQ.W    #1,-8(A6)
L085F:CLR.W     (A7)
      MOVE.W    -6(A6),-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0860
      ADDQ.W    #1,-8(A6)
L0860:CMPI.W    #4,-8(A6)    ;berall Wnde?
      BEQ       L0867

      CLR.W     -10(A6)      ;gefunden!

      MOVE.W    -4(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_y(A1)

      MOVE.W    -6(A6),D0
      ASL.W     #7,D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,ply_x(A1)

      MOVEQ     #5,D0
      MOVE.W    -2(A6),D1
      EXT.L     D1
      DIVS      #20,D1
      SUB.W     D1,D0
      ASL.W     #8,D0
      MOVE.W    D0,-20(A6)

      CLR.W     -12(A6)
      BRA       L0866
L0861:MOVE.W    8(A6),D0
      CMP.W     -12(A6),D0
      BEQ       L0865
      MOVE.W    -12(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L0865

      MOVE.W    -12(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_y(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-14(A6)
      TST.W     -14(A6)
      BGE       L0862
      MOVE.W    -14(A6),D0
      NEG.W     D0
      MOVE.W    D0,-14(A6)
L0862:MOVE.W    -12(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      MOVE.W    8(A6),D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_x(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-16(A6)
      TST.W     -16(A6)
      BGE       L0863
      MOVE.W    -16(A6),D0
      NEG.W     D0
      MOVE.W    D0,-16(A6)
L0863:MOVE.W    -14(A6),D0
      CMP.W     -20(A6),D0
      BLT       L0864
      MOVE.W    -16(A6),D0
      CMP.W     -20(A6),D0
      BGE       L0865
L0864:MOVE.W    #1,-10(A6)
      BRA       L0867

L0865:ADDQ.W    #1,-12(A6)
L0866:MOVE.W    -12(A6),D0
      CMP.W     all_players,D0
      BLT       L0861
L0867:ADDQ.W    #1,-2(A6)
L0868:CMPI.W    #666,-2(A6)
      BGE       L0869
      TST.W     -10(A6)         ;gefunden?
      BNE       hunt_ply_pos_loop

L0869:TST.W     -10(A6)         ;gefunden?
      BEQ       L086A
      CLR.W     D0
      BRA       hunt_ply_pos_return
L086A:CLR.W     (A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),-(A7)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       set_object
      ADDQ.L    #6,A7

      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #-1,ply_plist(A0)

      MOVE.W    #$100,(A7)
      JSR       _rnd
      AND.W     #$F8,D0
      MOVE.W    D0,-18(A6)
      CMPI.W    #$40,-18(A6)
      BGE       L086B
      CLR.W     -18(A6)
      BRA       L086E
L086B:CMPI.W    #$80,-18(A6)
      BGE       L086C
      MOVE.W    #64,-18(A6)
      BRA       L086E
L086C:CMPI.W    #$C0,-18(A6)
      BGE       L086D
      MOVE.W    #$80,-18(A6)
      BRA       L086E
L086D:MOVE.W    #$C0,-18(A6)
L086E:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -18(A6),ply_richtung(A0)

      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'k',ply_dronetype(A0)
      BEQ       L086F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'l',ply_dronetype(A0)
      BEQ       L086F
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #'r',ply_dronetype(A0)
      BNE       hunt_ply_pos_done
L086F:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_dronetype(A0,D1.L),D0
      BRA       L0874
L0870:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     36(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     72(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     74(A0)
L0871:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     76(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     34(A0)
L0872:MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     28(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     30(A0)
      MOVE.W    8(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     32(A0)
      BRA       hunt_ply_pos_done
L0873:BRA       hunt_ply_pos_done
      BRA       hunt_ply_pos_done
L0874:CMP.W     #'k',D0
      BEQ       L0870
      CMP.W     #'l',D0
      BEQ.S     L0871
      CMP.W     #'r',D0
      BEQ.S     L0872
      BRA.S     L0873
hunt_ply_pos_done:MOVEQ     #1,D0
      BRA       hunt_ply_pos_return
hunt_ply_pos_return:UNLK      A6
      RTS

init_joystick:LINK      A6,#-4
      MOVE.W    #$22,(A7)               ; Kbdvbase()
      JSR       _xbios
      MOVE.L    D0,KBDVECS_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    (A0),KBDVECS_midivec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    4(A0),KBDVECS_vkbderr_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    8(A0),KBDVECS_vmiderr_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    12(A0),KBDVECS_statvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    16(A0),KBDVECS_mousevec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    20(A0),KBDVECS_clockvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    24(A0),KBDVECS_joyvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    32(A0),KBDVECS_ikbdsys_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    #own_joyvec,24(A0)
      MOVE.W    #21,(A7)
      MOVE.W    #DEV_IKBD,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVE.W    #1,init_joy_flag
      CLR.W     joystick_flag
      UNLK      A6
      RTS

exit_joystick:LINK      A6,#-4
      MOVE.W    #26,(A7)
      MOVE.W    #DEV_IKBD,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    KBDVECS_joyvec_ptr,24(A0)
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    16(A0),(A7)
      MOVE.L    #mouse_defaults,-(A7)
      MOVE.W    #1,-(A7)
      CLR.W     -(A7)                   ; Initmous()
      JSR       _xbios
      ADDQ.L    #8,A7
      UNLK      A6
      RTS

ask_joystick:
      LINK      A6,#-4
      MOVE.W    #22,(A7)
      MOVE.W    #DEV_IKBD,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      BRA       L087A
L087A:TST.W     joystick_flag
      BEQ.S     L087A
      CLR.W     joystick_flag
      BTST      #7,joystick+1
      BEQ       L087B
      CLR.W     init_joy_flag
      MOVEA.L   10(A6),A0
      MOVE.W    #1,(A0)
      BRA       L087C
L087B:MOVEA.L   10(A6),A0
      CLR.W     (A0)
L087C:MOVEA.W   8(A6),A0
      MOVE.L    #joystick,D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      BRA       L087D
L087D:UNLK      A6
      RTS

own_joyvec:LINK      A6,#-6
      TST.W     joystick_flag
      BNE       L0881
      CLR.W     -2(A6)
      BRA       L0880
L087F:MOVEA.W   -2(A6),A0
      ADDA.L    #joystick,A0
      MOVEA.W   -2(A6),A1
      ADDA.L    8(A6),A1
      MOVE.B    (A1),(A0)
      ADDQ.W    #1,-2(A6)
L0880:CMPI.W    #2,-2(A6)
      BLT.S     L087F
      MOVE.W    #1,joystick_flag
L0881:UNLK      A6
      RTS

init_mouse:LINK      A6,#-4
      MOVE.W    #$22,(A7)               ; Kbdvbase()
      JSR       _xbios
      MOVE.L    D0,KBDVECS_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    (A0),KBDVECS_midivec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    4(A0),KBDVECS_vkbderr_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    8(A0),KBDVECS_vmiderr_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    12(A0),KBDVECS_statvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    16(A0),KBDVECS_mousevec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    20(A0),KBDVECS_clockvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    24(A0),KBDVECS_joyvec_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    32(A0),KBDVECS_ikbdsys_ptr
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    #own_mousevec,16(A0)
      CLR.W     D0
      MOVE.W    D0,mouse_dy
      MOVE.W    D0,mouse_dx
      UNLK      A6
      RTS

exit_mouse:LINK      A6,#-4
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    KBDVECS_mousevec_ptr,16(A0)
      MOVEA.L   KBDVECS_ptr,A0
      MOVE.L    16(A0),(A7)
      MOVE.L    #mouse_defaults,-(A7)
      MOVE.W    #1,-(A7)
      CLR.W     -(A7)                   ; Initmous()
      JSR       _xbios
      ADDQ.L    #8,A7
      UNLK      A6
      RTS

own_mousevec:LINK      A6,#-6
      MOVEA.L   8(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVE.W    D0,mouse_button
      MOVE.W    #1,-2(A6)
      BRA       L0886
L0885:MOVEA.L   8(A6),A0
      MOVE.W    -2(A6),D1
      EXT.L     D1
      MOVE.B    0(A0,D1.L),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #mouse_button,A1
      ADD.W     D0,(A1)
      ADDQ.W    #1,-2(A6)
L0886:CMPI.W    #3,-2(A6)
      BLT.S     L0885
      UNLK      A6
      RTS




dm_calc_blick:LINK      A6,#-8
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    12(A6),D0
      SUB.W     8(A6),D0
      MOVE.W    D0,-2(A6)
      MOVE.W    D0,calc_tab+0*68+0
      MOVE.W    14(A6),D0
      SUB.W     10(A6),D0
      MOVE.W    D0,-4(A6)
      MOVE.W    D0,calc_tab+0*68+2
      MOVE.W    16(A6),D0
      SUB.W     8(A6),D0
      MOVE.W    D0,-6(A6)
      MOVE.W    D0,calc_tab+9*68-4
      MOVE.W    18(A6),D0
      SUB.W     10(A6),D0
      MOVE.W    D0,-8(A6)
      MOVE.W    D0,calc_tab+9*68-2

      TST.W     20(A6)
      BNE       L0888
      MOVE.W    -6(A6),calc_tab+8*68+0
      MOVE.W    -4(A6),calc_tab+8*68+2
      MOVE.W    -2(A6),calc_tab+1*68-4
      MOVE.W    -8(A6),calc_tab+1*68-2
      BRA       L0889
L0888:MOVE.W    -2(A6),calc_tab+8*68+0
      MOVE.W    -8(A6),calc_tab+8*68+2
      MOVE.W    -6(A6),calc_tab+1*68-4
      MOVE.W    -4(A6),calc_tab+1*68-2
L0889:

      MOVE.W    22(A6),(A7)
      MOVE.L    #calc_tab+0*68+2,-(A7)
      MOVE.L    #calc_tab+0*68+0,-(A7)
      JSR       sincos
      ADDQ.L    #8,A7

      MOVE.W    22(A6),(A7)
      MOVE.L    #calc_tab+8*68+2,-(A7)
      MOVE.L    #calc_tab+8*68+0,-(A7)
      JSR       sincos
      ADDQ.L    #8,A7

      MOVE.W    22(A6),(A7)
      MOVE.L    #calc_tab+1*68-2,-(A7)
      MOVE.L    #calc_tab+1*68-4,-(A7)
      JSR       sincos
      ADDQ.L    #8,A7

      MOVE.W    22(A6),(A7)
      MOVE.L    #calc_tab+9*68-2,-(A7)
      MOVE.L    #calc_tab+9*68-4,-(A7)
      JSR       sincos
      ADDQ.L    #8,A7

      MOVEQ     #8,D4
      BRA       L088D
L088A:MOVE.W    D4,D5
      BRA       L088C
L088B:MOVEA.W   D5,A0
      SUBA.W    D4,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #calc_tab,D1
      MOVE.W    calc_tab+0*68+0(A0,D1.L),D0
      MOVEA.W   D5,A1
      ADDA.W    D4,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    calc_tab+0*68+0(A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVEA.W   D5,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    D0,calc_tab+0*68+0(A1)

      MOVEA.W   D5,A0
      SUBA.W    D4,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #calc_tab,D1
      MOVE.W    calc_tab+0*68+2(A0,D1.L),D0
      MOVEA.W   D5,A1
      ADDA.W    D4,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    calc_tab+0*68+2(A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVEA.W   D5,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    D0,calc_tab+0*68+2(A1)

      MOVEA.W   D5,A0
      SUBA.W    D4,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #calc_tab,A0
      MOVE.W    8*68+0(A0),D0
      MOVEA.W   D5,A1
      ADDA.W    D4,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    8*68+0(A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVEA.W   D5,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    D0,8*68+0(A1)

      MOVEA.W   D5,A0
      SUBA.W    D4,A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #calc_tab,A0
      MOVE.W    8*68+2(A0),D0
      MOVEA.W   D5,A1
      ADDA.W    D4,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    8*68+2(A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVEA.W   D5,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #calc_tab,A1
      MOVE.W    D0,8*68+2(A1)

      MOVE.W    D4,D0
      ADD.W     D4,D0
      ADD.W     D0,D5
L088C:CMP.W     #16,D5
      BLT       L088B
      ASR.W     #1,D4
L088D:TST.W     D4
      BNE       L088A

      CLR.W     D5
      BRA       L0893
L088E:MOVEQ     #4,D6
      BRA       L0892
L088F:MOVE.W    D6,D7
      BRA       L0891
L0890:MOVE.W    D7,D0
      SUB.W     D6,D0
      MULS      #68,D0
      MOVE.W    D5,D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      MOVEA.L   D0,A0
      MOVE.L    #calc_tab,D1
      MOVE.W    0(A0,D1.L),D0
      MOVE.W    D7,D1
      ADD.W     D6,D1
      MULS      #68,D1
      MOVE.W    D5,D2
      EXT.L     D2
      ASL.L     #2,D2
      ADD.L     D2,D1
      ADD.L     #calc_tab,D1
      MOVEA.L   D1,A1
      MOVE.W    (A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVE.W    D7,D1
      MULS      #68,D1
      MOVE.W    D5,D2
      EXT.L     D2
      ASL.L     #2,D2
      ADD.L     D2,D1
      ADD.L     #calc_tab,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,(A1)
      MOVE.W    D7,D0
      SUB.W     D6,D0
      MULS      #68,D0
      MOVE.W    D5,D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      MOVEA.L   D0,A0
      MOVE.L    #calc_tab,D1
      MOVE.W    2(A0,D1.L),D0
      MOVE.W    D7,D1
      ADD.W     D6,D1
      MULS      #68,D1
      MOVE.W    D5,D2
      EXT.L     D2
      ASL.L     #2,D2
      ADD.L     D2,D1
      ADD.L     #calc_tab,D1
      MOVEA.L   D1,A1
      MOVE.W    2(A1),D1
      ADD.W     D1,D0
      ASR.W     #1,D0
      MOVE.W    D7,D1
      MULS      #68,D1
      MOVE.W    D5,D2
      EXT.L     D2
      ASL.L     #2,D2
      ADD.L     D2,D1
      ADD.L     #calc_tab,D1
      MOVEA.L   D1,A1
      MOVE.W    D0,2(A1)
      MOVE.W    D6,D0
      ADD.W     D6,D0
      ADD.W     D0,D7
L0891:CMP.W     #8,D7
      BLT       L0890
      ASR.W     #1,D6
L0892:TST.W     D6
      BNE       L088F
      ADDQ.W    #1,D5
L0893:CMP.W     #16,D5
      BLE       L088E
      TST.L     (A7)+
      MOVEM.L   (A7)+,D4-D7
      UNLK      A6
      RTS

draw_mazes_f:LINK      A6,#-12
      MOVE.W    8(A6),D0
      MULS      #68,D0
      MOVE.W    10(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      ADD.L     #calc_tab,D0
      MOVEA.L   D0,A0
      MOVE.W    (A0),-2(A6)
      MOVE.W    2(A0),-4(A6)

      MOVE.W    12(A6),D0
      MULS      #68,D0
      MOVE.W    14(A6),D1
      EXT.L     D1
      ASL.L     #2,D1
      ADD.L     D1,D0
      ADD.L     #calc_tab,D0
      MOVEA.L   D0,A0
      MOVE.W    (A0),-6(A6)
      MOVE.W    2(A0),-8(A6)

      MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #2,(A7)
      JSR       draw_mazes_wall_position
      ADDA.L    #12,A7
      TST.W     D0
      BEQ       L0895

      MOVE.L    A6,(A7)             ;H1
      SUBQ.L    #4,(A7)
      MOVE.L    A6,-(A7)            ;X1
      SUBQ.L    #2,(A7)
      JSR       calc_to_koord
      ADDQ.L    #4,A7

      MOVE.L    A6,(A7)             ;H2
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)            ;X2
      SUBQ.L    #6,(A7)
      JSR       calc_to_koord
      ADDQ.L    #4,A7

      MOVE.W    18(A6),(A7)         ;Brightness of the wall
      MOVE.W    16(A6),-(A7)        ;Color
      MOVE.W    -8(A6),-(A7)        ;H2
      MOVE.W    -6(A6),-(A7)        ;X2
      MOVE.W    -4(A6),-(A7)        ;H1
      MOVE.W    -2(A6),-(A7)        ;X1
      JSR       set_wand
      ADDA.L    #10,A7
      BRA       L0896
L0895:MOVEQ     #1,D0
      BRA       L0896
L0896:UNLK      A6
      RTS

clear_table_size:LINK      A6,#-4
      CLR.W     table_size
      UNLK      A6
      RTS

set_wand:LINK      A6,#-10
      MOVE.W    8(A6),D0
      CMP.W     12(A6),D0
      BGT       L0899
      MOVE.W    8(A6),-4(A6)
      MOVE.W    12(A6),-6(A6)
      BRA       L089A
L0899:MOVE.W    12(A6),-4(A6)
      MOVE.W    8(A6),-6(A6)
L089A:TST.W     18(A6)
      BEQ       L089C
      MOVE.W    -6(A6),(A7)
      CLR.W     -(A7)
      JSR       chk_obj_visibl
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L089B
      MOVEQ     #1,D0
      BRA       L089F
L089B:BRA       L089D
L089C:MOVE.W    window_width,(A7)
      MOVE.W    window_width2,D0
      ADD.W     D0,(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       chk_obj_visibl
      ADDQ.L    #2,A7
      TST.W     D0
      BEQ       L089D
      MOVEQ     #1,D0
      BRA       L089F
L089D:MOVE.W    -6(A6),(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       chk_obj_visibl
      ADDQ.L    #2,A7
      TST.W     D0
      BNE       L089E
      MOVE.W    -6(A6),(A7)
      MOVE.W    -4(A6),-(A7)
      JSR       to_obj_table
      ADDQ.L    #2,A7
      MOVE.W    14(A6),(A7)         ;H2
      MOVE.W    12(A6),-(A7)        ;X2
      MOVE.W    10(A6),-(A7)        ;H1
      MOVE.W    8(A6),-(A7)         ;X1
      MOVE.W    16(A6),-(A7)        ;Color
      MOVE.W    #1,-(A7)            ;WAND
      JSR       to_draw_list
      ADDA.L    #10,A7
L089E:CLR.W     D0
      BRA       L089F
L089F:UNLK      A6
      RTS

chk_obj_visibl:LINK      A6,#-10    ;testen, ob das Objekt (X1,X2) sichtbar ist (D0<>0)
      MOVE.W    window_width,D0
      ADD.W     window_width2,D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-6(A6)
      TST.W     10(A6)
      BGE       L08A1
      MOVEQ     #1,D0
      BRA       L08A9
L08A1:MOVE.W    8(A6),D0
      CMP.W     -6(A6),D0
      BLE       L08A2
      MOVEQ     #1,D0
      BRA       L08A9
L08A2:TST.W     8(A6)
      BGE       L08A3
      CLR.W     8(A6)
L08A3:MOVE.W    10(A6),D0
      CMP.W     -6(A6),D0
      BLE       L08A4
      MOVE.W    -6(A6),10(A6)
L08A4:CLR.W     -4(A6)
      CLR.W     -2(A6)
      BRA       L08A7
L08A5:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #table_list,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     8(A6),D0
      BGT       L08A6
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #table_list,D1
      MOVE.W    2(A0,D1.L),D0
      CMP.W     10(A6),D0
      BLT       L08A6
      MOVE.W    #1,-4(A6)
      BRA       L08A8
L08A6:ADDQ.W    #1,-2(A6)
L08A7:MOVE.W    -2(A6),D0
      CMP.W     table_size,D0
      BLT.S     L08A5
L08A8:MOVE.W    -4(A6),D0
      BRA       L08A9
L08A9:UNLK      A6
      RTS

check_full_obj:LINK      A6,#-4
      CMPI.W    #1,table_size
      BNE       L08AB
      TST.W     table_list
      BNE       L08AB
      MOVE.W    window_width,D0
      ADD.W     window_width2,D0
      CMP.W     table_list+2,D0
      BEQ       L08AC
L08AB:CLR.W     D0
      BRA       L08AD
L08AC:MOVEQ     #1,D0
L08AD:BRA       L08AE
L08AE:UNLK      A6
      RTS

to_obj_table:LINK      A6,#-16
      MOVE.L    A6,(A7)

      SUBQ.L    #6,(A7)         ;foundxleftFlag
      CLR.W     -(A7)
      MOVE.W    8(A6),-(A7)     ;xleft
      JSR       hunt_obj_pos
      ADDQ.L    #4,A7
      MOVE.W    D0,-2(A6)       ;xleftindex

      MOVE.L    A6,(A7)          ;foundxrightflag
      SUBQ.L    #8,(A7)
      MOVE.W    -2(A6),-(A7)       ;xleftindex
      MOVE.W    10(A6),-(A7)       ;xright
      JSR       hunt_obj_pos
      ADDQ.L    #4,A7
      MOVE.W    D0,-4(A6)       ;xrightIndex

      TST.W     -6(A6)         ;foundxleftFlag
      BEQ       L08B0
      MOVEA.W   -2(A6),A0       ;xleftindex
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #table_list,D1
      MOVE.W    0(A0,D1.L),D0
      BRA       L08B1
L08B0:MOVE.W    8(A6),D0     ;xleft
L08B1:MOVE.W    D0,-10(A6)      ;newxleft

      TST.W     -8(A6)          ;foundxrightflag
      BEQ       L08B2
      MOVEA.W   -4(A6),A0       ;xrightIndex
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #table_list,A0
      MOVE.W    2(A0),-12(A6)     ;newxright
      MOVE.W    -4(A6),(A7)       ;xrightIndex
      SUBQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)       ;xleftindex
      JSR       ins_obj_table
      ADDQ.L    #2,A7
      BRA       L08B3

L08B2:MOVE.W    10(A6),-12(A6)     ;newxright = xright
      MOVE.W    -4(A6),(A7)       ;xrightIndex
      SUBQ.W    #1,(A7)
      MOVE.W    -2(A6),-(A7)       ;xleftindex
      ADDQ.W    #1,(A7)
      JSR       ins_obj_table
      ADDQ.L    #2,A7

L08B3:MOVEA.W   -2(A6),A0       ;xleftindex
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #table_list,A0
      MOVE.W    -10(A6),(A0)      ;newxleft
      MOVE.W    -12(A6),2(A0)     ;newxright
      UNLK      A6
      RTS

hunt_obj_pos:LINK      A6,#-6
      MOVEA.L   12(A6),A0
      CLR.W     (A0)
      MOVE.W    10(A6),-2(A6)
      BRA       L08B8
L08B5:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #table_list,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     8(A6),D0
      BLE       L08B6
      BRA       L08B9
L08B6:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #table_list,D1
      MOVE.W    2(A0,D1.L),D0
      CMP.W     8(A6),D0
      BLT       L08B7
      MOVEA.L   12(A6),A0
      MOVE.W    #1,(A0)
      BRA       L08B9
L08B7:ADDQ.W    #1,-2(A6)
L08B8:MOVE.W    -2(A6),D0
      CMP.W     table_size,D0
      BLT.S     L08B5
L08B9:MOVE.W    -2(A6),D0
      UNLK      A6
      RTS

ins_obj_table:LINK      A6,#-6
      MOVE.W    10(A6),D0       ;upperIndex
      SUB.W     8(A6),D0        ;lowerIndex
      ADDQ.W    #1,D0
      MOVE.W    D0,-2(A6)       ;width
      TST.W     -2(A6)       ;width
      BLE       L08BE

      ADDQ.W    #1,10(A6)       ;upperIndex
      BRA       L08BD
L08BC:MOVEA.W   8(A6),A0        ;lowerIndex
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #table_list,A0
      MOVEA.W   10(A6),A1       ;upperIndex
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #table_list,A1
      MOVE.W    (A1),(A0)
      MOVE.W    2(A1),2(A0)
      ADDQ.W    #1,8(A6)        ;lowerIndex
      ADDQ.W    #1,10(A6)       ;upperIndex
L08BD:MOVE.W    10(A6),D0       ;upperIndex
      CMP.W     table_size,D0
      BLT.S     L08BC
      MOVE.W    8(A6),table_size        ;lowerIndex
      BRA       L08C1

L08BE:TST.W     -2(A6)       ;width
      BGE       L08C1
      MOVE.W    table_size,10(A6)       ;upperIndex
      BRA       L08C0
L08BF:MOVEA.W   10(A6),A0       ;upperIndex
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #table_list,A0
      MOVEA.W   10(A6),A1       ;upperIndex
      SUBQ.W    #1,A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #table_list,A1
      MOVE.W    (A1),(A0)
      MOVE.W    2(A1),2(A0)
      SUBQ.W    #1,10(A6)       ;upperIndex
L08C0:MOVE.W    10(A6),D0       ;upperIndex
      CMP.W     8(A6),D0        ;lowerIndex
      BGE.S     L08BF
      ADDQ.W    #1,table_size

L08C1:UNLK      A6
      RTS


draw_mazes_calc_angle:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D6        ;x1
      SUB.W     12(A6),D6       ;x2
      MOVE.W    14(A6),D7       ;y2
      SUB.W     10(A6),D7       ;y1
      MOVE.W    8(A6),D0        ;x1
      MULS      D7,D0
      MOVE.L    D0,D4
      MOVE.W    10(A6),D0       ;y1
      MULS      D6,D0
      ADD.L     D0,D4
      CMPI.W    #1,16(A6)       ;dir
      BNE       L08C4
      MOVE.W    D7,D5
      ADD.W     D6,D5
      BEQ       L08C3
      MOVE.L    D4,D0
      DIVS      D5,D0
      EXT.L     D0
      MOVEA.L   22(A6),A1
      MOVE.W    D0,(A1)
      MOVEA.L   18(A6),A1
      MOVE.W    D0,(A1)
      MOVEQ     #1,D0
      BRA       L08C8
L08C3:BRA       L08C7
L08C4:CMPI.W    #-1,16(A6)       ;dir
      BNE       L08C6
      MOVE.W    D6,D5
      SUB.W     D7,D5
      BEQ       L08C5
      MOVE.L    D4,D0
      DIVS      D5,D0
      EXT.L     D0
      MOVEA.L   22(A6),A1
      MOVE.W    D0,(A1)
      NEG.W     D0
      MOVEA.L   18(A6),A1
      MOVE.W    D0,(A1)
      MOVEQ     #1,D0
      BRA       L08C8
L08C5:BRA       L08C7
L08C6:TST.W     D7
      BEQ       L08C7
      MOVE.L    D4,D0
      DIVS      D7,D0
      EXT.L     D0
      MOVEA.L   18(A6),A1
      MOVE.W    D0,(A1)
      MOVEQ     #1,D0
      BRA       L08C8
L08C7:CLR.W     D0
      BRA       L08C8
L08C8:TST.L     (A7)+
      MOVEM.L   (A7)+,D4-D7
      UNLK      A6
      RTS


draw_mazes_h:LINK      A6,#-8
      MOVE.W    8(A6),D0
      CMP.W     16(A6),D0
      BGT       L08CD
      MOVE.W    8(A6),D0
      CMP.W     12(A6),D0
      BGT       L08CA
      MOVE.W    12(A6),D0
      CMP.W     16(A6),D0
      BLE       L08CB
L08CA:CLR.W     D0
      BRA       L08CC
L08CB:MOVEQ     #1,D0
L08CC:BRA       L08D0

L08CD:MOVE.W    16(A6),D0
      CMP.W     12(A6),D0
      BGT       L08CE
      MOVE.W    12(A6),D0
      CMP.W     8(A6),D0
      BLE       L08CF
L08CE:CLR.W     D0
      BRA       L08D0
L08CF:MOVEQ     #1,D0
L08D0:MOVE.W    D0,-2(A6)


      MOVE.W    10(A6),D0
      CMP.W     18(A6),D0
      BGT       L08D4
      MOVE.W    10(A6),D0
      CMP.W     14(A6),D0
      BGT       L08D1
      MOVE.W    14(A6),D0
      CMP.W     18(A6),D0
      BLE       L08D2
L08D1:CLR.W     D0
      BRA       L08D3
L08D2:MOVEQ     #1,D0
L08D3:BRA       L08D7
L08D4:MOVE.W    18(A6),D0
      CMP.W     14(A6),D0
      BGT       L08D5
      MOVE.W    14(A6),D0
      CMP.W     10(A6),D0
      BLE       L08D6
L08D5:CLR.W     D0
      BRA       L08D7
L08D6:MOVEQ     #1,D0
L08D7:MOVE.W    D0,-4(A6)

      TST.W     -2(A6)
      BEQ       L08D8
      TST.W     -4(A6)
      BNE       L08D9
L08D8:CLR.W     D0
      BRA       draw_mazes_h_return
L08D9:MOVEQ     #1,D0

draw_mazes_h_return:UNLK      A6
      RTS


draw_mazes_wall_position:LINK      A6,#-14
      MOVEA.L   12(A6),A0
      TST.W     (A0)
      BLT       L08DF
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   12(A6),A1
      MOVE.W    (A1),D1
      NEG.W     D1
      CMP.W     D1,D0
      BLT       L08DD
      CLR.W     D0
      BRA       L08DE
L08DD:MOVEQ     #1,D0
L08DE:BRA       L08E1
L08DF:MOVEA.L   8(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   12(A6),A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BLT       L08E0
      CLR.W     D0
      BRA       L08E1
L08E0:MOVEQ     #1,D0
L08E1:MOVE.W    D0,-2(A6)
      MOVEA.L   20(A6),A0
      TST.W     (A0)
      BLT       L08E4
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   20(A6),A1
      MOVE.W    (A1),D1
      NEG.W     D1
      CMP.W     D1,D0
      BLT       L08E2
      CLR.W     D0
      BRA       L08E3
L08E2:MOVEQ     #1,D0
L08E3:BRA       L08E6
L08E4:MOVEA.L   16(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   20(A6),A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BLT       L08E5
      CLR.W     D0
      BRA       L08E6
L08E5:MOVEQ     #1,D0
L08E6:MOVE.W    D0,-4(A6)
      TST.W     -2(A6)
      BEQ       L08E7
      TST.W     -4(A6)
      BEQ       L08E7
      MOVEQ     #1,D0
      BRA       L08F4
      BRA       L08F4
L08E7:TST.W     -2(A6)
      BNE       L08F0
      TST.W     -4(A6)
      BNE       L08F0
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   20(A6),A1
      MULS      (A1),D0
      BLT       L08E8
      CLR.W     D0
      BRA       L08F4
      BRA       L08EF
L08E8:MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      CLR.W     -(A7)
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_calc_angle
      ADDA.L    #14,A7
      TST.W     D0
      BEQ       L08EE
      TST.W     -6(A6)
      BLT       L08E9
      CLR.W     D0
      BRA       L08F4
      BRA       L08ED
L08E9:MOVEA.L   12(A6),A0
      MOVE.W    (A0),D0
      MOVEA.L   20(A6),A1
      MOVE.W    (A1),D1
      CMP.W     D1,D0
      BLE       L08EA
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-10(A6)
      MOVEA.L   8(A6),A0
      MOVEA.L   16(A6),A1
      MOVE.W    (A1),(A0)
      MOVEA.L   16(A6),A0
      MOVE.W    -10(A6),(A0)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-10(A6)
      MOVEA.L   12(A6),A0
      MOVEA.L   20(A6),A1
      MOVE.W    (A1),(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    -10(A6),(A0)
L08EA:MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.W    #1,-(A7)
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_calc_angle
      ADDA.L    #14,A7
      TST.W     D0
      BEQ       L08EB
      MOVEA.L   8(A6),A0
      MOVE.W    -6(A6),(A0)
      MOVEA.L   12(A6),A0
      MOVE.W    -8(A6),(A0)
L08EB:MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.W    #-1,-(A7)
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_calc_angle
      ADDA.L    #14,A7
      TST.W     D0
      BEQ       L08EC
      MOVEA.L   16(A6),A0
      MOVE.W    -6(A6),(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    -8(A6),(A0)
L08EC:MOVEQ     #1,D0
      BRA       L08F4
L08ED:BRA       L08EF
L08EE:CLR.W     D0
      BRA       L08F4
L08EF:BRA       L08F4
L08F0:TST.W     -4(A6)
      BEQ       L08F1
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-10(A6)
      MOVEA.L   8(A6),A0
      MOVEA.L   16(A6),A1
      MOVE.W    (A1),(A0)
      MOVEA.L   16(A6),A0
      MOVE.W    -10(A6),(A0)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-10(A6)
      MOVEA.L   12(A6),A0
      MOVEA.L   20(A6),A1
      MOVE.W    (A1),(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    -10(A6),(A0)
L08F1:MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.W    #1,-(A7)
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_calc_angle
      ADDA.L    #14,A7
      TST.W     D0
      BEQ       L08F2
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_h
      ADDA.L    #10,A7
      TST.W     D0
      BEQ       L08F2
      MOVEA.L   16(A6),A0
      MOVE.W    -6(A6),(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    -8(A6),(A0)
L08F2:MOVE.L    A6,(A7)
      SUBQ.L    #8,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.W    #-1,-(A7)
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_calc_angle
      ADDA.L    #14,A7
      TST.W     D0
      BEQ       L08F3
      MOVEA.L   20(A6),A0
      MOVE.W    (A0),(A7)
      MOVEA.L   16(A6),A0
      MOVE.W    (A0),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       draw_mazes_h
      ADDA.L    #10,A7
      TST.W     D0
      BEQ       L08F3
      MOVEA.L   16(A6),A0
      MOVE.W    -6(A6),(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    -8(A6),(A0)
L08F3:MOVEQ     #1,D0
      BRA       L08F4
L08F4:UNLK      A6
      RTS

fast_sin:LINK      A6,#-4
      ANDI.W    #$FF,10(A6)
      CMPI.W    #128,10(A6)
      BLT       L08F6
      SUBI.W    #128,10(A6)
      MOVE.W    8(A6),D0
      NEG.W     D0
      MOVE.W    D0,8(A6)
L08F6:CMPI.W    #64,10(A6)
      BLT       L08F7
      MOVE.W    #128,D0
      SUB.W     10(A6),D0
      MOVE.W    D0,10(A6)
L08F7:MOVE.W    #256,(A7)
      MOVEA.L   sinus_table,A0
      MOVE.W    10(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      MOVE.W    0(A0,D1.L),-(A7)
      MOVE.W    8(A6),-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      BRA       L08F8
L08F8:UNLK      A6
      RTS

fast_cos:LINK      A6,#-4
      MOVE.W    #64,(A7)
      MOVE.W    10(A6),D0
      SUB.W     D0,(A7)
      MOVE.W    8(A6),-(A7)
      JSR       fast_sin
      ADDQ.L    #2,A7
      BRA       L08FA
L08FA:UNLK      A6
      RTS

;Y-Delta=COS(X)-SIN(Y), X-Delta=SIN(X)+COS(Y)
;angle (0..255)
sincos:LINK      A6,#-6

      MOVE.W    16(A6),(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       fast_sin
      ADDQ.L    #2,A7
      MOVE.W    D0,-(A7)
      MOVE.W    16(A6),-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       fast_cos
      ADDQ.L    #4,A7
      SUB.W     (A7)+,D0
      MOVE.W    D0,-2(A6)

      MOVE.W    16(A6),(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       fast_sin
      ADDQ.L    #2,A7
      MOVE.W    D0,-(A7)
      MOVE.W    16(A6),-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       fast_cos
      ADDQ.L    #4,A7
      ADD.W     D0,(A7)

      MOVEA.L   12(A6),A0
      MOVE.W    (A7)+,(A0)
      MOVEA.L   8(A6),A0
      MOVE.W    -2(A6),(A0)
      UNLK      A6
      RTS

init_live_shape:LINK      A6,#-4
      MOVE.L    #live_shape_img,live_shape_ptr
      TST.W     screen_rez
      BEQ       L08FD
      MOVE.L    #200,(A7)
      MOVE.L    live_shape_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7
L08FD:UNLK      A6
      RTS

update_smily:LINK      A6,#-10
      MOVE.W    own_number,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_lives(A0),-6(A6)
      MOVE.W    live_wind_off,(A7)
      JSR       set_screen_offs

      MOVE.W    #160,D0
      MOVE.W    -6(A6),D1
      MULS      #40,D1
      SUB.W     D1,D0
      MOVE.W    D0,-4(A6)

      TST.W     screen_rez
      BEQ       L08FF
      ASL       -4(A6)
L08FF:

      CLR.W     -2(A6)
      BRA       L0905
L0900:TST.W     screen_rez
      BEQ       L0901
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.W    set_shape_face_offset_table+24,D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     shape_face_ptr,D0
      MOVE.L    D0,-(A7)
      MOVE.W    #38,-(A7)
      MOVE.W    #4,-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      MOVE.L    sw_farbfll_tab,(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.W    -4(A6),D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     live_shape_ptr,D0
      MOVE.L    D0,-(A7)
      MOVE.W    #38,-(A7)
      MOVE.W    #4,-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0902
L0901:MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.W    set_shape_face_offset_table+24,D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     shape_face_ptr,D0
      MOVE.L    D0,-(A7)
      MOVE.W    #19,-(A7)
      MOVE.W    #2,-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
      MOVEA.W   own_number,A0
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.W    -4(A6),D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     live_shape_ptr,D0
      MOVE.L    D0,-(A7)
      MOVE.W    #19,-(A7)
      MOVE.W    #2,-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0902:TST.W     -6(A6)
      BNE       L0904
      TST.W     screen_rez
      BEQ       L0903
      MOVE.L    sw_fllmuster,(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #4,-(A7)
      MOVE.L    live_shape_ptr,-(A7)
      ADDI.L    #$320,(A7)
      MOVE.W    #38,-(A7)
      MOVE.W    #4,-(A7)
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0904
L0903:MOVE.L    col_farb2jmptab,(A7)
      MOVE.W    #20,-(A7)
      MOVE.W    #2,-(A7)
      MOVE.L    live_shape_ptr,-(A7)
      ADDI.L    #400,(A7)
      MOVE.W    #19,-(A7)
      MOVE.W    #2,-(A7)
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0904:JSR       switch_logbase
      ADDQ.W    #1,-2(A6)
L0905:CMPI.W    #2,-2(A6)
      BLT       L0900
      MOVE.W    main_wind_off,(A7)
      JSR       set_screen_offs
      UNLK      A6
      RTS

clear_draw_list:LINK      A6,#-4
      CLR.W     draw_elem_count
      UNLK      A6
      RTS

to_draw_list:LINK      A6,#-4
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    8(A6),(A0)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    10(A6),2(A0)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    12(A6),4(A0)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    14(A6),6(A0)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    16(A6),8(A0)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      MOVE.W    18(A6),10(A0)
      ADDQ.W    #1,draw_elem_count
      UNLK      A6
      RTS

draw_list:LINK      A6,#-12
      TST.W     screen_rez
      BEQ       draw_list1
      MOVE.W    #2,wand_farb_tab
      MOVE.W    #2,wand_farb_tab+2
draw_list1:TST.W     screen_rez
      BEQ       draw_list2
      JSR       clr_sw_window
      BRA       draw_list3
draw_list2:JSR       clr_cwindow
draw_list3:BRA       draw_list7
draw_list4:
      SUBQ.W    #1,draw_elem_count

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      CMPI.W    #1,(A0)
      BNE       draw_list5

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVEA.L   #draw_elem_list,A1
      MOVEA.W   2(A0,A1.L),A0
      ADDA.L    A0,A0
      MOVE.L    #wand_farb_tab,D1
      MOVE.W    0(A0,D1.L),(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    10(A0,D1.L),D0
      MOVE.W    D0,-8(A6)
      MOVE.W    D0,-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    8(A0,D1.L),D0
      MOVE.W    D0,-6(A6)
      MOVE.W    D0,-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    6(A0,D1.L),D0
      MOVE.W    D0,-4(A6)
      MOVE.W    D0,-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    4(A0,D1.L),D0
      MOVE.W    D0,-2(A6)

      MOVE.W    D0,-(A7)
      JSR       draw_wand
      ADDQ.L    #8,A7
      MOVE.W    -4(A6),(A7)
      MOVE.W    -2(A6),-(A7)
      JSR       draw_vline
      ADDQ.L    #2,A7
      MOVE.W    -8(A6),(A7)
      MOVE.W    -6(A6),-(A7)
      JSR       draw_vline
      ADDQ.L    #2,A7
      BRA       draw_list7

draw_list5:
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      CMPI.W    #2,(A0)
      BNE       draw_list6

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    10(A0,D1.L),(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    6(A0,D1.L),-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    2(A0,D1.L),-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    8(A0,D1.L),-(A7)

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    4(A0,D1.L),-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
      BRA       draw_list7

draw_list6:
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      ADD.L     #draw_elem_list,D0
      MOVEA.L   D0,A0
      CMPI.W    #3,(A0)
      BNE       draw_list7

      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    10(A0,D1.L),(A7)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    6(A0,D1.L),-(A7)
      MOVE.W    #10,-(A7)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    8(A0,D1.L),-(A7)
      MOVE.W    draw_elem_count,D0
      MULS      #12,D0
      MOVEA.L   D0,A0
      MOVE.L    #draw_elem_list,D1
      MOVE.W    4(A0,D1.L),-(A7)
      JSR       set_shape
      ADDQ.L    #8,A7
draw_list7:
      TST.W     draw_elem_count
      BGT       draw_list4
      JSR       switch_screens
      UNLK      A6
      RTS

calc_to_koord:LINK      A6,#0  ;in absolute Koordinaten umrechnen
      MOVEM.L   D5-D7,-(A7)
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),(A7)
      MOVE.W    window_width2,-(A7)
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),-(A7)
      JSR       _muls_divs
      ADDQ.L    #4,A7
      MOVE.W    D0,D7

      MOVE.W    word_per_line,D6
      ASL.W     #8,D6
      MOVEA.L   8(A6),A0
      MOVE.W    (A0),-(A7)
      MOVE.W    D6,D0
      EXT.L     D0
      DIVS      (A7)+,D0
      MOVE.W    D0,D6

      MOVE.W    D7,D0
      NEG.W     D0
      ADD.W     window_width,D0
      MOVEA.L   8(A6),A1
      MOVE.W    D0,(A1)

      MOVE.W    D6,D0
      NEG.W     D0
      MOVEA.L   12(A6),A1
      MOVE.W    D0,(A1)

      TST.L     (A7)+
      MOVEM.L   (A7)+,D6-D7
      UNLK      A6
      RTS

;Wandbegrenzung (Vertikale Linie) ziehen
draw_vline:LINK      A6,#-4
      MOVE.W    window_width,D0
      SUB.W     window_width2,D0
      CMP.W     8(A6),D0
      BGE       L0914
      MOVE.W    window_width,D0
      ADD.W     window_width2,D0
      SUBQ.W    #1,D0
      CMP.W     8(A6),D0
      BLE       L0914
      MOVE.W    10(A6),D0
      CMP.W     window_height2,D0
      BLE       L0912
      MOVE.W    window_height2,10(A6)
L0912:TST.W     screen_rez
      BEQ       L0913
      CLR.W     (A7)
      MOVE.W    8(A6),-(A7)
      MOVE.W    window_height,-(A7)
      MOVE.W    10(A6),D0
      ADD.W     D0,(A7)
      MOVE.W    window_height,-(A7)
      MOVE.W    10(A6),D0
      SUB.W     D0,(A7)
      JSR       dr_sw_vline
      ADDQ.L    #6,A7
      BRA       L0914
L0913:CLR.W     (A7)
      MOVE.W    8(A6),-(A7)
      MOVE.W    window_height,-(A7)
      MOVE.W    10(A6),D0
      ADD.W     D0,(A7)
      MOVE.W    window_height,-(A7)
      MOVE.W    10(A6),D0
      SUB.W     D0,(A7)
      JSR       dr_c_cvline
      ADDQ.L    #6,A7
L0914:UNLK      A6
      RTS

;************************************************************************
;* draw_wand(X1,H1,X2,H2,Farbe) - Wand zeichnen                         *
;* Endlich gefunden: Die Routine, welche eine Wand zeichnet             *
;* Ein paar Erklrungen dazu:                                           *
;* Bei X1 fngt die Mauer an, bei X2 hrt die Mauer auf.                *
;* Die linke Hhe ist H1, die rechte Hhe ist H2.                       *
;* Dabei ist zu beachten, da das Bild 160x100 Punkte gro ist und auch *
;* auf S/W stets in dieser (Farb-)Auslsung gezeichnet wird.            *
;* Man hat sich eine Mauer als Spiegelung an der Halbierenden des Bildes*
;* vorzustellen, d.h. zu einer X-Achse bei Y=50.                        *
;************************************************************************
draw_wand:LINK      A6,#0
      MOVEM.L   D4-D7,-(A7)
      TST.W     screen_rez
      BEQ       L0916
      ASR       10(A6)                  ;H1
      ASR       14(A6)                  ;H2
L0916:
      MOVE.W    10(A6),D0               ;H1
      CMP.W     14(A6),D0               ;H2
      BLE       L0917
      MOVE.W    10(A6),D7               ;H1
      MOVE.W    14(A6),10(A6)           ;H1 = H2
      MOVE.W    D7,14(A6)               ;H2
      MOVE.W    8(A6),D7                ;X1
      MOVE.W    12(A6),8(A6)            ;X1 = X2
      MOVE.W    D7,12(A6)               ;X2
L0917:
      CMPI.W    #160,8(A6)              ;X1
      BNE       L0918
      SUBQ.W    #1,8(A6)                ;X1
L0918:
      CMPI.W    #160,12(A6)             ;X2
      BNE       L0919
      SUBQ.W    #1,12(A6)               ;X2
L0919:
      CMPI.W    #50,10(A6)              ;H1
      BLE       L091A
      MOVE.W    #50,10(A6)              ;H1
L091A:

      TST.W     screen_rez
      BEQ       L091B
      MOVE.W    16(A6),(A7)             ;color
      MOVE.W    10(A6),-(A7)            ;H1
      ADDI.W    #50,(A7)
      MOVE.W    12(A6),-(A7)            ;X2
      MOVE.W    #50,-(A7)
      MOVE.W    10(A6),D0               ;H1
      SUB.W     D0,(A7)
      MOVE.W    8(A6),-(A7)             ;X1
      JSR       dr_sw_cbox
      ADDQ.L    #8,A7
      BRA       L091C
L091B:MOVE.W    16(A6),(A7)             ;color
      MOVE.W    10(A6),-(A7)            ;H1
      ADDI.W    #50,(A7)
      MOVE.W    12(A6),-(A7)            ;X2
      MOVE.W    #50,-(A7)
      MOVE.W    10(A6),D0               ;H1
      SUB.W     D0,(A7)
      MOVE.W    8(A6),-(A7)             ;X1
      JSR       dr_c_box
      ADDQ.L    #8,A7
L091C:

      MOVE.W    12(A6),D6               ;X2
      SUB.W     8(A6),D6                ;X1
      ASL.W     #4,D6
      MOVE.W    14(A6),-(A7)            ;H2
      MOVE.W    10(A6),D0               ;H1
      SUB.W     D0,(A7)
      MOVE.W    D6,D0
      EXT.L     D0
      DIVS      (A7)+,D0
      MOVE.W    D0,D6
      MOVE.W    8(A6),D7                ;X1
      ASL.W     #4,D7
      MOVE.W    D6,D0
      ASR.W     #1,D0
      ADD.W     D0,D7
      ADDQ.W    #8,D7

      BRA       L0920
L091D:CMPI.W    #50,10(A6)             ;H1
      BGT       L0921
      MOVE.W    D7,D5
      ASR.W     #4,D5
      TST.W     screen_rez
      BEQ       L091E
      MOVE.W    16(A6),(A7)            ;color
      MOVE.W    #50,-(A7)
      MOVE.W    10(A6),D0              ;H1
      SUB.W     D0,(A7)                ;y1
      MOVE.W    D5,-(A7)               ;x2
      MOVE.W    12(A6),-(A7)           ;x1:X2
      JSR       dr_sw_chline
      ADDQ.L    #6,A7
      MOVE.W    16(A6),(A7)            ;color
      MOVE.W    10(A6),-(A7)           ;H1
      ADDI.W    #50,(A7)
      MOVE.W    D5,-(A7)
      MOVE.W    12(A6),-(A7)           ;X2
      JSR       dr_sw_chline
      ADDQ.L    #6,A7
      BRA       L091F
L091E:MOVE.W    16(A6),(A7)            ;color
      MOVE.W    #50,-(A7)
      MOVE.W    10(A6),D0              ;H1
      SUB.W     D0,(A7)
      MOVE.W    D5,-(A7)
      MOVE.W    12(A6),-(A7)           ;X2
      JSR       dr_c_cline
      ADDQ.L    #6,A7
      MOVE.W    16(A6),(A7)            ;color
      MOVE.W    10(A6),-(A7)           ;H1
      ADDI.W    #50,(A7)
      MOVE.W    D5,-(A7)
      MOVE.W    12(A6),-(A7)           ;X2
      JSR       dr_c_cline
      ADDQ.L    #6,A7
L091F:ADD.W     D6,D7
L0920:ADDQ.W    #1,10(A6)              ;H1
      MOVE.W    10(A6),D0              ;H1
      CMP.W     14(A6),D0              ;H2
      BLE       L091D

L0921:TST.L     (A7)+
      MOVEM.L   (A7)+,D5-D7
      UNLK      A6
      RTS



init_faces_shapes:
      LINK      A6,#-28
      CLR.W     D0
      MOVE.W    D0,-16(A6)
      MOVE.W    D0,-14(A6)
      MOVE.W    D0,-12(A6)
      CLR.W     -4(A6)          ; index
      BRA       L092D
L0923:MOVEQ     #24,D0
      SUB.W     -4(A6),D0       ; index
      MOVE.W    D0,-20(A6)

      CMP.W     #16,D0
      BLE       L0924
      MOVE.W    -20(A6),D0
      ADD.W     #-16,D0
      ASL.W     #1,D0
      ADD.W     #16,D0
      MOVE.W    D0,-20(A6)
L0924:
      MOVE.W    -20(A6),D0
      MULS      #40,D0
      EXT.L     D0
      DIVS      #12,D0
      ADDQ.W    #1,D0
      EXT.L     D0
      DIVS      #2,D0
      MOVEA.W   -4(A6),A1          ; index
      ADDA.L    A1,A1
      ADDA.L    #set_shape_tab4,A1
      MOVE.W    D0,(A1)

      MOVE.W    -20(A6),D0
      SUBQ.W    #1,D0
      EXT.L     D0
      DIVS      #8,D0
      ADDQ.W    #1,D0
      MOVE.W    D0,-18(A6)

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      EXT.L     D0
      DIVS      #4,D0
      MOVEA.W   -4(A6),A1          ; index
      ADDA.L    A1,A1
      ADDA.L    #set_shape_scaling_table,A1
      MOVE.W    D0,(A1)
      BNE       L0925
      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      ADDA.L    #set_shape_scaling_table,A0
      MOVE.W    #1,(A0)
L0925:

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_scaling_table,D1
      MOVE.W    0(A0,D1.L),D0
      SUBQ.W    #1,D0
      MOVE.W    D0,-22(A6)
      BNE       L0926
      MOVE.W    #1,-22(A6)
L0926:

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_scaling_table,D1
      MOVE.W    0(A0,D1.L),D0
      EXT.L     D0
      DIVS      #2,D0
      MOVE.W    D0,-24(A6)
      CLR.W     -6(A6)
      BRA       L092C
L0927:MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      MOVE.W    -6(A6),D1
      SUB.W     -24(A6),D1
      MOVEA.W   -4(A6),A2          ; index
      ADDA.L    A2,A2
      ADDA.L    #set_shape_tab4,A2
      MOVE.W    (A2),D2
      SUBQ.W    #1,D2

      MULS      D2,D1
      ASL.W     #1,D1
      EXT.L     D1
      DIVS      -22(A6),D1

      ADD.W     D1,D0
      SUBQ.W    #1,D0
      EXT.L     D0
      DIVS      #2,D0
      MOVE.W    D0,-8(A6)

      CLR.W     -10(A6)
      BRA       L092B
L0928:TST.W     -8(A6)
      BLT       L0929
      MOVEA.L   shape_face_ptr,A0
      MOVE.W    -8(A6),D1
      MULS      -18(A6),D1
      ADD.W     -12(A6),D1
      ADD.W     -10(A6),D1
      EXT.L     D1
      ASL.L     #1,D1
      MOVE.W    0(A0,D1.L),D0
      BRA       L092A
L0929:CLR.W     D0
L092A:MOVE.W    -6(A6),D1
      MULS      -18(A6),D1
      ADD.W     -16(A6),D1
      ADD.W     -10(A6),D1
      MOVEA.W   D1,A1
      ADDA.L    A1,A1
      ADDA.L    #set_shape_tab3,A1
      MOVE.W    D0,(A1)

      ADDQ.W    #1,-10(A6)
L092B:MOVE.W    -10(A6),D0
      CMP.W     -18(A6),D0
      BLT.S     L0928

      ADDQ.W    #1,-6(A6)
L092C:MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_scaling_table,D1
      MOVE.W    0(A0,D1.L),D0
      CMP.W     -6(A6),D0
      BGT       L0927

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      -18(A6),D0
      ADD.W     -12(A6),D0
      MOVEA.W   -4(A6),A1          ; index
      ADDA.L    A1,A1
      ADDA.L    #set_shape_face_offset_table,A1
      MOVE.W    D0,(A1)
      MOVE.W    D0,-12(A6)

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_scaling_table,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      -18(A6),D0
      ADD.W     -16(A6),D0
      MOVEA.W   -4(A6),A1          ; index
      ADDA.L    A1,A1
      ADDA.L    #set_shape_tab2,A1
      MOVE.W    D0,(A1)
      MOVE.W    D0,-16(A6)

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      -18(A6),D0
      ADD.W     -14(A6),D0
      EXT.L     D0
      MOVEA.W   -4(A6),A1          ; index
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #set_shape_tab6,A1
      MOVE.L    D0,(A1)

      MOVEA.W   -4(A6),A0          ; index
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      -18(A6),D0
      MULS      #20,D0
      ADD.W     D0,-14(A6)

      ADDQ.W    #1,-4(A6)          ; index
L092D:CMPI.W    #24,-4(A6)          ; index
      BLT       L0923

      TST.W     screen_rez
      BEQ       L092E
      JSR       init_faces_shapes_sw
L092E:UNLK      A6
      RTS



init_faces_shapes_sw:LINK      A6,#-6
      CLR.W     -2(A6)
      BRA       L0931
L0930:MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_face_offset_table,A0
      ASL       (A0)

      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_tab6,A0
      MOVE.L    (A0),D0
      ASL.L     #1,D0
      MOVE.L    D0,(A0)

      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_tab2,A0
      ASL       (A0)
      ADDQ.W    #1,-2(A6)
L0931:CMPI.W    #24,-2(A6)
      BLT.S     L0930

      MOVE.L    #376,(A7)
      MOVE.L    #set_shape_tab3,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7

      MOVE.L    #33306,(A7)
      MOVE.L    shape_face_ptr,-(A7)
      JSR       convert_sw
      ADDQ.L    #4,A7

      MOVE.L    shape_face_ptr,D0
      ADD.L     #6344,D0
      MOVE.L    D0,shape_ptr
      UNLK      A6
      RTS



convert_sw:LINK      A6,#0
      MOVEM.L   A5/D4-D7,-(A7)
      MOVEA.L   8(A6),A5
      MOVE.L    12(A6),D5
      BRA       L093A
L0933:CLR.W     D6
      CLR.W     D7
      BRA       L0936
L0934:MOVE.L    D5,D0
      ASL.L     #1,D0
      MOVE.W    0(A5,D0.L),D0
      MOVE.W    D7,D1
      ASR.W     D1,D0
      AND.W     #1,D0
      BEQ       L0935
      MOVEQ     #3,D0
      MOVE.W    D7,D1
      ADD.W     D7,D1
      ASL.W     D1,D0
      OR.W      D0,D6
L0935:ADDQ.W    #1,D7
L0936:CMP.W     #8,D7
      BLT.S     L0934
      MOVEA.L   D5,A0
      ADDA.L    D5,A0
      ADDQ.L    #1,A0
      ADDA.L    A0,A0
      ADDA.L    A5,A0
      MOVE.W    D6,(A0)
      CLR.W     D6
      CLR.W     D7
      BRA       L0939
L0937:MOVE.L    D5,D0
      ASL.L     #1,D0
      MOVE.W    0(A5,D0.L),D0
      MOVE.W    D7,D1
      ADDQ.W    #8,D1
      ASR.W     D1,D0
      AND.W     #1,D0
      BEQ       L0938
      MOVEQ     #3,D0
      MOVE.W    D7,D1
      ADD.W     D7,D1
      ASL.W     D1,D0
      OR.W      D0,D6
L0938:ADDQ.W    #1,D7
L0939:CMP.W     #8,D7
      BLT.S     L0937
      MOVEA.L   D5,A0
      ADDA.L    D5,A0
      ADDA.L    A0,A0
      ADDA.L    A5,A0
      MOVE.W    D6,(A0)
L093A:SUBQ.L    #1,D5
      BGE.S     L0933
      TST.L     (A7)+
      MOVEM.L   (A7)+,A5/D5-D7
      UNLK      A6
      RTS

; set_shape(X,Y,sprite(0-19),size(0-100),color(0-15))

set_shape:LINK      A6,#-20
      MOVE.W    window_height,D0
      ADD.W     window_height2,D0
      MOVE.W    D0,-12(A6)          ;maxHeight

      TST.W     screen_rez
      BEQ       L093C
      ASR       10(A6)          ;Y
L093C:

      CMPI.W    #16,10(A6)      ;Y
      BGT       L093D
      MOVEQ     #24,D0
      SUB.W     10(A6),D0      ;Y
      MOVE.W    D0,-4(A6)
      BRA       L093E
L093D:MOVEQ     #8,D0
      MOVE.W    10(A6),D1      ;Y
      ADD.W     #-15,D1
      ASR.W     #1,D1
      SUB.W     D1,D0
      MOVE.W    D0,-4(A6)
L093E:

      MOVE.W    10(A6),D0      ;Y
      SUBQ.W    #1,D0
      ASR.W     #3,D0
      ADDQ.W    #1,D0
      MOVE.W    D0,-8(A6)

      TST.W     screen_rez
      BEQ       L093F
      ASL       -8(A6)
L093F:

      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_scaling_table,A0
      MOVE.W    (A0),-10(A6)	;height

      TST.W     screen_rez
      BEQ       L0940
      ASL       -10(A6)	;height
L0940:MOVE.W    -10(A6),D0	;height
      ASR.W     #1,D0
      ADD.W     D0,14(A6)      ;yHeight

      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_tab2,A0
      MOVE.W    (A0),-2(A6)	;shadowImageOffset

      MOVE.W    14(A6),D0      ;yHeight
      CMP.W     -12(A6),D0          ;maxHeight
      BLE       L0943

      MOVE.W    14(A6),D0      ;yHeight
      SUB.W     -10(A6),D0	;height
      ADDQ.W    #1,D0
      CMP.W     -12(A6),D0          ;maxHeight
      BGT       L0943

      MOVE.W    14(A6),D0      ;yHeight
      SUB.W     -12(A6),D0          ;maxHeight
      EXT.L     D0
      TST.W     screen_rez
      BEQ       L0941
      MOVEQ     #2,D1
      BRA       L0942
L0941:MOVEQ     #1,D1
L0942:DIVS      D1,D0
      MULS      -8(A6),D0
      SUB.W     D0,-2(A6)	;shadowImageOffset

      MOVE.W    14(A6),D0      ;yHeight
      SUB.W     -12(A6),D0          ;maxHeight
      SUB.W     D0,-10(A6)	;height

      MOVE.W    -12(A6),14(A6)      ;maxHeight => yHeight
L0943:TST.W     screen_rez
      BEQ       L0944
      ASR       -10(A6)	;height
L0944:MOVE.W    14(A6),D0      ;yHeight
      CMP.W     -12(A6),D0          ;maxHeight
      BGT       L0946
      TST.W     -10(A6)	;height
      BLE       L0946

      MOVE.W    -2(A6),D0	;shadowImageOffset
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     #set_shape_tab3,D0
      MOVE.L    D0,-16(A6)

      TST.W     screen_rez
      BEQ       L0945
      MOVE.L    sw_fllmuster,(A7)
      MOVE.W    -10(A6),-(A7)	;height
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    14(A6),-(A7)        ;size(0-100)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L0946
L0945:MOVE.L    dr_c_shp_tab2,(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    14(A6),-(A7)        ;size(0-100)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_c_shape
      ADDA.L    #12,A7
L0946:

      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_tab4,A0
      MOVE.W    (A0),-10(A6)

      TST.W     screen_rez
      BEQ       L0947
      MOVE.W    -10(A6),D0
      BRA       L0948
L0947:MOVE.W    -10(A6),D0
      ASR.W     #1,D0
L0948:ADD.W     window_height,D0
      MOVE.W    D0,-6(A6)

      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      ADDA.L    #set_shape_face_offset_table,A0
      MOVE.W    (A0),-2(A6)

      MOVE.W    -2(A6),D0
      EXT.L     D0
      ASL.L     #1,D0
      ADD.L     shape_face_ptr,D0
      MOVE.L    D0,-16(A6)

      TST.W     screen_rez
      BEQ       L0949
      MOVEA.W   16(A6),A0           ;color(0-15)
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L094A
L0949:MOVEA.W   16(A6),A0           ;color(0-15)
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_back,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_c_shape
      ADDA.L    #12,A7
L094A:

      MOVEA.W   -4(A6),A0
      ADDA.L    A0,A0
      MOVE.L    #set_shape_tab4,D1
      MOVE.W    0(A0,D1.L),D0
      MULS      -8(A6),D0
      MULS      12(A6),D0           ;sprite (0-19)
      MOVE.W    D0,-2(A6)

      MOVE.W    -2(A6),D0
      EXT.L     D0
      ASL.L     #1,D0
      MOVEA.W   -4(A6),A1
      ADDA.L    A1,A1
      ADDA.L    A1,A1
      ADDA.L    #set_shape_tab6,A1
      MOVE.L    (A1),D1
      ASL.L     #1,D1
      ADD.L     D1,D0
      ADD.L     shape_ptr,D0
      MOVE.L    D0,-16(A6)

      TST.W     screen_rez
      BEQ       L094B
      MOVEA.W   16(A6),A0           ;color(0-15)
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #sw_farbfll_tab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_sw_shape
      ADDA.L    #12,A7
      BRA       L094C
L094B:MOVEA.W   16(A6),A0           ;color(0-15)
      ADDA.L    A0,A0
      MOVEA.L   #color_cnv_frame,A1
      MOVEA.W   0(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #col_farb_jmptab,D1
      MOVE.L    0(A0,D1.L),(A7)
      MOVE.W    -10(A6),-(A7)
      MOVE.W    -8(A6),-(A7)
      MOVE.L    -16(A6),-(A7)
      MOVE.W    -6(A6),-(A7)
      MOVE.W    8(A6),-(A7)         ;X
      JSR       dr_c_shape
      ADDA.L    #12,A7
L094C:UNLK      A6
      RTS


calc_sin_table:LINK      A6,#-10
      CLR.W     -2(A6)
      BRA       L094F
L094E:MOVE.W    #-32,-4(A6)
      CLR.W     -6(A6)
      MOVE.W    -2(A6),D0
      NEG.W     D0
      MOVE.W    D0,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #6,(A7)
      MOVE.L    A6,-(A7)
      SUBQ.L    #4,(A7)
      JSR       sincos
      ADDQ.L    #8,A7
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    -4(A6),(A0)
      MOVEA.W   -2(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    -6(A6),2(A0)
      ADDQ.W    #1,-2(A6)
L094F:CMPI.W    #256,-2(A6)
      BLT.S     L094E
      UNLK      A6
      RTS


move_player:LINK      A6,#-40
      MOVEM.L   D2-D7,-(A7)
      MOVE.W    8(A6),D5
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_refresh(A0)
      BLE       L0955
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,ply_refresh(A0)
      BNE       L0955
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      ADDQ.W    #1,ply_lives(A0)
      MOVE.W    ply_lives(A0),D0
      CMP.W     #3,D0
      BGE       L0951
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    regen_time,ply_refresh(A0)
L0951:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #1,10(A0)
      BNE       L0954
      MOVE.W    D5,D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    revive_lives,D0
      MOVE.W    D0,ply_lives(A1)
      CMP.W     #3,D0
      BNE       L0952
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_refresh(A0)
L0952:MOVE.W    D5,(A7)
      JSR       hunt_ply_pos
      TST.W     D0
      BNE       L0953
      MOVEQ     #-1,D0
      BRA       L09A0
L0953:CMP.W     own_number,D5
      BNE       L0954
      CLR.W     display_2d_map_flag
L0954:CMP.W     own_number,D5
      BNE       L0955
      MOVE.W    #7,(A7)
      MOVE.W    #DEV_CONSOLE,-(A7)
      MOVE.W    #3,-(A7)                ; Bconout()
      JSR       _bios
      ADDQ.L    #4,A7
      JSR       update_smily
L0955:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BNE       L0958
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_shoot(A0)
      BEQ       L0956
      MOVE.W    D5,(A7)
      JSR       move_shoot
L0956:MOVE.W    D5,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_reload(A0,D1.L)
      BEQ       L0957
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,ply_reload(A0)
L0957:CLR.W     D0
      BRA       L09A0
L0958:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),D7
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),D6
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_richtung(A0),-6(A6)
      MOVE.W    D7,D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-22(A6)
      MOVE.W    D6,D0
      ASR.W     #7,D0
      OR.W      #1,D0
      MOVE.W    D0,-24(A6)
      BTST      #2,11(A6)
      BEQ       L0959
      SUBQ.W    #8,-6(A6)
      BRA       L095A
L0959:BTST      #3,11(A6)
      BEQ       L095A
      ADDQ.W    #8,-6(A6)
L095A:ANDI.W    #$FF,-6(A6)
      BTST      #4,11(A6)
      BEQ       L095C
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_reload(A0)
      BNE       L095C
      CMP.W     own_number,D5
      BNE       L095B
      MOVE.L    sound_shot_ptr,(A7)
      MOVE.W    #$20,-(A7)              ; Dosound()
      JSR       _xbios
      ADDQ.L    #2,A7
L095B:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -6(A6),ply_shootr(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #10,ply_shoot(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    reload_time,ply_reload(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D7,ply_shooty(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D6,ply_shootx(A0)
L095C:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_shoot(A0)
      BEQ       L095D
      MOVE.W    D5,(A7)
      JSR       move_shoot
L095D:MOVE.W    D5,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     ply_reload(A0,D1.L)
      BEQ       L095E
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,ply_reload(A0)
L095E:BTST      #0,11(A6)
      BEQ       L095F
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    (A0),-32(A6)
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    2(A0),-34(A6)
      BRA       L0961
L095F:BTST      #1,11(A6)
      BEQ       L0960
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #xy_speed_table,D1
      MOVE.W    0(A0,D1.L),D0
      NEG.W     D0
      MOVE.W    D0,-32(A6)
      MOVEA.W   -6(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      MOVE.L    #xy_speed_table,D1
      MOVE.W    2(A0,D1.L),D0
      NEG.W     D0
      MOVE.W    D0,-34(A6)
      BRA       L0961
L0960:CLR.W     -32(A6)
      CLR.W     -34(A6)
L0961:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),D7
      ADD.W     -32(A6),D7
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),D6
      ADD.W     -34(A6),D6
      MOVE.W    D7,D4
      ASR.W     #7,D4
      OR.W      #1,D4
      MOVE.W    D6,D3
      ASR.W     #7,D3
      OR.W      #1,D3
      MOVE.W    #1,-20(A6)
      MOVE.W    #-2,-16(A6)
      BRA       L0979
L0962:MOVE.W    #-2,-18(A6)
      BRA       L0978
L0963:CLR.W     (A7)
      MOVE.W    -18(A6),-(A7)
      MOVE.W    D3,D0
      ADD.W     D0,(A7)
      MOVE.W    -16(A6),-(A7)
      MOVE.W    D4,D0
      ADD.W     D0,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      MOVE.W    D0,-30(A6)
      BRA       L0977
L0964:CMPI.W    #16,-30(A6)
      BGE       L0976
      CMP.W     -30(A6),D5
      BEQ       L0975
      MOVE.W    -30(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      SUB.W     D7,D0
      MOVE.W    D0,-26(A6)
      TST.W     -26(A6)
      BGE       L0965
      MOVE.W    -26(A6),D0
      NEG.W     D0
      MOVE.W    D0,-26(A6)
L0965:MOVE.W    -30(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      SUB.W     D6,D0
      MOVE.W    D0,-28(A6)
      TST.W     -28(A6)
      BGE       L0966
      MOVE.W    -28(A6),D0
      NEG.W     D0
      MOVE.W    D0,-28(A6)
L0966:CMPI.W    #96,-26(A6)
      BGE       L0975
      CMPI.W    #96,-28(A6)
      BGE       L0975
      MOVE.W    -30(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      MOVE.W    D5,D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_y(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-36(A6)
      TST.W     -36(A6)
      BGE       L0967
      MOVE.W    -36(A6),D0
      NEG.W     D0
      MOVE.W    D0,-36(A6)
L0967:MOVE.W    -30(A6),D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      MOVE.W    D5,D1
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_x(A1),D1
      SUB.W     D1,D0
      MOVE.W    D0,-38(A6)
      TST.W     -38(A6)
      BGE       L0968
      MOVE.W    -38(A6),D0
      NEG.W     D0
      MOVE.W    D0,-38(A6)
L0968:CMPI.W    #96,-36(A6)
      BGE       L096B
      TST.W     -34(A6)
      BGE       L0969
      MOVEQ     #96,D0
      SUB.W     -28(A6),D0
      NEG.W     D0
      BRA       L096A
L0969:MOVEQ     #96,D0
      SUB.W     -28(A6),D0
L096A:SUB.W     D0,-34(A6)
      BRA       L0974
L096B:CMPI.W    #96,-38(A6)
      BGE       L096E
      TST.W     -32(A6)
      BGE       L096C
      MOVEQ     #96,D0
      SUB.W     -26(A6),D0
      NEG.W     D0
      BRA       L096D
L096C:MOVEQ     #96,D0
      SUB.W     -26(A6),D0
L096D:SUB.W     D0,-32(A6)
      BRA       L0974
L096E:MOVE.W    -26(A6),D0
      CMP.W     -28(A6),D0
      BLE       L0971
      TST.W     -32(A6)
      BGE       L096F
      MOVEQ     #96,D0
      SUB.W     -26(A6),D0
      NEG.W     D0
      BRA       L0970
L096F:MOVEQ     #96,D0
      SUB.W     -26(A6),D0
L0970:SUB.W     D0,-32(A6)
      BRA       L0974
L0971:TST.W     -34(A6)
      BGE       L0972
      MOVEQ     #96,D0
      SUB.W     -28(A6),D0
      NEG.W     D0
      BRA       L0973
L0972:MOVEQ     #96,D0
      SUB.W     -28(A6),D0
L0973:SUB.W     D0,-34(A6)
L0974:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_y(A0),D7
      ADD.W     -32(A6),D7
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_x(A0),D6
      ADD.W     -34(A6),D6
L0975:MOVE.W    -30(A6),D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_plist(A0),-30(A6)
      BRA       L0977
L0976:MOVE.W    -30(A6),D0
      ADD.W     #-16,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_slist(A0),-30(A6)
L0977:CMPI.W    #-1,-30(A6)
      BNE       L0964
      ADDQ.W    #2,-18(A6)
L0978:CMPI.W    #2,-18(A6)
      BLE       L0963
      ADDQ.W    #2,-16(A6)
L0979:CMPI.W    #2,-16(A6)
      BLE       L0962
      MOVE.W    D7,D4
      ASR.W     #7,D4
      OR.W      #1,D4
      MOVE.W    D6,D3
      ASR.W     #7,D3
      OR.W      #1,D3
      MOVE.W    D7,D0
      AND.W     #$FF,D0
      MOVE.W    D0,-2(A6)
      MOVE.W    D6,D0
      AND.W     #$FF,D0
      MOVE.W    D0,-4(A6)
      CMPI.W    #65,-2(A6)
      BLT       L097A
      CLR.W     D0
      BRA       L097B
L097A:MOVEQ     #1,D0
L097B:MOVE.W    D0,-8(A6)
      CMPI.W    #191,-2(A6)
      BGT       L097C
      CLR.W     D0
      BRA       L097D
L097C:MOVEQ     #1,D0
L097D:MOVE.W    D0,-10(A6)
      CMPI.W    #65,-4(A6)
      BLT       L097E
      CLR.W     D0
      BRA       L097F
L097E:MOVEQ     #1,D0
L097F:MOVE.W    D0,-12(A6)
      CMPI.W    #191,-4(A6)
      BGT       L0980
      CLR.W     D0
      BRA       L0981
L0980:MOVEQ     #1,D0
L0981:MOVE.W    D0,-14(A6)
      TST.W     -8(A6)
      BEQ       L0982
      MOVE.W    #-1,-16(A6)
      BRA       L0984
L0982:TST.W     -10(A6)
      BEQ       L0983
      MOVE.W    #1,-16(A6)
      BRA       L0984
L0983:CLR.W     -16(A6)
L0984:TST.W     -12(A6)
      BEQ       L0985
      MOVE.W    #-1,-18(A6)
      BRA       L0987
L0985:TST.W     -14(A6)
      BEQ       L0986
      MOVE.W    #1,-18(A6)
      BRA       L0987
L0986:CLR.W     -18(A6)
L0987:TST.W     -20(A6)
      BEQ       L098F
      TST.W     -8(A6)
      BNE       L0988
      TST.W     -10(A6)
      BEQ       L098B
L0988:CLR.W     (A7)
      MOVE.W    D3,-(A7)
      MOVE.W    -16(A6),-(A7)
      MOVE.W    D4,D0
      ADD.W     D0,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L098B
      AND.W     #$FF00,D7
      TST.W     -10(A6)
      BEQ       L0989
      MOVE.W    #191,D0
      BRA       L098A
L0989:MOVEQ     #65,D0
L098A:ADD.W     D0,D7
      CLR.W     -20(A6)
L098B:TST.W     -12(A6)
      BNE       L098C
      TST.W     -14(A6)
      BEQ       L098F
L098C:CLR.W     (A7)
      MOVE.W    -18(A6),-(A7)
      MOVE.W    D3,D0
      ADD.W     D0,(A7)
      MOVE.W    D4,-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L098F
      AND.W     #$FF00,D6
      TST.W     -14(A6)
      BEQ       L098D
      MOVE.W    #191,D0
      BRA       L098E
L098D:MOVEQ     #65,D0
L098E:ADD.W     D0,D6
      CLR.W     -20(A6)
L098F:TST.W     -20(A6)
      BEQ       L0999
      TST.W     -16(A6)
      BEQ       L0999
      TST.W     -18(A6)
      BEQ       L0999
      CLR.W     (A7)
      MOVE.W    -18(A6),-(A7)
      MOVE.W    D3,D0
      ADD.W     D0,(A7)
      MOVE.W    -16(A6),-(A7)
      MOVE.W    D4,D0
      ADD.W     D0,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L0999
      TST.W     -8(A6)
      BEQ       L0990
      MOVE.W    -2(A6),D0
      BRA       L0991
L0990:MOVE.W    #$100,D0
      SUB.W     -2(A6),D0
L0991:MOVE.W    D0,-26(A6)
      TST.W     -12(A6)
      BEQ       L0992
      MOVE.W    -4(A6),D0
      BRA       L0993
L0992:MOVE.W    #$100,D0
      SUB.W     -4(A6),D0
L0993:MOVE.W    D0,-28(A6)
      MOVE.W    -26(A6),D0
      CMP.W     -28(A6),D0
      BLT       L0996
      AND.W     #$FF00,D7
      TST.W     -10(A6)
      BEQ       L0994
      MOVE.W    #191,D0
      BRA       L0995
L0994:MOVEQ     #65,D0
L0995:ADD.W     D0,D7
      BRA       L0999
L0996:AND.W     #$FF00,D6
      TST.W     -14(A6)
      BEQ       L0997
      MOVE.W    #191,D0
      BRA       L0998
L0997:MOVEQ     #65,D0
L0998:ADD.W     D0,D6
L0999:TST.W     12(A6)
      BEQ       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMP.W     ply_y(A0),D7
      BNE       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMP.W     ply_x(A0),D6
      BNE       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_richtung(A0,D1.L),D0
      CMP.W     -6(A6),D0
      BNE       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     28(A0,D1.L)
      BNE       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      TST.W     76(A0,D1.L)
      BNE       L099A
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,34(A0)
L099A:MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D7,ply_y(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D6,ply_x(A0)
      MOVE.W    D5,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -6(A6),ply_richtung(A0)
      ASR.W     #7,D7
      OR.W      #1,D7
      ASR.W     #7,D6
      OR.W      #1,D6
      CLR.W     -40(A6)
      CLR.W     (A7)
      MOVE.W    D6,-(A7)
      MOVE.W    D7,-(A7)
      SUBQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L099B
      ADDQ.W    #1,-40(A6)
L099B:CLR.W     (A7)
      MOVE.W    D6,-(A7)
      SUBQ.W    #1,(A7)
      MOVE.W    D7,-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L099C
      ADDQ.W    #1,-40(A6)
L099C:CLR.W     (A7)
      MOVE.W    D6,-(A7)
      MOVE.W    D7,-(A7)
      ADDQ.W    #1,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L099D
      ADDQ.W    #1,-40(A6)
L099D:CLR.W     (A7)
      MOVE.W    D6,-(A7)
      ADDQ.W    #1,(A7)
      MOVE.W    D7,-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L099E
      ADDQ.W    #1,-40(A6)
L099E:CMPI.W    #4,-40(A6)
      BNE       L099F
      MOVE.W    D5,(A7)
      JSR       hunt_ply_pos
      TST.W     D0
      BNE       L099F
      MOVEQ     #-1,D0
      BRA       L09A0
L099F:CLR.W     D0
      BRA       L09A0
L09A0:TST.L     (A7)+
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

;************************************************************************
;* move_shoot(Player) - Schu bewegen, Kollision testen                 *
;************************************************************************
move_shoot:LINK      A6,#-20
      MOVEM.L   D2-D7,-(A7)
      MOVE.W    #1,-6(A6)           ;Schuflag setzen (Schu unterwegs)
      MOVE.W    8(A6),D7            ;schieender Spieler
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_shooty(A0),D6   ;Schu-Koordinate Y
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_shootx(A0),D5   ;Schu-Koordinate X
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_shootr(A0),-8(A6)
      MOVE.W    D6,D4
      ASR.W     #7,D4
      OR.W      #1,D4
      MOVE.W    D5,D3
      ASR.W     #7,D3
      OR.W      #1,D3
      CLR.W     -10(A6)             ;Z=0
      BRA       L09B8
move_shoot_z:MOVEA.W   -8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    (A0),D0
      ADD.W     D0,D6
      MOVEA.W   -8(A6),A0
      ADDA.L    A0,A0
      ADDA.L    A0,A0
      ADDA.L    #xy_speed_table,A0
      MOVE.W    2(A0),D0
      ADD.W     D0,D5
      MOVE.W    D4,-18(A6)
      MOVE.W    D3,-20(A6)
      MOVE.W    D6,D4
      ASR.W     #7,D4
      OR.W      #1,D4
      MOVE.W    D5,D3
      ASR.W     #7,D3
      OR.W      #1,D3
      CMP.W     -18(A6),D4
      BNE       L09A3
      CMP.W     -20(A6),D3
      BEQ       L09A4
L09A3:CLR.W     (A7)
      MOVE.W    -20(A6),D0
      ADD.W     D3,D0
      ASR.W     #1,D0
      MOVE.W    D0,-(A7)
      MOVE.W    -18(A6),D0
      ADD.W     D4,D0
      ASR.W     #1,D0
      MOVE.W    D0,-(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      CMP.W     #1,D0
      BNE       L09A4
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_shoot(A0)

      BRA       move_shoot_done
L09A4:MOVE.W    #-2,-2(A6)          ; Y = -2
      BRA       L09B6
move_shoot_y:MOVE.W    #-2,-4(A6)          ; X = -2
      BRA       L09B4
move_shoot_x:CLR.W     (A7)
      MOVE.W    -4(A6),-(A7)        ; X
      MOVE.W    D3,D0
      ADD.W     D0,(A7)
      MOVE.W    -2(A6),-(A7)        ; Y
      MOVE.W    D4,D0
      ADD.W     D0,(A7)
      JSR       get_maze_data
      ADDQ.L    #4,A7
      MOVE.W    D0,-12(A6)          ;current object in maze
      BRA       L09B3
L09A7:CMPI.W    #16,-12(A6)         ;current object in maze == anderer Schu?
      BGE       L09B2               ; ja =>
      CMP.W     -12(A6),D7          ;current object in maze == der eigene Spieler?
      BEQ       L09B1               ;=> ignore
      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      TST.W     ply_lives(A0)
      BLE       L09B1
      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_y(A0,D1.L),D0
      SUB.W     D6,D0
      MOVE.W    D0,-14(A6)

      TST.W     -14(A6)
      BGE       L09A8
      MOVE.W    -14(A6),D0
      NEG.W     D0
      MOVE.W    D0,-14(A6)
L09A8:
      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_x(A0,D1.L),D0
      SUB.W     D5,D0
      MOVE.W    D0,-16(A6)

      TST.W     -16(A6)
      BGE       L09A9
      MOVE.W    -16(A6),D0
      NEG.W     D0
      MOVE.W    D0,-16(A6)
L09A9:
      CMPI.W    #48,-14(A6)
      BGT       L09B1
      CMPI.W    #48,-16(A6)         ; too far away?
      BGT       L09B1

      CMP.W     own_number,D7
      BNE       L09AA
      MOVE.L    sound_hit_ptr,(A7)
      MOVE.W    #$20,-(A7)          ; Dosound()
      JSR       _xbios              ; hit!
      ADDQ.L    #2,A7
L09AA:
      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    #1,ply_hitflag(A0)

      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D7,ply_gunman(A0)

      TST.W     team_flag               ;Teamplay?
      BEQ       L09AB
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVE.L    #player_data,D1
      MOVE.W    ply_team(A0,D1.L),D0
      MOVE.W    -12(A6),D1          ;current object in maze
      MULS      #ply_size,D1
      ADD.L     #player_data,D1
      MOVEA.L   D1,A1
      MOVE.W    ply_team(A1),D1
      CMP.W     D1,D0                   ;beide im selben Team?
      BNE       L09AB

      TST.W     friendly_fire           ;friendly fire? => loose energy, but not the last bit
      BNE       L09AF
      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #1,ply_lives(A0)
      BEQ       L09AF

L09AB:MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    regen_time,ply_refresh(A0)

      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      SUBQ.W    #1,ply_lives(A0)
      BNE       L09AE

      MOVE.W    -12(A6),D0          ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    revive_time,ply_refresh(A0)

      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      ADDQ.W    #1,ply_score(A0)

      TST.W     team_flag
      BEQ       L09AD
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      MOVEA.L   D0,A0
      MOVEA.L   #player_data,A1
      MOVEA.W   ply_team(A0,A1.L),A0
      ADDA.L    A0,A0
      ADDA.L    #team_scores,A0
      ADDQ.W    #1,(A0)
      MOVE.W    (A0),D0
      CMP.W     #10,D0
      BNE       L09AC
      CLR.W     we_dont_have_a_winner
L09AC:BRA       L09AE

L09AD:MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CMPI.W    #10,ply_score(A0)
      BNE       L09AE
      CLR.W     we_dont_have_a_winner

L09AE:MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    -12(A6),ply_looser(A0) ;current object in maze

L09AF:MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      CLR.W     ply_shoot(A0)

      MOVE.W    -12(A6),D0             ;current object in maze
      CMP.W     own_number,D0
      BNE       L09B0
      JSR       update_smily
L09B0:CLR.W     -6(A6)                 ;der Schu ist weg

L09B1:MOVE.W    -12(A6),D0             ;current object in maze
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_plist(A0),-12(A6)  ;current object in maze
      BRA       L09B3
L09B2:MOVE.W    -12(A6),D0             ;current object in maze
      ADD.W     #-16,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    ply_slist(A0),-12(A6)  ;current object in maze
L09B3:CMPI.W    #-1,-12(A6)            ; current object in maze == more objects?
      BNE       L09A7                  ; => then continue
      ADDQ.W    #2,-4(A6)              ; X
L09B4:CMPI.W    #2,-4(A6)              ; X
      BGT       L09B5
      TST.W     -6(A6)                 ;ist der Schu ist weg?
      BNE       move_shoot_x           ;nein =>
L09B5:ADDQ.W    #2,-2(A6)              ; Y
L09B6:CMPI.W    #2,-2(A6)              ; Y
      BGT       L09B7
      TST.W     -6(A6)
      BNE       move_shoot_y
L09B7:ADDQ.W    #1,-10(A6)             ;Z = Z+1
L09B8:CMPI.W    #3,-10(A6)             ;Z < 3
      BLT       move_shoot_z

move_shoot_done:MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D6,ply_shooty(A0)
      MOVE.W    D7,D0
      MULS      #ply_size,D0
      ADD.L     #player_data,D0
      MOVEA.L   D0,A0
      MOVE.W    D5,ply_shootx(A0)
      TST.L     (A7)+
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS




dr_sw_shape(8:X,10:Y,12:imagePtr,16:???,18:height,20:colortable)

dr_sw_shape:LINK      A6,#-2
      MOVEM.L   D3-D7,-(A7)
      MOVEA.L   screen_offs_adr,A0
      MOVE.W    10(A6),D2           ;Y
      ADD.W     D2,D2
      MOVE.W    D2,-2(A6)
      LEA       mult_tab_80,A2
      MOVE.W    0(A2,D2.W),D2
      LEA       0(A0,D2.W),A1
      MOVEA.L   20(A6),A2           ;colortable
      MOVEA.L   12(A6),A0           ;imagePtr
      MOVE.W    18(A6),D5           ;height
      SUBQ.W    #1,D5
      MOVE.W    8(A6),D2            ;X
      MOVE.W    D2,D4
      ANDI.W    #15,D2
      ASR.W     #4,D4
      ADD.W     16(A6),D4           ;???
      ADD.W     D4,D4
      MOVE.W    D4,8(A6)            ;X
      SUBQ.W    #1,16(A6)           ;???
      CMP.W     #8,D2
      BGT       dr_sw_shape3
dr_sw_shape1:
      MOVE.W    8(A6),D4            ;X
      MOVE.W    16(A6),D3           ;???
      MOVE.W    -2(A6),D6
      ANDI.W    #$06,D6
      MOVE.W    2(A2,D6.W),D7
      MOVE.W    0(A2,D6.W),D6
      MOVE.W    D5,-(A7)
      CLR.W     D1
dr_sw_shape2:
      MOVE.W    -(A0),D0
      SWAP      D0
      MOVE.W    D1,D0
      LSR.L     D2,D0
      BSR       dr_sw_shape6
      SUBQ.W    #2,D4
      MOVE.W    (A0),D1
      DBF       D3,dr_sw_shape2
      LSR.W     D2,D1
      MOVE.W    D1,D0
      BSR       dr_sw_shape6
      SUBQ.W    #2,D4
      SUBA.W    #160,A1
      SUBQ.W    #4,-2(A6)
      MOVE.W    (A7)+,D5
      DBF       D5,dr_sw_shape1
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_shape3:
      NEG.W     D2
      ADD.W     #16,D2
dr_sw_shape4:
      MOVE.W    8(A6),D4            ;X
      MOVE.W    16(A6),D3           ;???
      MOVE.W    -2(A6),D6
      ANDI.W    #6,D6
      MOVE.W    2(A2,D6.W),D7
      MOVE.W    0(A2,D6.W),D6
      MOVE.W    D5,-(A7)
      CLR.L     D0
      CLR.W     D1
dr_sw_shape5:
      MOVE.W    -(A0),D0
      ASL.L     D2,D0
      OR.W      D1,D0
      BSR       dr_sw_shape6
      CLR.W     D0
      SWAP      D0
      MOVE.W    D0,D1
      SUBQ.W    #2,D4
      DBF       D3,dr_sw_shape5
      MOVE.W    D1,D0
      BSR       dr_sw_shape6
      SUBA.W    #160,A1
      SUBQ.W    #4,-2(A6)
      MOVE.W    (A7)+,D5
      DBF       D5,dr_sw_shape4
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_shape6:
      TST.W     D4
      BLT       dr_sw_shape7
      CMP.W     #40,D4
      BGE       dr_sw_shape7
      MOVE.W    0(A1,D4.W),D5
      EOR.W     D7,D5
      AND.W     D0,D5
      EOR.W     D5,0(A1,D4.W)
      MOVE.W    -80(A1,D4.W),D5
      EOR.W     D6,D5
      AND.W     D0,D5
      EOR.W     D5,-80(A1,D4.W)
dr_sw_shape7:
      RTS




_muls_divs:
      MOVE.W    4(A7),D0
      MULS      6(A7),D0
      DIVS      8(A7),D0
      RTS

      CLR.W     D0
      RTS






calc_160_tab:
      LEA       mult_tab_160,A0
      CLR.W     D0
      MOVE.W    #255,D1
L09C4:MOVE.W    D0,(A0)+
      ADD.W     #160,D0
      DBF       D1,L09C4
      RTS

calc_80_tab:
      LEA       mult_tab_80,A0
      CLR.W     D0
      MOVE.W    #399,D1
L09C6:MOVE.W    D0,(A0)+
      ADD.W     #80,D0
      DBF       D1,L09C6
      RTS

dr_sw_hline:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0        ;X1
      MOVE.W    10(A6),D1       ;X2
      MOVE.W    12(A6),D2       ;Y
      MOVE.W    14(A6),D3       ;Farbe/Fllmuster
      MOVEA.L   screen_offs_adr,A0
      BSR       sw_fill_line
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_chline:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0        ;X1
      MOVE.W    10(A6),D1       ;X2
      MOVE.W    12(A6),D2       ;Y
      MOVE.W    14(A6),D3       ;Farbe/Fllmuster
      MOVEA.L   screen_offs_adr,A0
      BSR       sw_fill_cline
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_vline:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0        ;Y1
      MOVE.W    10(A6),D1       ;Y2
      MOVE.W    12(A6),D2       ;X
      MOVE.W    14(A6),D3       ;Farbe/Fllmuster
      MOVEA.L   screen_offs_adr,A0
      BSR       sw_fill_vline
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_box:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0        ;X1
      MOVE.W    12(A6),D1       ;X2
      MOVE.W    16(A6),D3       ;Farbe/Fllmuster
      MOVEA.L   screen_offs_adr,A0
      MOVE.W    10(A6),D2       ;Y1
L09CB:BSR       sw_fill_line
      ADDQ.W    #1,10(A6)
      MOVE.W    10(A6),D2
      CMP.W     14(A6),D2       ;Y2
      BLE.S     L09CB
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_sw_cbox:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0
      MOVE.W    12(A6),D1
      MOVEA.L   screen_offs_adr,A0
      MOVE.W    10(A6),D2
L09CD:MOVE.W    16(A6),D3
      BSR       sw_fill_cline
      ADDQ.W    #1,10(A6)
      MOVE.W    10(A6),D2
      CMP.W     14(A6),D2
      BLE.S     L09CD
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

clr_sw_window:MOVEA.L   screen_offs_adr,A0
      MOVEQ     #99,D0
      MOVEQ     #-1,D2
L09CF:MOVEQ     #9,D1
L09D0:MOVE.L    D2,(A0)+
      DBF       D1,L09D0
      ADDA.W    #40,A0
      DBF       D0,L09CF
      MOVEQ     #50,D0
L09D1:MOVEQ     #9,D1
L09D2:MOVE.L    D2,(A0)+
      DBF       D1,L09D2
      ADDA.W    #40,A0
      EORI.L    #$AAAAAAAA,D2
      MOVEQ     #9,D1
L09D3:MOVE.L    D2,(A0)+
      DBF       D1,L09D3
      ADDA.W    #40,A0
      EORI.L    #$AAAAAAAA,D2
      DBF       D0,L09D1
      RTS

sw_fill_line:LEA       sw_farbfll_tab,A2
      MOVE.W    D3,D7
      ASL.W     #2,D7
      MOVEA.L   0(A2,D7.W),A2
      MOVE.W    D2,D7
      ADD.W     D7,D7
      ANDI.W    #6,D7
      MOVE.W    2(A2,D7.W),D7
      CMP.W     D0,D1
      BGE       L09D5
      EXG       D1,D0
L09D5:ADD.W     D2,D2
      LEA       mult_tab_80,A2
      MOVE.W    0(A2,D2.W),D2
      MOVE.W    D0,D4
      LSR.W     #4,D4
      ASL.W     #1,D4
      ADD.W     D4,D2
      LEA       0(A0,D2.W),A1
      MOVE.W    D0,D4
      LSR.W     #4,D4
      MOVE.W    D1,D2
      LSR.W     #4,D2
      SUB.W     D4,D2
      SUBQ.W    #1,D2
      BGE       L09D6
      MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      MOVE.W    D1,D4
      ANDI.W    #15,D4
      ASL.W     #1,D4
      LEA       bmask_b,A2
      AND.W     0(A2,D4.W),D5
      BRA       L09D9
L09D6:MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      BSR       L09D9
      BRA       L09D8
L09D7:MOVE.W    D7,(A1)+
L09D8:DBF       D2,L09D7
      MOVE.W    D1,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_b,A2
      MOVE.W    0(A2,D4.W),D5
L09D9:MOVE.W    (A1),D6
      EOR.W     D7,(A1)
      AND.W     D5,(A1)
      EOR.W     D6,(A1)+
      RTS

sw_fill_cline:LEA       sw_farbfll_tab,A2
      MOVE.W    D3,D7
      ASL.W     #2,D7
      MOVEA.L   0(A2,D7.W),A2
      ADD.W     D2,D2
      MOVE.W    D2,D7
      ADDQ.W    #1,D7
      ADD.W     D7,D7
      ANDI.W    #6,D7
      MOVE.W    0(A2,D7.W),D3
      MOVE.W    2(A2,D7.W),D7
      CMP.W     D0,D1
      BGE       L09DB
      EXG       D1,D0
L09DB:LEA       mult_tab_160,A2
      MOVE.W    0(A2,D2.W),D2
      MOVE.W    D0,D4
      LSR.W     #4,D4
      ASL.W     #1,D4
      ADD.W     D4,D2
      LEA       0(A0,D2.W),A1
      MOVE.W    D0,D4
      LSR.W     #4,D4
      MOVE.W    D1,D2
      LSR.W     #4,D2
      SUB.W     D4,D2
      SUBQ.W    #1,D2
      BGE       L09DC
      MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      MOVE.W    D1,D4
      ANDI.W    #15,D4
      ASL.W     #1,D4
      LEA       bmask_b,A2
      AND.W     0(A2,D4.W),D5
      BRA       L09DF
L09DC:MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      BSR       L09DF
      BRA       L09DE
L09DD:MOVE.W    D7,80(A1)
      MOVE.W    D3,(A1)+
L09DE:DBF       D2,L09DD
      MOVE.W    D1,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_b,A2
      MOVE.W    0(A2,D4.W),D5
L09DF:MOVE.W    (A1),D6
      EOR.W     D3,(A1)
      AND.W     D5,(A1)
      EOR.W     D6,(A1)
      ADDA.W    #80,A1
      MOVE.W    (A1),D6
      EOR.W     D7,(A1)
      AND.W     D5,(A1)
      EOR.W     D6,(A1)+
      SUBA.W    #80,A1
      RTS

sw_fill_vline:CMP.W     D0,D1
      BGE       sw_fill_vline1
      EXG       D1,D0
sw_fill_vline1:SUB.W     D0,D1
      ADD.W     D0,D0
      LEA       mult_tab_80,A2
      MOVE.W    0(A2,D0.W),D0
      MOVE.W    D2,D4
      LSR.W     #3,D4
      ANDI.W    #$FFFE,D4
      ADD.W     D0,D4
      LEA       0(A0,D4.W),A1
      ANDI.W    #15,D2
      ADD.W     D2,D2
      LEA       bmask_c,A2
      MOVE.W    0(A2,D2.W),D5
      MOVE.W    D5,D6
      NOT.W     D6
sw_fill_vline2:BTST      #0,D3
      BEQ       sw_fill_vline3
      OR.W      D5,(A1)
      BRA       sw_fill_vline4
sw_fill_vline3:AND.W     D6,(A1)
sw_fill_vline4:ADDA.W    #80,A1
      DBF       D1,sw_fill_vline2
      RTS

_xbios:MOVE.L    (A7)+,saveret
      TRAP      #$E
      MOVE.L    saveret,-(A7)
      RTS
_bios:MOVE.L    (A7)+,saveret
      TRAP      #$D
      MOVE.L    saveret,-(A7)
      RTS
_gemdos:MOVE.L    (A7)+,saveret
      TRAP      #1
      MOVE.L    saveret,-(A7)
      RTS

crys_if:  LINK      A6,#-10
      MOVE.W    8(A6),aes_contrl
      MOVE.W    8(A6),D0
      ADD.W     #-10,D0
      MULS      #3,D0
      EXT.L     D0
      ADD.L     #_ctrl_cnts,D0
      MOVE.L    D0,-6(A6)
      MOVE.W    #1,-2(A6)
      BRA.S     L09EA
L09E9:MOVEA.L   -6(A6),A0
      MOVE.B    (A0),D0
      EXT.W     D0
      MOVEA.W   -2(A6),A1
      ADDA.L    A1,A1
      ADDA.L    #aes_contrl,A1
      MOVE.W    D0,(A1)
      ADDQ.L    #1,-6(A6)
      ADDQ.W    #1,-2(A6)
L09EA:CMPI.W    #4,-2(A6)
      BLT.S     L09E9
      MOVE.L    aesbp_ptr,(A7)
      JSR       _crystal
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

appl_init:LINK      A6,#-6
      MOVE.L    #aes_contrl,aesbp
      MOVE.L    #aes_global,aesbp+4
      MOVE.L    #aes_intin,aesbp+8
      MOVE.L    #aes_intout,aesbp+12
      MOVE.L    #aes_addrin,aesbp+16
      MOVE.L    #aes_addrout,aesbp+20
      MOVE.L    #aesbp,aesbp_ptr
      MOVE.W    #10,(A7)
      BSR       crys_if
      MOVE.W    aes_intout,app_global_identifier
      MOVEQ     #1,D0
      UNLK      A6
      RTS

appl_exit:LINK      A6,#-4
      MOVE.W    #19,(A7)
      BSR       crys_if
      MOVEQ     #1,D0
      UNLK      A6
      RTS

evnt_multi:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    10(A6),aes_intin+2
      MOVE.W    12(A6),aes_intin+4
      MOVE.W    14(A6),aes_intin+6
      MOVE.W    16(A6),aes_intin+8
      MOVE.W    18(A6),aes_intin+10
      MOVE.W    20(A6),aes_intin+12
      MOVE.W    22(A6),aes_intin+14
      MOVE.W    24(A6),aes_intin+16
      MOVE.W    26(A6),aes_intin+18
      MOVE.W    28(A6),aes_intin+20
      MOVE.W    30(A6),aes_intin+22
      MOVE.W    32(A6),aes_intin+24
      MOVE.W    34(A6),aes_intin+26
      MOVE.L    36(A6),aes_addrin
      MOVE.W    40(A6),aes_intin+28
      MOVE.W    42(A6),aes_intin+30
      MOVE.W    #$19,(A7)
      JSR       crys_if
      MOVEA.L   44(A6),A0
      MOVE.W    aes_intout+2,(A0)
      MOVEA.L   48(A6),A0
      MOVE.W    aes_intout+4,(A0)
      MOVEA.L   52(A6),A0
      MOVE.W    aes_intout+6,(A0)
      MOVEA.L   56(A6),A0
      MOVE.W    aes_intout+8,(A0)
      MOVEA.L   60(A6),A0
      MOVE.W    aes_intout+10,(A0)
      MOVEA.L   64(A6),A0
      MOVE.W    aes_intout+12,(A0)
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

form_do:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    12(A6),aes_intin
      MOVE.W    #50,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

form_dial:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    10(A6),aes_intin+2
      MOVE.W    12(A6),aes_intin+4
      MOVE.W    14(A6),aes_intin+6
      MOVE.W    16(A6),aes_intin+8
      MOVE.W    18(A6),aes_intin+10
      MOVE.W    20(A6),aes_intin+12
      MOVE.W    22(A6),aes_intin+14
      MOVE.W    24(A6),aes_intin+16
      MOVE.W    #51,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

form_alert:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.L    10(A6),aes_addrin
      MOVE.W    #52,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

form_center:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    #$36,(A7)
      JSR       crys_if
      MOVEA.L   12(A6),A0
      MOVE.W    aes_intout+2,(A0)
      MOVEA.L   16(A6),A0
      MOVE.W    aes_intout+4,(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    aes_intout+6,(A0)
      MOVEA.L   24(A6),A0
      MOVE.W    aes_intout+8,(A0)
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

fsel_input:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.L    12(A6),aes_addrin+4
      MOVE.W    #$5A,(A7)
      JSR       crys_if
      MOVEA.L   16(A6),A0
      MOVE.W    aes_intout+2,(A0)
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

graf_handle:LINK      A6,#-4
      MOVE.W    #$4D,(A7)
      JSR       crys_if
      MOVEA.L   8(A6),A0
      MOVE.W    aes_intout+2,(A0)
      MOVEA.L   12(A6),A0
      MOVE.W    aes_intout+4,(A0)
      MOVEA.L   16(A6),A0
      MOVE.W    aes_intout+6,(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    aes_intout+8,(A0)
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

graf_mouse:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.L    10(A6),aes_addrin
      MOVE.W    #78,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

menu_bar:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    12(A6),aes_intin
      MOVE.W    #$1E,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

menu_tnormal:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    12(A6),aes_intin
      MOVE.W    14(A6),aes_intin+2
      MOVE.W    #$21,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

objc_draw:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    12(A6),aes_intin
      MOVE.W    14(A6),aes_intin+2
      MOVE.W    16(A6),aes_intin+4
      MOVE.W    18(A6),aes_intin+6
      MOVE.W    20(A6),aes_intin+8
      MOVE.W    22(A6),aes_intin+10
      MOVE.W    #$2A,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

rsrc_obfix:LINK      A6,#-4
      MOVE.L    8(A6),aes_addrin
      MOVE.W    12(A6),aes_intin
      MOVE.W    #$72,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

wind_create:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    10(A6),aes_intin+2
      MOVE.W    12(A6),aes_intin+4
      MOVE.W    14(A6),aes_intin+6
      MOVE.W    16(A6),aes_intin+8
      MOVE.W    #100,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

wind_open:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    10(A6),aes_intin+2
      MOVE.W    12(A6),aes_intin+4
      MOVE.W    14(A6),aes_intin+6
      MOVE.W    16(A6),aes_intin+8
      MOVE.W    #101,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

wind_close:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    #102,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

wind_delete:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    #$67,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

wind_get:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    10(A6),aes_intin+2
      MOVE.W    #$68,(A7)
      JSR       crys_if
      MOVEA.L   12(A6),A0
      MOVE.W    aes_intout+2,(A0)
      MOVEA.L   16(A6),A0
      MOVE.W    aes_intout+4,(A0)
      MOVEA.L   20(A6),A0
      MOVE.W    aes_intout+6,(A0)
      MOVEA.L   24(A6),A0
      MOVE.W    aes_intout+8,(A0)
      CLR.W     D0
      MOVE.W    aes_intout,D0
      UNLK      A6
      RTS

wind_update:LINK      A6,#-4
      MOVE.W    8(A6),aes_intin
      MOVE.W    #$6B,(A7)
      JSR       crys_if
      UNLK      A6
      RTS

v_clrwk:LINK      A6,#-4
      MOVE.W    #3,vdi_contrl
      CLR.W     vdi_contrl+2
      CLR.W     vdi_contrl+6
      MOVE.W    8(A6),vdi_contrl+12
      JSR       _vdi
      UNLK      A6
      RTS

v_clsvwk:LINK      A6,#-4
      MOVE.W    #101,vdi_contrl
      CLR.W     vdi_contrl+2
      CLR.W     vdi_contrl+6
      MOVE.W    8(A6),vdi_contrl+12
      JSR       _vdi
      UNLK      A6
      RTS

v_opnvwk:LINK      A6,#-4
      MOVE.L    8(A6),_VDIpb+4
      MOVE.L    16(A6),_VDIpb+12
      MOVE.L    16(A6),D0
      ADD.L     #90,D0
      MOVE.L    D0,_VDIpb+16
      MOVE.W    #100,vdi_contrl
      CLR.W     vdi_contrl+2
      MOVE.W    #11,vdi_contrl+6
      MOVEA.L   12(A6),A0
      MOVE.W    (A0),vdi_contrl+12
      JSR       _vdi
      MOVEA.L   12(A6),A0
      MOVE.W    vdi_contrl+12,(A0)
      MOVE.L    #vdi_intin,_VDIpb+4
      MOVE.L    #vdi_intout,_VDIpb+12
      MOVE.L    #vdi_ptsout,_VDIpb+16
      MOVE.L    #vdi_ptsin,_VDIpb+8
      UNLK      A6
      RTS

vro_cpyfm:LINK      A6,#-4
      MOVE.W    10(A6),vdi_intin
      MOVE.L    16(A6),(A7)
      JSR       vro_cpyfm_set_source
      MOVE.L    20(A6),(A7)
      JSR       vro_cpyfm_set_dest
      MOVE.L    12(A6),_VDIpb+8
      MOVE.W    #$6D,vdi_contrl
      MOVE.W    #4,vdi_contrl+2
      MOVE.W    #1,vdi_contrl+6
      MOVE.W    8(A6),vdi_contrl+12
      JSR       _vdi
      MOVE.L    #vdi_ptsin,_VDIpb+8
      UNLK      A6
      RTS

vro_cpyfm_set_source:MOVE.L    4(A7),vdi_contrl+14
      RTS

vro_cpyfm_set_dest:MOVE.L    4(A7),vdi_contrl+18
      RTS

_vdi: MOVE.L    #vdi_contrl,_VDIpb
      MOVE.L    #_VDIpb,D1
      MOVEQ     #$73,D0 	;VDI-AUFRUF
      TRAP      #2
      RTS


mul_ULONG:LINK      A6,#-4
      CLR.W     D2
      TST.L     8(A6)
      BGE.S     L0A07
      NEG.L     8(A6)
      ADDQ.W    #1,D2
L0A07:TST.L     12(A6)
      BGE.S     L0A08
      NEG.L     12(A6)
      ADDQ.W    #1,D2
L0A08:MOVE.W    10(A6),D0
      MULU      14(A6),D0
      MOVE.L    D0,-4(A6)
      MOVE.W    8(A6),D0
      MULU      14(A6),D0
      MOVE.W    12(A6),D1
      MULU      10(A6),D1
      ADD.W     D1,D0
      ADD.W     -4(A6),D0
      MOVE.W    D0,-4(A6)
      MOVE.L    -4(A6),D0
      BTST      #0,D2
      BEQ.S     L0A09
      NEG.L     D0
L0A09:UNLK      A6
      RTS



check_copy_protection:
      MOVEM.L   A0-A6/D1-D7,-(A7)
      MOVEQ     #2,D6
      MOVEQ     #2,D5
      MOVE.W    #$19,-(A7) 	;DGETDRV
      TRAP      #1
      ADDQ.W    #2,A7
      MOVE.W    D0,D7
      CMPI.W    #2,D7
      BLT.S     L0A0B
      CLR.W     D7
L0A0B:MOVE.W    #1,-(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      CLR.W     -(A7)
      MOVE.W    D7,-(A7)
      CLR.L     -(A7)
      PEA       check_copy_protection_buffer
      MOVE.W    #8,-(A7) 	;FLOPRD
      TRAP      #$E
      ADDA.W    #20,A7
      TST.W     D0
      BEQ.S     L0A0E
      CMP.W     #-4,D0
      BEQ.S     L0A0E
L0A0C:SUBQ.W    #1,D6
      BEQ.S     check_copy_protection_fail
      MOVEQ     #2,D5
      ADDQ.W    #1,D7
      CMPI.W    #2,D7
      BNE.S     L0A0B
      CLR.W     D7
      BRA.S     L0A0B
check_copy_protection_fail:
      CLR.W     D0
      BRA.S     check_copy_protection_return
      DC.B      'RMP  V1.00  31-July-86'
L0A0E:CLR.W     D0
      LEA       check_copy_protection_buffer,A0
      LEA       check_copy_protection_magic,A1
      CMPM.L    (A0)+,(A1)+
      BNE.S     L0A0C
      CMPM.W    (A0)+,(A1)+
      BNE.S     L0A0C
      MOVE.W    #505,D1
L0A0F:MOVEQ     #7,D2
      MOVE.B    (A0)+,D3
L0A10:ASR.W     #1,D3
      BCC.S     L0A11
      ADDQ.W    #1,D0
L0A11:DBF       D2,L0A10
      DBF       D1,L0A0F
      SUBQ.W    #1,D5
      BEQ.S     L0A12
      MOVE.W    D0,D4
      BRA       L0A0B
L0A12:SUB.W     D4,D0
      BEQ.S     L0A0C
      ST        D0
check_copy_protection_return:
      MOVEM.L   (A7)+,A0-A6/D1-D7
      RTS
check_copy_protection_buffer:
      DCB.B     512,0
      ALIGN 4
check_copy_protection_magic:
      DC.B      '100004'




dr_c_shape:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVEA.L   screen_offs_adr,A0
      MOVE.W    10(A6),D2
      ADD.W     D2,D2
      LEA       mult_tab_160,A2
      MOVE.W    0(A2,D2.W),D2
      LEA       0(A0,D2.W),A1
      MOVEA.L   20(A6),A2
      MOVEA.L   12(A6),A0
      MOVE.W    18(A6),D5
      SUBQ.W    #1,D5
      MOVE.W    8(A6),D2
      MOVE.W    D2,D4
      ANDI.W    #15,D2
      ASR.W     #4,D4
      ADD.W     16(A6),D4
      ASL.W     #3,D4
      MOVE.W    D4,8(A6)
      SUBQ.W    #1,16(A6)
      CMP.W     #8,D2
      BGT       dr_c_shape3
dr_c_shape1:MOVE.W    8(A6),D4
      MOVE.W    16(A6),D3
      CLR.W     D1
dr_c_shape2:MOVE.W    -(A0),D0
      SWAP      D0
      MOVE.W    D1,D0
      LSR.L     D2,D0
      BSR       dr_c_shape6
      SUBQ.W    #8,D4
      MOVE.W    (A0),D1
      DBF       D3,dr_c_shape2
      LSR.W     D2,D1
      MOVE.W    D1,D0
      BSR       dr_c_shape6
      SUBA.W    #160,A1
      DBF       D5,dr_c_shape1
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_c_shape3:NEG.W     D2
      ADD.W     #16,D2
dr_c_shape4:MOVE.W    8(A6),D4
      MOVE.W    16(A6),D3
      CLR.L     D0
      CLR.W     D1
dr_c_shape5:MOVE.W    -(A0),D0
      ASL.L     D2,D0
      OR.W      D1,D0
      BSR       dr_c_shape6
      CLR.W     D0
      SWAP      D0
      MOVE.W    D0,D1
      SUBQ.W    #8,D4
      DBF       D3,dr_c_shape5
      MOVE.W    D1,D0
      BSR       dr_c_shape6
      SUBA.W    #160,A1
      DBF       D5,dr_c_shape4
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_c_shape6:TST.W     D4
      BLT       dr_c_shape7
      CMP.W     #80,D4
      BGE       dr_c_shape7
      MOVE.W    D0,D6
      NOT.W     D6
      JMP       (A2)
dr_c_shape7:RTS
dr_c_shape8:AND.W     D6,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape9:AND.W     D6,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape10:AND.W     D6,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape11:AND.W     D6,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape12:AND.W     D6,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape13:AND.W     D6,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape14:AND.W     D6,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape15:AND.W     D6,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape16:OR.W      D0,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape17:OR.W      D0,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape18:OR.W      D0,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape19:OR.W      D0,6(A1,D4.W)
      AND.W     D6,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape20:OR.W      D0,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape21:OR.W      D0,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      AND.W     D6,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS
dr_c_shape22:OR.W      D0,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      AND.W     D6,0(A1,D4.W)
      RTS
dr_c_shape23:OR.W      D0,6(A1,D4.W)
      OR.W      D0,4(A1,D4.W)
      OR.W      D0,2(A1,D4.W)
      OR.W      D0,0(A1,D4.W)
      RTS

dr_c_cline:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0
      MOVE.W    10(A6),D1
      MOVE.W    12(A6),D2
      MOVE.W    14(A6),D3
      MOVEA.L   screen_offs_adr,A0
      BSR       fill_cline
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_c_cvline:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0
      MOVE.W    10(A6),D1
      MOVE.W    12(A6),D2
      MOVE.W    14(A6),D3
      MOVEA.L   screen_offs_adr,A0
      BSR       fill_vline
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

dr_c_box:LINK      A6,#0
      MOVEM.L   D3-D7,-(A7)
      MOVE.W    8(A6),D0        ;X1
      MOVE.W    12(A6),D1       ;X2
      MOVE.W    16(A6),D3       ;Farbe
      MOVEA.L   screen_offs_adr,A0
      MOVE.W    10(A6),D2       ;Y1
L0A31:BSR       fill_cline
      ADDQ.W    #1,10(A6)       ;Y1+1
      MOVE.W    10(A6),D2
      CMP.W     14(A6),D2       ;Y2<Y1?
      BLE.S     L0A31
      MOVEM.L   (A7)+,D3-D7
      UNLK      A6
      RTS

clr_cwindow:MOVEA.L   screen_offs_adr,A0
      MOVEQ     #-1,D2
      MOVEQ     #49,D0
L0A33:MOVEQ     #4,D1
L0A34:MOVE.L    D2,(A0)+
      CLR.L     (A0)+
      MOVE.L    D2,(A0)+
      CLR.L     (A0)+
      DBF       D1,L0A34
      ADDA.W    #80,A0
      DBF       D0,L0A33
      MOVEQ     #50,D0
L0A35:MOVEQ     #9,D1
L0A36:MOVE.W    D2,(A0)+
      MOVE.L    D2,(A0)+
      CLR.W     (A0)+
      DBF       D1,L0A36
      ADDA.W    #80,A0
      DBF       D0,L0A35
      RTS

fill_cline:CMP.W     D0,D1
      BGE       L0A38
      EXG       D1,D0
L0A38:ADD.W     D2,D2
      LEA       mult_tab_160,A2
      MOVE.W    0(A2,D2.W),D2
      MOVE.W    D0,D4
      LSR.W     #4,D4
      ASL.W     #3,D4
      ADD.W     D4,D2
      LEA       0(A0,D2.W),A1
      MOVE.W    D0,D4
      LSR.W     #4,D4
      MOVE.W    D1,D2
      LSR.W     #4,D2
      SUB.W     D4,D2
      SUBQ.W    #1,D2
      BGE       L0A39
      MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      MOVE.W    D1,D4
      ANDI.W    #15,D4
      ASL.W     #1,D4
      LEA       bmask_b,A2
      AND.W     0(A2,D4.W),D5
      JMP       L0A3C

L0A39:MOVE.W    D0,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_a,A2
      MOVE.W    0(A2,D4.W),D5
      BSR       L0A3C
      SUBQ.W    #1,D2
      BMI       L0A3B

      LEA       bmask_d,A2
      MOVE.W    D3,D4
      ANDI.W    #3,D4
      ASL.W     #2,D4
      MOVE.L    0(A2,D4.W),D6
      MOVE.W    D3,D4
      ANDI.W    #12,D4
      MOVE.L    0(A2,D4.W),D7
L0A3A:MOVE.L    D6,(A1)+
      MOVE.L    D7,(A1)+
      DBF       D2,L0A3A
L0A3B:MOVE.W    D1,D4
      ANDI.W    #15,D4
      ADD.W     D4,D4
      LEA       bmask_b,A2
      MOVE.W    0(A2,D4.W),D5
L0A3C:MOVE.W    D5,D6
      NOT.W     D6

L0A3D:BTST      #0,D3
      BEQ       L0A3E
      OR.W      D5,(A1)+
      BRA       L0A3F
L0A3E:AND.W     D6,(A1)+
L0A3F:BTST      #1,D3
      BEQ       L0A40
      OR.W      D5,(A1)+
      BRA       L0A41
L0A40:AND.W     D6,(A1)+
L0A41:BTST      #2,D3
      BEQ       L0A42
      OR.W      D5,(A1)+
      BRA       L0A43
L0A42:AND.W     D6,(A1)+
L0A43:BTST      #3,D3
      BEQ       L0A44
      OR.W      D5,(A1)+
      RTS
L0A44:AND.W     D6,(A1)+
      RTS

fill_vline:CMP.W     D0,D1
      BGE       L0A46
      EXG       D1,D0
L0A46:SUB.W     D0,D1
      ADD.W     D0,D0
      LEA       mult_tab_160,A2
      MOVE.W    0(A2,D0.W),D0
      MOVE.W    D2,D4
      LSR.W     #1,D4
      ANDI.W    #$FFF8,D4
      ADD.W     D0,D4
      LEA       0(A0,D4.W),A1
      ANDI.W    #15,D2
      ADD.W     D2,D2
      LEA       bmask_c,A2
      MOVE.W    0(A2,D2.W),D5
      MOVE.W    D5,D6
      NOT.W     D6
L0A47:BSR.S     L0A3D
      ADDA.W    #$98,A1
      DBF       D1,L0A47
      RTS

decompress_image_to_screen:MOVEA.L   4(A7),A0        ;source
      MOVEA.L   8(A7),A2        ;destination
      MOVE.L    A3,-(A7)
      LEA       mult_tab_160,A3
      MOVE.W    #200,D2
      ADDQ.L    #2,A0
      MOVE.W    (A0)+,D0
      LEA       0(A0,D0.W),A1
      ASR.W     #1,D0
      BRA       L0A53
L0A49:CLR.W     D1
      MOVE.B    (A0)+,D1
      SUB.W     D1,D2
      BGT       L0A4B
      BRA       L0A4C
L0A4A:MOVE.W    (A1)+,(A2)
      LEA       160(A2),A2
L0A4B:DBF       D1,L0A4A
      BRA       L0A51
L0A4C:ADD.W     D1,D2
      SUB.W     D2,D1
      BRA       L0A4E
L0A4D:MOVE.W    (A1)+,(A2)
      LEA       160(A2),A2
L0A4E:DBF       D2,L0A4D
      MOVE.W    #200,D2
      SUB.W     D1,D2
      LEA       -31998(A2),A2
      BRA       L0A50
L0A4F:MOVE.W    (A1)+,(A2)
      LEA       160(A2),A2
L0A50:DBF       D1,L0A4F
L0A51:CLR.W     D1
      MOVE.B    (A0)+,D1
      SUB.W     D1,D2
      BLS       L0A54
L0A52:ADD.W     D1,D1
      MOVE.W    0(A3,D1.W),D1
      LEA       0(A2,D1.W),A2
L0A53:DBF       D0,L0A49
      MOVEA.L   (A7)+,A3
      RTS
L0A54:ADD.W     #200,D2
      LEA       -31998(A2),A2
      BRA.S     L0A52
      MOVE.L    D0,-(A7)
      MOVEQ     #1,D0
L0A55:DBF       D0,L0A55
      MOVE.L    (A7)+,D0
      RTS

;
;	Constant Data
;
	.data
    	.even
_ctrl_cnts:			 	;	Application Manager
	.dc.b	0, 1, 0			; func 010		
      	.dc.b	2, 1, 1			; func 011		
       	.dc.b	2, 1, 1 		; func 012		
	.dc.b	0, 1, 1			; func 013		
	.dc.b	2, 1, 1			; func 014		
	.dc.b	1, 1, 1			; func 015		
	.dc.b	0, 0, 0			; func 016		
	.dc.b	0, 0, 0			; func 017		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 1, 0			; func 019		
;							 Event Manager
	.dc.b	0, 1, 0			; func 020		
	.dc.b	3, 5, 0			; func 021		
	.dc.b	5, 5, 0			; func 022		
	.dc.b	0, 1, 1			; func 023		
	.dc.b	2, 1, 0			; func 024		
	.dc.b	16, 7, 1 		; func 025		
	.dc.b	2, 1, 0			; func 026		
	.dc.b	0, 0, 0			; func 027		
	.dc.b	0, 0, 0			; func 028		
	.dc.b	0, 0, 0			; func 009		
;							 Menu Manager
	.dc.b	1, 1, 1			; func 030		
	.dc.b	2, 1, 1			; func 031		
	.dc.b	2, 1, 1			; func 032		
	.dc.b	2, 1, 1			; func 033		
	.dc.b	1, 1, 2			; func 034		
	.dc.b	1, 1, 1			; func 005		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0			; func 009		
;							 Object Manager
	.dc.b	2, 1, 1			; func 040		
	.dc.b	1, 1, 1			; func 041		
  	.dc.b	6, 1, 1			; func 042		
	.dc.b	4, 1, 1			; func 043		
	.dc.b	1, 3, 1			; func 044		
	.dc.b	2, 1, 1			; func 045		
	.dc.b	4, 2, 1			; func 046		
	.dc.b	8, 1, 1			; func 047		
	.dc.b	0, 0, 0			; func 048		
	.dc.b	0, 0, 0			; func 049		
;							 Form Manager
	.dc.b	1, 1, 1			; func 050		
	.dc.b	9, 1, 1			; func 051		
	.dc.b	1, 1, 1			; func 002		
	.dc.b	1, 1, 0			; func 003		
	.dc.b	0, 5, 1			; func 004		
	.dc.b	0, 0, 0			; func 005		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0			; func 009		
;							 Dialog Manager
	.dc.b	0, 0, 0			; func 060		
	.dc.b	0, 0, 0			; func 061		
	.dc.b	0, 0, 0			; func 062		
	.dc.b	0, 0, 0			; func 003		
	.dc.b	0, 0, 0			; func 004		
	.dc.b	0, 0, 0			; func 005		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0			; func 009		
;							Graphics Manager
	.dc.b	4, 3, 0			; func 070		
	.dc.b	8, 3, 0			; func 071		
	.dc.b	6, 1, 0			; func 072		
	.dc.b	8, 1, 0			; func 073		
	.dc.b	8, 1, 0			; func 074		
	.dc.b	4, 1, 1			; func 075		
	.dc.b	3, 1, 1			; func 076		
	.dc.b	0, 5, 0			; func 077		
	.dc.b	1, 1, 1			; func 078		
	.dc.b	0, 5, 0			; func 009		
;							Scrap Manager
	.dc.b	0, 1, 1			; func 080		
	.dc.b	0, 1, 1			; func 081		
	.dc.b	0, 0, 0			; func 082		
	.dc.b	0, 0, 0			; func 083		
	.dc.b	0, 0, 0			; func 084		
	.dc.b	0, 0, 0			; func 005		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0			; func 009		
;							fseler Manager
	.dc.b	0, 2, 2			; func 090		
	.dc.b	0, 0, 0			; func 091		
	.dc.b	0, 0, 0			; func 092		
	.dc.b	0, 0, 0			; func 003		
	.dc.b	0, 0, 0			; func 004		
	.dc.b	0, 0, 0			; func 005		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0 		; func 009		
;							Window Manager
	.dc.b	5, 1, 0			; func 100		
	.dc.b	5, 1, 0			; func 101		
	.dc.b	1, 1, 0			; func 102		
	.dc.b	1, 1, 0			; func 103		
	.dc.b	2, 5, 0			; func 104		
	.dc.b	6, 1, 0			; func 105		
	.dc.b	2, 1, 0			; func 106		
	.dc.b	1, 1, 0			; func 107		
	.dc.b	6, 5, 0			; func 108		
	.dc.b	0, 0, 0 		; func 009		
;							Resource Manger
	.dc.b	0, 1, 1			; func 110		
	.dc.b	0, 1, 0			; func 111		
	.dc.b	2, 1, 0			; func 112		
	.dc.b	2, 1, 1			; func 113		
	.dc.b	1, 1, 1			; func 114		
	.dc.b	0, 0, 0			; func 115		
	.dc.b	0, 0, 0			; func 006		
	.dc.b	0, 0, 0			; func 007		
	.dc.b	0, 0, 0			; func 008		
	.dc.b	0, 0, 0			; func 009		
;							Shell Manager
	.dc.b	0, 1, 2			; func 120		
	.dc.b	3, 1, 2			; func 121		
	.dc.b	1, 1, 1			; func 122		
	.dc.b	1, 1, 1			; func 123		
	.dc.b	0, 1, 1			; func 124		
	.dc.b	0, 1, 2			; func 125		

color_palette:  DC.W $0000,$0566,$0455,$0227
                DC.W $0444,$0122,$0344,$0233
                DC.W $0770,$0740,$0403,$0707
                DC.W $0057,$0060,$0700,$0777

color_ply_back: DC.W 8,3,9,13
                DC.W 11,12,10,15
                DC.W 8,3,9,13
                DC.W 11,12,10,15
color_ply_frame:DC.W 0,0,0,0
                DC.W 0,0,0,0
                DC.W 10,11,10,11
                DC.W 10,10,11,10

team_notes_color_table: DC.W 8,3,9,13

richtung_table: DC.W -7,-7,1,9,-1,1,0 ;N
                DC.W 8,8,-8,0,1,-1,1 ;NO
                DC.W -7,8,9,0,1,1,1 ;O
                DC.W 8,-7,0,9,1,1,0 ;SO
                DC.W 8,8,0,-8,1,-1,0 ;S
                DC.W -7,-7,9,1,-1,1,1 ;SW
                DC.W 8,-7,-8,1,-1,-1,1 ;W
                DC.W -7,8,1,-8,-1,-1,0 ;NW

sound_shot:     DC.B $07,$34,$08,$00,$09,$00,$01,$00
                DC.B $03,$00,$00,$96,$08,$0F,$06,$04
                DC.B $02,$C8,$09,$0F,$82,$01,$00,$82
                DC.B $08,$0E,$06,$06,$02,$B4,$09,$0E
                DC.B $82,$01,$00,$8C,$08,$0D,$06,$08
                DC.B $02,$BE,$09,$0D,$82,$01,$00,$78
                DC.B $08,$0C,$06,$0A,$02,$AA,$09,$0C
                DC.B $82,$01,$00,$82,$08,$0B,$06,$0C
                DC.B $02,$B4,$09,$0B,$82,$01,$00,$6E
                DC.B $08,$0A,$06,$0E,$02,$A0,$09,$0A
                DC.B $82,$01,$00,$78,$08,$09,$06,$10
                DC.B $02,$AA,$09,$09,$82,$01,$00,$64
                DC.B $08,$08,$06,$12,$02,$96,$09,$08
                DC.B $82,$01,$00,$6E,$08,$07,$06,$14
                DC.B $02,$A0,$09,$07,$82,$01,$00,$5A
                DC.B $08,$06,$06,$16,$02,$8C,$09,$06
                DC.B $82,$01,$00,$64,$08,$05,$06,$18
                DC.B $02,$96,$09,$05,$82,$01,$00,$50
                DC.B $08,$04,$06,$1A,$02,$82,$09,$04
                DC.B $82,$01,$00,$5A,$08,$03,$06,$1C
                DC.B $02,$8C,$09,$03,$82,$01,$00,$46
                DC.B $08,$02,$06,$1E,$02,$78,$09,$02
                DC.B $82,$01,$00,$50,$08,$01,$06,$1F
                DC.B $02,$82,$09,$01,$82,$01,$08,$00
                DC.B $09,$00,$82,$00
sound_hit:      DC.B $07,$36,$08,$10,$00,$FF,$01,$0F
                DC.B $06,$1F,$0B,$00,$0C,$10,$0D,$00
                DC.B $82,$00

dispatch_table: DC.L dispatch_nothing
                DC.L dispatch_master
                DC.L dispatch_slave
                DC.L dispatch_solo
                DC.L dispatch_automatic
                DC.L dispatch_midicam

loosershape_img:DC.W $8000,$4000,$E001,$C000 ;die Zunge beim Verlierer
                DC.W $FF7F,$C000,$FF7F,$8000
                DC.W $7FFF,$0000,$3FFF,$0000
                DC.W $1FFE,$0000,$0FF8,$0000
                DC.W $03E0,$0000,$0000,$0000
                DS.W 16
blinzshape_img: DC.W $8002,$C006,$600C,$BFFA ;Blinzeln des Gewinners
                DC.W $2AA8,$0AA0,$0000,$0000
                DS.W 4
lose_anim:      DC.W  0, 1, 2, 3, 3, 2, 1, 0,19,18,17,17,18,19, 0, 1, 2, 3, 3, 2, 1, 0,19,18,17,17,18,19, 0
winner_anim:    DC.W  0, 0, 0,19,19,18,17,16,15,14,13,12,11,10,10,10,10,10,10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0

receive_own_number_table:
      DC.L      ' ','!','#','$','%',')','0','1','2','3','4','5','6','7','8','9','@','^',0
      DC.L      receive_own_number_table_20
      DC.L      receive_own_number_table_10
      DC.L      receive_own_number_table_12
      DC.L      receive_own_number_table_13
      DC.L      receive_own_number_table_14
      DC.L      receive_own_number_table_9
      DC.L      receive_own_number_table_9
      DC.L      receive_own_number_table_0
      DC.L      receive_own_number_table_1
      DC.L      receive_own_number_table_2
      DC.L      receive_own_number_table_3
      DC.L      receive_own_number_table_4
      DC.L      receive_own_number_table_5
      DC.L      receive_own_number_table_6
      DC.L      receive_own_number_table_7
      DC.L      receive_own_number_table_8
      DC.L      receive_own_number_table_11
      DC.L      receive_own_number_table_15
      DC.L      receive_own_number_table_default

midicam_start_setup:
                DC.W -1, 0,$0060
                DC.W  0,-1,$0020
                DC.W  1, 0,$00E0
                DC.W  0, 1,$00A0

crossedsmil_img:DC.W $03F0,$0000,$0FFC,$0000 ;durchgekreuzter Smily
                DC.W $3E1F,$0000,$7007,$8000 ;in der Scoreanzeige
                DC.W $600D,$8000,$C018,$C000
                DC.W $C070,$C000,$C0E0,$C000
                DC.W $C1C0,$C000,$C380,$C000
                DC.W $6301,$8000,$7E03,$8000
                DC.W $3C0F,$0000,$0FFC,$0000
                DC.W $03F0,$0000,$0000,$0000
                DS.W 28
mapsmily_img:   DC.W $7000,$F800,$F800,$F800
                DC.W $7000,$0000,$0000,$0000
                DC.W $0000,$0000
mapsmily2_img:  DC.W $0000,$5000,$0000,$7000
                DS.W 7

mouse_dy2:DC.W      $00

str_please_run_in_low_resolution_or_high_res:DC.B      '[3][ |Please run in|LOW resolution|or HIGH res.][OK]',$00
str_booboo_reading_midimaze_d8a:DC.B      '[3][ |Boo-boo|reading|MIDIMAZE.D8A][OK]',$00
str_midimaze_d8a:DC.B      'MIDIMAZE.D8A',$00
str_booboo_opening_midimaze_d8a:DC.B      '[3][ |Boo-boo|opening|MIDIMAZE.D8A][OK]',$00
str_midicam_1:DC.B      ' M I D I C A M ',$00
str_midicam_2:DC.B      ' M I D I C A M ',$00
str_says:DC.B      ' says:',$00
str_have_a_nice_day_1:DC.B      '"Have a nice day!"',$00
str_game_suspended_continue:DC.B      '[1][ |Game suspended.| Continue?][Yeah|Nah]',$00
str_your_team_wins:DC.B      ' Your team wins!',$00
str_your_team_loses:DC.B      ' Your team loses!',$00
str_you_win:DC.B      '    You win!',$00
str_wins:DC.B      ' wins!',$00
str_have_a_nice_day_2:DC.B      '"Have a nice day!"',$00
str_spaces:DC.B      '               ',$00

rsc_strings:DC.L      rsc_str_0_atari_logo
      DC.L      rsc_str_1_maze
      DC.L      rsc_str_2_about_midimaze
      DC.L      rsc_str_3_separator_line
      DC.L      rsc_str_4_1
      DC.L      rsc_str_5_2
      DC.L      rsc_str_6_3
      DC.L      rsc_str_7_4
      DC.L      rsc_str_8_5
      DC.L      rsc_str_9_6
      DC.L      rsc_str_10_load
      DC.L      rsc_str_11_reset_score
      DC.L      rsc_str_12_separator_line
      DC.L      rsc_str_13_play
      DC.L      rsc_str_14_quit
      DC.L      rsc_str_15_separator_line
      DC.L      rsc_str_16_names
      DC.L      rsc_str_17_this_is_a
      DC.L      rsc_str_18_SLAVE
      DC.L      rsc_str_19_machine
      DC.L      rsc_str_20_boo_boo
      DC.L      rsc_str_21_the_MIDI_ring
      DC.L      rsc_str_22_has_timed_out
      DC.L      rsc_str_23_game_terminated_by_the
      DC.L      rsc_str_24_bozo_on_the_master_machine
      DC.L      rsc_str_25_guru_bubu
      DC.L      rsc_str_26_maze_too_small
      DC.L      rsc_str_27_mouse_control
      DC.L      rsc_str_28_selected
      DC.L      rsc_str_29_joystick_control
      DC.L      rsc_str_30_selected
      DC.L      rsc_str_31_you_are
      DC.L      rsc_str_32_number___
      DC.L      rsc_str_33_select_drones
      DC.L      rsc_str_34_very
      DC.L      rsc_str_35_not_so
      DC.L      rsc_str_36_dumb
      DC.L      rsc_str_37__dumb
      DC.L      rsc_str_38_dumb
      DC.L      rsc_str_39__0
      DC.L      rsc_str_40__0
      DC.L      rsc_str_41__0
      DC.L      rsc_str_42_plain
      DC.L      rsc_str_43_reload_time
      DC.L      rsc_str_44_fast
      DC.L      rsc_str_45_slow
      DC.L      rsc_str_46_revive_time
      DC.L      rsc_str_47_slow
      DC.L      rsc_str_48_fast
      DC.L      rsc_str_49_revive
      DC.L      rsc_str_50_slow
      DC.L      rsc_str_51_fast
      DC.L      rsc_str_52_revive_with
      DC.L      rsc_str_53_1_life
      DC.L      rsc_str_54_2_lives
      DC.L      rsc_str_55_3_lives
      DC.L      rsc_str_56_00_machines_on_line
      DC.L      rsc_str_57_nah
      DC.L      rsc_str_58_yeah
      DC.L      rsc_str_59_singles
      DC.L      rsc_str_60_teams
      DC.L      rsc_str_61_player_1
      DC.L      rsc_str_62_player_2
      DC.L      rsc_str_63_player_3
      DC.L      rsc_str_64_player_4
      DC.L      rsc_str_65_player_5
      DC.L      rsc_str_66_player_6
      DC.L      rsc_str_67_player_7
      DC.L      rsc_str_68_player_8
      DC.L      rsc_str_69_player_9
      DC.L      rsc_str_70_player_10
      DC.L      rsc_str_71_player_11
      DC.L      rsc_str_72_player_12
      DC.L      rsc_str_73_player_13
      DC.L      rsc_str_74_player_14
      DC.L      rsc_str_75_player_15
      DC.L      rsc_str_76_player_16
      DC.L      rsc_str_77_o_tay
      DC.L      rsc_str_78_friendly_fire
      DC.L      rsc_str_79_the_game_is
      DC.L      rsc_str_80_suspended
      DC.L      rsc_str_81_player_xx
      DC.L      rsc_str_82_name_____________
      DC.L      rsc_str_83_nnnnnnnnnn
      DC.L      rsc_str_84_OK
      DC.L      rsc_str_85_MIDIMAZE_10
      DC.L      rsc_str_86_copyright_1987
      DC.L      rsc_str_87_xanth_fx
      DC.L      rsc_str_88_all_rights_reserved
      DC.L      rsc_str_89_wow
      DC.L      rsc_str_90_this_is_a
      DC.L      rsc_str_91_midicam
      DCB.L     14,0
rsrc_str_player_xx:DC.L      $51
rsrc_str_name:DC.L      $52
rsrc_str_name_mask:DC.L      $53

      DC.B      $00,$03,$00,$06
      DC.B      $00,$02,$11,$80,$00,$00,$FF,$FF
      DC.B      $00,$0B,$00,$11

rsrc_tree:
            ;ob_next ob_head ob_tail ob_type                          ob_flags ob_state     ob_spec    ob_x    ob_y  ob_width ob_height
            ; menu bar
            {     -1, 0x0001, 0x0005,   G_IBOX,                              0,        0, 0x00000000, 0x0000, 0x0000, 0x005A, 0x0019 },   ; 0x0000/0 : menu bar
            { 0x0005, 0x0002, 0x0002,    G_BOX,                              0,        0, 0x00001100, 0x0000, 0x0000, 0x005A, 0x0201 },   ; 0x0000/1 : 
            { 0x0001, 0x0003, 0x0004,   G_IBOX,                              0,        0, 0x00000000, 0x0002, 0x0000, 0x000A, 0x0301 },   ; 0x0000/2 : 
            { 0x0004,     -1,     -1,  G_TITLE,                              0,        0, 0x00000000, 0x0000, 0x0000, 0x0004, 0x0301 },   ; 0x0000/3 : rsc_str_0_atari_logo
            { 0x0002,     -1,     -1,  G_TITLE,                              0,        0, 0x00000001, 0x0004, 0x0000, 0x0006, 0x0301 },   ; 0x0000/4 : rsc_str_1_maze
            { 0x0000, 0x0006, 0x000F,   G_IBOX,                              0,        0, 0x00000000, 0x0000, 0x0301, 0x0050, 0x0013 },   ; 0x0000/5 : 
            { 0x000F, 0x0007, 0x000E,    G_BOX,                              0,        0, 0x00FF1100, 0x0002, 0x0000, 0x0014, 0x0008 },   ; 0x0000/6 : 
            { 0x0008,     -1,     -1, G_STRING,                              0,        0, 0x00000002, 0x0000, 0x0000, 0x0014, 0x0001 },   ; 0x0000/7 : rsc_str_2_about_midimaze
            { 0x0009,     -1,     -1, G_STRING,                              0, DISABLED, 0x00000003, 0x0000, 0x0001, 0x0014, 0x0001 }, ; 0x0000/8 : rsc_str_3_separator_line
            { 0x000A,     -1,     -1, G_STRING,                              0,        0, 0x00000004, 0x0000, 0x0002, 0x0014, 0x0001 },   ; 0x0000/9 : rsc_str_4_1
            { 0x000B,     -1,     -1, G_STRING,                              0,        0, 0x00000005, 0x0000, 0x0003, 0x0014, 0x0001 },   ; 0x0000/10 : rsc_str_5_2
            { 0x000C,     -1,     -1, G_STRING,                              0,        0, 0x00000006, 0x0000, 0x0004, 0x0014, 0x0001 },   ; 0x0000/11 : rsc_str_6_3
            { 0x000D,     -1,     -1, G_STRING,                              0,        0, 0x00000007, 0x0000, 0x0005, 0x0014, 0x0001 },   ; 0x0000/12 : rsc_str_7_4
            { 0x000E,     -1,     -1, G_STRING,                              0,        0, 0x00000008, 0x0000, 0x0006, 0x0014, 0x0001 },   ; 0x0000/13 : rsc_str_8_5
            { 0x0006,     -1,     -1, G_STRING,                              0,        0, 0x00000009, 0x0000, 0x0007, 0x0014, 0x0001 },   ; 0x0000/14 : rsc_str_9_6
            { 0x0005, 0x0010, 0x0016,    G_BOX,                              0,        0, 0x00FF1100, 0x0006, 0x0000, 0x000D, 0x0007 },   ; 0x0000/15 : 
            { 0x0011,     -1,     -1, G_STRING,                              0,        0, 0x0000000A, 0x0000, 0x0000, 0x000D, 0x0001 },   ; 0x0000/16 : rsc_str_10_load
            { 0x0012,     -1,     -1, G_STRING,                              0,        0, 0x0000000B, 0x0000, 0x0002, 0x000D, 0x0001 },   ; 0x0000/17 : rsc_str_11_reset_score
            { 0x0013,     -1,     -1, G_STRING,                              0, DISABLED, 0x0000000C, 0x0000, 0x0001, 0x000D, 0x0001 }, ; 0x0000/18 : rsc_str_12_separator_line
            { 0x0014,     -1,     -1, G_STRING,                              0,        0, 0x0000000D, 0x0000, 0x0004, 0x000D, 0x0001 },   ; 0x0000/19 : rsc_str_13_play
            { 0x0015,     -1,     -1, G_STRING,                              0,        0, 0x0000000E, 0x0000, 0x0006, 0x000D, 0x0001 },   ; 0x0000/20 : rsc_str_14_quit
            { 0x0016,     -1,     -1, G_STRING,                              0, DISABLED, 0x0000000F, 0x0000, 0x0005, 0x000D, 0x0001 }, ; 0x0000/21 : rsc_str_15_separator_line
            { 0x000F,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000010, 0x0000, 0x0003, 0x000D, 0x0001 },   ; 0x0000/22 : rsc_str_16_names

            {     -1, 0x0001, 0x0003,    G_BOX,                              0, 0x0010, 0x00021100, 0x0000, 0x0000, 0x000C, 0x0005 },   ; 0x0000/23 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x00000011, 0x0001, 0x0001, 0x0009, 0x0001 },   ; 0x0000/1 : rsc_str_17_this_is_a
            { 0x0003,     -1,     -1, G_STRING,                              0,        0, 0x00000012, 0x0003, 0x0002, 0x0005, 0x0001 },   ; 0x0000/2 : rsc_str_18_SLAVE
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000013, 0x0002, 0x0003, 0x0008, 0x0001 },   ; 0x0000/3 : rsc_str_20_boo_boo

            {     -1, 0x0001, 0x0003,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x0011, 0x0005 },   ; 0x0000/27 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x00000014, 0x0002, 0x0001, 0x0009, 0x0001 },   ; 0x0000/1 : rsc_str_20_boo_boo
            { 0x0003,     -1,     -1, G_STRING,                              0,        0, 0x00000015, 0x0002, 0x0002, 0x000D, 0x0001 },   ; 0x0000/2 : rsc_str_21_the_MIDI_ring
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000016, 0x0002, 0x0003, 0x000E, 0x0001 },   ; 0x0000/3 : rsc_str_22_has_timed_out

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x001D, 0x0004 },   ; 0x0000/31 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x00000017, 0x0003, 0x0001, 0x0016, 0x0001 },   ; 0x0000/1 : rsc_str_23_game_terminated_by_the
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000018, 0x0001, 0x0002, 0x001B, 0x0001 },   ; 0x0000/2 : rsc_str_24_bozo_on_the_master_machine

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x0013, 0x0004 },   ; 0x0000/34 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x00000019, 0x0003, 0x0001, 0x010B, 0x0001 },   ; 0x0000/1 : rsc_str_25_guru_bubu
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x0000001A, 0x0001, 0x0002, 0x0311, 0x0101 },   ; 0x0000/2 : rsc_str_26_maze_too_small

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x000F, 0x0004 },   ; 0x0000/37 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x0000001B, 0x0001, 0x0001, 0x030D, 0x0001 },   ; 0x0000/1 : rsc_str_27_mouse_control
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x0000001C, 0x0003, 0x0002, 0x0009, 0x0001 },   ; 0x0000/2 : rsc_str_28_selected

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x0012, 0x0004 },   ; 0x0000/40 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x0000001D, 0x0001, 0x0001, 0x0410, 0x0001 },   ; 0x0000/1 : rsc_str_29_joystick_control
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x0000001E, 0x0005, 0x0002, 0x0009, 0x0001 },   ; 0x0000/2 : rsc_str_30_selected

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x000C, 0x0004 },   ; 0x0000/43 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x0000001F, 0x0002, 0x0001, 0x0407, 0x0001 },   ; 0x0000/1 : rsc_str_31_you_are
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000020, 0x0001, 0x0002, 0x0009, 0x0001 },   ; 0x0000/2 : rsc_str_32_number___

            ; Preferences dialog
            {     -1, 0x0001, 0x0032,    G_BOX,                              0,        0, 0x00001100, 0x0000, 0x0000, 0x0626, 0x0214 },   ; 0x0000/46 : 
            { 0x002E, 0x0002, 0x0002,   G_IBOX,                              0,        0, 0x00FE2100, 0x0000, 0x0000, 0x001C, 0x0214 },   ; 0x0000/1 : 
            { 0x0001, 0x0003, 0x002D,   G_IBOX,                              0, DISABLED, 0x00021100, 0x0000, 0x0000, 0x001C, 0x0214 },   ; 0x0000/2 : 
            { 0x001A, 0x0004, 0x0019,   G_IBOX,                              0,        0, 0x02021100, 0x0001, 0x030B, 0x001A, 0x0008 },   ; 0x0000/3 : "Select Drones" box

            { 0x0005,     -1,     -1, G_STRING,                              0,        0, 0x00000021, 0x0006, 0x0500, 0x000E, 0x0001 },   ; 0x0000/4 : rsc_str_33_select_drones
            { 0x0006,     -1,     -1, G_STRING,                              0,        0, 0x00000022, 0x0002, 0x0002, 0x0004, 0x0001 },   ; 0x0000/5 : rsc_str_34_very
            { 0x0007,     -1,     -1, G_STRING,                              0,        0, 0x00000023, 0x0512, 0x0002, 0x0006, 0x0001 },   ; 0x0000/6 : rsc_str_35_not_so
            { 0x0008,     -1,     -1, G_STRING,                              0,        0, 0x00000024, 0x0002, 0x0003, 0x0004, 0x0001 },   ; 0x0000/7 : rsc_str_36_dumb
            { 0x0009,     -1,     -1, G_STRING,                              0,        0, 0x00000025, 0x0013, 0x0003, 0x0006, 0x0001 },   ; 0x0000/8 : rsc_str_37__dumb
            { 0x000A,     -1,     -1, G_STRING,                              0,        0, 0x00000026, 0x000B, 0x0003, 0x0004, 0x0001 },   ; 0x0000/9 : rsc_str_38_dumb
            { 0x000F, 0x000B, 0x000D,   G_IBOX,                              0,        0, 0x00001100, 0x0002, 0x0204, 0x0004, 0x0003 },   ; 0x0000/10 : 
            { 0x000C,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x01FF1100, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/11 : 
            { 0x000D,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x02FF1100, 0x0000, 0x0002, 0x0004, 0x0001 },   ; 0x0000/12 : 
            { 0x000A, 0x000E, 0x000E,    G_BOX,                              0,        0, 0x00FF1100, 0x0000, 0x0001, 0x0004, 0x0001 },   ; 0x0000/13 : 
            { 0x000D,     -1,     -1, G_STRING,                              0,        0, 0x00000027, 0x0001, 0x0000, 0x0002, 0x0001 },   ; 0x0000/14 : rsc_str_39__0
            { 0x0014, 0x0010, 0x0012,   G_IBOX,                              0,        0, 0x00001100, 0x000B, 0x0204, 0x0004, 0x0003 },   ; 0x0000/15 : 
            { 0x0011,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x01FF1100, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/16 : 
            { 0x0012,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x02FF1100, 0x0000, 0x0002, 0x0004, 0x0001 },   ; 0x0000/17 : 
            { 0x000F, 0x0013, 0x0013,    G_BOX,                              0,        0, 0x00FF1100, 0x0000, 0x0001, 0x0004, 0x0001 },   ; 0x0000/18 : 
            { 0x0012,     -1,     -1, G_STRING,                              0,        0, 0x00000028, 0x0001, 0x0000, 0x0002, 0x0001 },   ; 0x0000/19 : rsc_str_40__0
            { 0x0019, 0x0015, 0x0017,   G_IBOX,                              0,        0, 0x00001100, 0x0014, 0x0204, 0x0004, 0x0003 },   ; 0x0000/20 : 
            { 0x0016,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x01FF1100, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/21 : 
            { 0x0017,     -1,     -1, G_BOXCHAR,                     TOUCHEXIT,        0, 0x02FF1100, 0x0000, 0x0002, 0x0004, 0x0001 },   ; 0x0000/22 : 
            { 0x0014, 0x0018, 0x0018,    G_BOX,                              0,        0, 0x00FF1100, 0x0000, 0x0001, 0x0004, 0x0001 },   ; 0x0000/23 : 
            { 0x0017,     -1,     -1, G_STRING,                              0,        0, 0x00000029, 0x0001, 0x0000, 0x0002, 0x0001 },   ; 0x0000/24 : rsc_str_41__0
            { 0x0003,     -1,     -1, G_STRING,                              0,        0, 0x0000002A, 0x040A, 0x0002, 0x0005, 0x0001 },   ; 0x0000/25 : rsc_str_42_plain

            { 0x002D, 0x001B, 0x0023,   G_IBOX,                              0,        0, 0x00021100, 0x0001, 0x0002, 0x0619, 0x0308 },   ; 0x0000/26 : "Settings" box
            { 0x001C,     -1,     -1, G_STRING,                              0,        0, 0x0000002B, 0x0002, 0x0001, 0x000C, 0x0001 },   ; 0x0000/27 : rsc_str_43_reload_time
            { 0x001F, 0x001D, 0x001E,   G_IBOX,                              0,        0, 0x00001100, 0x000F, 0x0001, 0x000A, 0x0001 },   ; 0x0000/28 : Reload Radiogroup
            { 0x001E,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        1, 0x0000002C, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/29 : rsc_str_44_fast
            { 0x001C,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        0, 0x0000002D, 0x0105, 0x0000, 0x0004, 0x0001 },   ; 0x0000/30 : rsc_str_45_slow
            { 0x0020,     -1,     -1, G_STRING,                              0,        0, 0x0000002E, 0x0003, 0x0002, 0x000B, 0x0001 },   ; 0x0000/31 : rsc_str_46_revive_time
            { 0x0023, 0x0021, 0x0022,   G_IBOX,                              0,        0, 0x00001100, 0x000F, 0x0002, 0x000A, 0x0001 },   ; 0x0000/32 : Regen Radiogroup
            { 0x0022,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        0, 0x0000002F, 0x0105, 0x0000, 0x0004, 0x0001 },   ; 0x0000/33 : rsc_str_47_slow
            { 0x0020,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        1, 0x00000030, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/34 : rsc_str_48_fast

            { 0x001A, 0x0024, 0x0029,   G_IBOX,                              0,        0, 0x00001100, 0x0001, 0x0003, 0x0018, 0x0005 },   ; 0x0000/35 : Revive Radiogroup
            { 0x0025,     -1,     -1, G_STRING,                              0,        0, 0x00000031, 0x0006, 0x0000, 0x0007, 0x0001 },   ; 0x0000/36 : rsc_str_49_revive
            { 0x0028, 0x0026, 0x0027,   G_IBOX,                              0,        0, 0x00001100, 0x000E, 0x0000, 0x000A, 0x0001 },   ; 0x0000/37 : 
            { 0x0027,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        0, 0x00000032, 0x0105, 0x0000, 0x0004, 0x0001 },   ; 0x0000/38 : rsc_str_50_slow
            { 0x0025,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        1, 0x00000033, 0x0000, 0x0000, 0x0004, 0x0001 },   ; 0x0000/39 : rsc_str_51_fast
            { 0x0029,     -1,     -1, G_STRING,                              0,        0, 0x00000034, 0x0007, 0x0002, 0x000C, 0x0001 },   ; 0x0000/40 : rsc_str_52_revive_with
            { 0x0023, 0x002A, 0x002C,   G_IBOX,                              0,        0, 0x00001100, 0x0001, 0x0004, 0x0016, 0x0001 },   ; 0x0000/41 : Lives Radiogroup
            { 0x002B,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        0, 0x00000035, 0x0000, 0x0000, 0x0006, 0x0001 },   ; 0x0000/42 : rsc_str_53_1_life
            { 0x002C,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        1, 0x00000036, 0x0007, 0x0000, 0x0007, 0x0001 },   ; 0x0000/43 : rsc_str_54_2_lives
            { 0x0029,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        0, 0x00000037, 0x000F, 0x0000, 0x0007, 0x0001 },   ; 0x0000/44 : rsc_str_55_3_lives

            { 0x0002,     -1,     -1, G_BUTTON,                     SELECTABLE,        0, 0x00000038, 0x0404, 0x0600, 0x0013, 0x0001 },   ; 0x0000/45 : rsc_str_56_00_machines_on_line

            { 0x0032, 0x002F, 0x002F,   G_IBOX,                              0,        0, 0x00FE2100, 0x061D, 0x010F, 0x0008, 0x0204 },   ; 0x0000/46 : "Yeah / Nah" frame
            { 0x002E, 0x0030, 0x0031,   G_IBOX,                              0, DISABLED, 0x00011100, 0x0100, 0x0000, 0x0707, 0x0204 },   ; 0x0000/47 : 
            { 0x0031,     -1,     -1, G_BUTTON,                EXIT|SELECTABLE,        0, 0x00000039, 0x0001, 0x0402, 0x0605, 0x0101 },   ; 0x0000/48 : rsc_str_57_nah
            { 0x002F,     -1,     -1, G_BUTTON,        EXIT|DEFAULT|SELECTABLE,        0, 0x0000003A, 0x0700, 0x0500, 0x0006, 0x0101 },   ; 0x0000/49 : rsc_str_58_yeah

            { 0x0000, 0x0033, 0x0033,   G_IBOX,                              0,        0, 0x00FE2100, 0x011D, 0x040A, 0x0509, 0x0603 },   ; 0x0000/50 : "Singles / Team" frame
            { 0x0032, 0x0034, 0x0034,   G_IBOX,                              0, DISABLED, 0x00011100, 0x0100, 0x0000, 0x0409, 0x0603 },   ; 0x0000/51 : 
            { 0x0033, 0x0035, 0x0036,   G_IBOX,                              0,        0, 0x00001100, 0x0500, 0x0400, 0x0108, 0x0502 },   ; 0x0000/52 : 
            { 0x0036,     -1,     -1, G_BUTTON,             RBUTTON|SELECTABLE,        1, 0x0000003B, 0x0100, 0x0100, 0x0008, 0x0001 },   ; 0x0000/53 : rsc_str_59_singles
            { 0x0034,     -1,     -1,G_BUTTON,TOUCHEXIT|LASTOB|RBUTTON|DEFAULT,        0, 0x0000003C, 0x0100, 0x0501, 0x0008, 0x0001 },   ; 0x0000/54 : rsc_str_60_teams

            {     -1, 0x0001, 0x0066,    G_BOX, 0x0000,        0, 0x00011100, 0x0000, 0x0000, 0x0012, 0x0016 },   ; 0x0000/101 : 
            { 0x001A, 0x0002, 0x0014,    G_BOX, 0x0000,        0, 0x00001100, 0x0001, 0x0001, 0x0010, 0x0004 },   ; 0x0000/1 : 
            { 0x0008, 0x0003, 0x0007,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0000, 0x030F, 0x0001 },   ; 0x0000/2 : 
            { 0x0004,     -1,     -1, G_STRING, 0x0000,        0, 0x0000003D, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/3 : rsc_str_61_player_1
            { 0x0005,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/4 : 
            { 0x0006,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/5 : 
            { 0x0007,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/6 : 
            { 0x0002,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/7 : 
            { 0x000E, 0x0009, 0x000D,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0001, 0x000F, 0x0001 },   ; 0x0000/8 : 
            { 0x000A,     -1,     -1, G_STRING, 0x0000,        0, 0x0000003E, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/9 : rsc_str_62_player_2
            { 0x000B,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/10 : 
            { 0x000C,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/11 : 
            { 0x000D,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/12 : 
            { 0x0008,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/13 : 
            { 0x0014, 0x000F, 0x0013,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0002, 0x000F, 0x0001 },   ; 0x0000/14 : 
            { 0x0010,     -1,     -1, G_STRING, 0x0000,        0, 0x0000003F, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/116 : rsc_str_63_player_3
            { 0x0011,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/117 : 
            { 0x0012,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/118 : 
            { 0x0013,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/119 : 
            { 0x000E,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/120 : 
            { 0x0001, 0x0015, 0x0019,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0003, 0x000F, 0x0001 },   ; 0x0000/121 : 
            { 0x0016,     -1,     -1, G_STRING, 0x0000,        0, 0x00000040, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/122 : rsc_str_64_player_4
            { 0x0017,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/123 : 
            { 0x0018,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/124 : 
            { 0x0019,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/125 : 
            { 0x0014,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/126 : 
            { 0x0033, 0x001B, 0x002D,    G_BOX, 0x0000,        0, 0x00001100, 0x0001, 0x0005, 0x0010, 0x0004 },   ; 0x0000/127 : 
            { 0x0021, 0x001C, 0x0020,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0000, 0x000F, 0x0001 },   ; 0x0000/128 : 
            { 0x001D,     -1,     -1, G_STRING, 0x0000,        0, 0x00000041, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/129 : rsc_str_65_player_5
            { 0x001E,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/130 : 
            { 0x001F,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/131 : 
            { 0x0020,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/132 : 
            { 0x001B,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/133 : 
            { 0x0027, 0x0022, 0x0026,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0001, 0x030F, 0x0001 },   ; 0x0000/134 : 
            { 0x0023,     -1,     -1, G_STRING, 0x0000,        0, 0x00000042, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/135 : rsc_str_66_player_6
            { 0x0024,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/136 : 
            { 0x0025,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/137 : 
            { 0x0026,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/138 : 
            { 0x0021,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/139 : 
            { 0x002D, 0x0028, 0x002C,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0002, 0x030F, 0x0001 },   ; 0x0000/140 : 
            { 0x0029,     -1,     -1, G_STRING, 0x0000,        0, 0x00000043, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/141 : rsc_str_67_player_7
            { 0x002A,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/142 : 
            { 0x002B,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/143 : 
            { 0x002C,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/144 : 
            { 0x0027,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/145 : 
            { 0x001A, 0x002E, 0x0032,   G_IBOX, 0x0000,        0, 0x00001100, 0x0000, 0x0003, 0x030F, 0x0001 },   ; 0x0000/146 : 
            { 0x002F,     -1,     -1, G_STRING, 0x0000,        0, 0x00000044, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/147 : rsc_str_68_player_8
            { 0x0030,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/148 : 
            { 0x0031,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/149 : 
            { 0x0032,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        0, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/150 : 
            { 0x002D,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE,        1, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/151 : 
            { 0x004C, 0x0034, 0x0046,    G_BOX, 0x0000, 0x0000, 0x00001100, 0x0001, 0x0009, 0x0010, 0x0004 },   ; 0x0000/152 : 
            { 0x003A, 0x0035, 0x0039,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0000, 0x030F, 0x0001 },   ; 0x0000/153 : 
            { 0x0036,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x00000045, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/154 : rsc_str_69_player_9
            { 0x0037,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/155 : 
            { 0x0038,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/156 : 
            { 0x0039,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/157 : 
            { 0x0034,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/158 : 
            { 0x0040, 0x003B, 0x003F,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0001, 0x030F, 0x0001 },   ; 0x0000/159 : 
            { 0x003C,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x00000046, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/160 : rsc_str_70_player_10
            { 0x003D,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/161 : 
            { 0x003E,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/162 : 
            { 0x003F,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/163 : 
            { 0x003A,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/164 : 
            { 0x0046, 0x0041, 0x0045,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0002, 0x030F, 0x0001 },   ; 0x0000/165 : 
            { 0x0042,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x00000047, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/166 : rsc_str_71_player_11
            { 0x0043,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/167 : 
            { 0x0044,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/168 : 
            { 0x0045,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/169 : 
            { 0x0040,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/170 : 
            { 0x0033, 0x0047, 0x004B,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0003, 0x030F, 0x0001 },   ; 0x0000/171 : 
            { 0x0048,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x00000048, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/172 : rsc_str_72_player_12
            { 0x0049,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/173 : 
            { 0x004A,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/174 : 
            { 0x004B,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/175 : 
            { 0x0046,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/176 : 
            { 0x0065, 0x004D, 0x005F,    G_BOX, 0x0000, 0x0000, 0x00001100, 0x0001, 0x000D, 0x0010, 0x0004 },   ; 0x0000/177 : 
            { 0x0053, 0x004E, 0x0052,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0000, 0x030F, 0x0001 },   ; 0x0000/178 : 
            { 0x004F,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x00000049, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/179 : rsc_str_73_player_13
            { 0x0050,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/180 : 
            { 0x0051,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/181 : 
            { 0x0052,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/182 : 
            { 0x004D,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/183 : 
            { 0x0059, 0x0054, 0x0058,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0001, 0x030F, 0x0001 },   ; 0x0000/184 : 
            { 0x0055,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x0000004A, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/185 : rsc_str_74_player_14
            { 0x0056,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/186 : 
            { 0x0057,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/187 : 
            { 0x0058,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/188 : 
            { 0x0053,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/189 : 
            { 0x005F, 0x005A, 0x005E,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0002, 0x030F, 0x0001 },   ; 0x0000/190 : 
            { 0x005B,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x0000004B, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/191 : rsc_str_75_player_15
            { 0x005C,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/192 : 
            { 0x005D,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/193 : 
            { 0x005E,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/194 : 
            { 0x0059,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/195 : 
            { 0x004C, 0x0060, 0x0064,   G_IBOX, 0x0000, 0x0000, 0x00001100, 0x0000, 0x0003, 0x030F, 0x0001 },   ; 0x0000/196 : 
            { 0x0061,     -1,     -1, G_STRING, 0x0000, 0x0000, 0x0000004C, 0x0000, 0x0000, 0x000A, 0x0001 },   ; 0x0000/197 : rsc_str_76_player_16
            { 0x0062,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00029100, 0x000B, 0x0000, 0x0001, 0x0001 },   ; 0x0000/198 : 
            { 0x0063,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x00026100, 0x010C, 0x0000, 0x0001, 0x0001 },   ; 0x0000/199 : 
            { 0x0064,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0000, 0x0002A100, 0x020D, 0x0000, 0x0001, 0x0001 },   ; 0x0000/200 : 
            { 0x005F,     -1,     -1,    G_BOX, RBUTTON|SELECTABLE, 0x0001, 0x0002F100, 0x030E, 0x0000, 0x0001, 0x0001 },   ; 0x0000/201 : 
            { 0x0066,     -1,     -1, G_BUTTON, 0x0007, 0x0000, 0x0000004D, 0x0005, 0x0014, 0x0008, 0x0001 },   ; 0x0000/202 : rsc_str_77_o_tay
            { 0x0000,     -1,     -1, G_BUTTON,              LASTOB|SELECTABLE, 0x0000, 0x0000004E, 0x0002, 0x0012, 0x000D, 0x0001 },   ; 0x0000/203 : rsc_str_78_friendly_fire

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x000E, 0x0004 },   ; 0x0000/204 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x0000004F, 0x0001, 0x0001, 0x000B, 0x0101 },   ; 0x0000/205 : rsc_str_79_the_game_is
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x00000050, 0x0002, 0x0002, 0x000A, 0x0001 },   ; 0x0000/206 : rsc_str_80_suspended

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x0015, 0x0005 },   ; 0x0000/207 : 
            { 0x0002,     -1,     -1, G_FBOXTEXT,                     EDITABLE,        0, 0x00000000, 0x0002, 0x0001, 0x0011, 0x0001 },   ; 0x0000/208 : rsc_str_82_name_____________/rsc_str_83_nnnnnnnnnn
            { 0x0000,     -1,     -1, G_BUTTON, LASTOB|SELECTABLE|DEFAULT|EXIT,        0, 0x00000054, 0x0010, 0x0003, 0x0003, 0x0001 },   ; 0x0000/209 : rsc_str_84_OK

            {     -1, 0x0001, 0x0005,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x001B, 0x0008 },   ; 0x0000/210 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x00000055, 0x0007, 0x0001, 0x000C, 0x0001 },   ; 0x0000/211 : rsc_str_85_MIDIMAZE_10
            { 0x0003,     -1,     -1, G_STRING,                              0,        0, 0x00000056, 0x0004, 0x0002, 0x0012, 0x0001 },   ; 0x0000/212 : rsc_str_86_copyright_1987
            { 0x0004,     -1,     -1, G_STRING,                              0,        0, 0x00000057, 0x0009, 0x0003, 0x0009, 0x0001 },   ; 0x0000/213 : rsc_str_87_xanth_fx
            { 0x0005,     -1,     -1, G_STRING,                              0,        0, 0x00000058, 0x0003, 0x0004, 0x0014, 0x0001 },   ; 0x0000/214 : rsc_str_88_all_rights_reserved
            { 0x0000,     -1,     -1, G_BUTTON,                  LASTOB|0x0007,        0, 0x00000059, 0x000B, 0x0006, 0x0005, 0x0001 },   ; 0x0000/215 : rsc_str_89_wow

            {     -1, 0x0001, 0x0002,    G_BOX,                              0, OUTLINED, 0x00021100, 0x0000, 0x0000, 0x000D, 0x0004 },   ; 0x0000/216 : 
            { 0x0002,     -1,     -1, G_STRING,                              0,        0, 0x0000005A, 0x0002, 0x0001, 0x0009, 0x0001 },   ; 0x0000/217 : rsc_str_90_this_is_a
            { 0x0000,     -1,     -1, G_STRING,                         LASTOB,        0, 0x0000005B, 0x0003, 0x0002, 0x0007, 0x0001 },   ; 0x0000/218 : rsc_str_91_midicam

rsrc_object_indices:DC.L      0,23,27,31,34,35,40,43,46,101,204,207,210,216
      DC.B      $00,$00,$00,$00,$00,$00,'RSTEST.RSC',$00,$00

maze_loaded_flag:DC.W      $00

menu_commands:DC.L      menu_load_maze
      DC.L      menu_reset_score
      DC.L      menu_nothing
      DC.L      menu_reset_play
      DC.L      menu_quit
      DC.L      menu_nothing
      DC.L      menu_player
revive_lives_rscindices:DC.W      42,43,44

rsc_drones:DC.W      0,0,0

drone_count_up_rscindices:DC.W      $0B,$10,$15
drone_count_down_rscindices:DC.W      $0C,$11,$16
drone_count_number_rscindices:DC.W      $0E,$13,$18
drone_count_box_rscindices:DC.W      $0A,$0F,$14
team_group_rscindices:DC.W      $04,$05,$06,$07
      DC.W      $0A,$0B,$0C,$0D
      DC.W      $10,$11,$12,$13
      DC.W      $16,$17,$18,$19
      DC.W      $1D,$1E,$1F,' '
      DC.W      '#','$','%','&'
      DC.W      ')','*','+',','
      DC.W      '/','0','1','2'
      DC.W      '6','7','8','9'
      DC.W      '<','=','>','?'
      DC.W      'B','C','D','E'
      DC.W      'H','I','J','K'
      DC.W      'O','P','Q','R'
      DC.W      'U','V','W','X'
      DC.W      '[','\',']','^'
      DC.W      'a','b','c','d'
rsc_playername_rscindices:DC.W      $03,$09,$0F,$15
      DC.W      $1C,'"','(','.'
      DC.W      '5',';','A','G'
      DC.W      'N','T','Z',$60

str_drone_type_br_array:DC.L      str_drone_type_target_br
      DC.L      str_drone_type_std_br
      DC.L      str_drone_type_ninja_br
str_dash_array:DC.L      str_dash
str_player_array:DC.L      str_player
str_drone_type_array:DC.L      str_drone_type_target
      DC.L      str_drone_type_std
      DC.L      str_drone_type_ninja

rsc_str_0_atari_logo:DC.B      ' ',$0E,$0F,' ',$00
rsc_str_1_maze:DC.B      ' MAZE ',$00
rsc_str_2_about_midimaze:DC.B      '  About MIDImaze... ',$00
rsc_str_3_separator_line:DC.B      '--------------------',$00
rsc_str_4_1:DC.B      '1',$00
rsc_str_5_2:DC.B      '2',$00
rsc_str_6_3:DC.B      '3',$00
rsc_str_7_4:DC.B      '4',$00
rsc_str_8_5:DC.B      '5',$00
rsc_str_9_6:DC.B      '6',$00
rsc_str_10_load:DC.B      ' Load... ',$00
rsc_str_11_reset_score:DC.B      ' Reset score',$00
rsc_str_12_separator_line:DC.B      '-------------',$00
rsc_str_13_play:DC.B      ' Play..!',$00
rsc_str_14_quit:DC.B      ' Quit',$00
rsc_str_15_separator_line:DC.B      '-------------',$00
rsc_str_16_names:DC.B      ' Names...',$00
rsc_str_17_this_is_a:DC.B      'This is a',$00
rsc_str_18_SLAVE:DC.B      'SLAVE',$00
rsc_str_19_machine:DC.B      'machine.',$00
rsc_str_20_boo_boo:DC.B      'Boo-boo:',$00
rsc_str_21_the_MIDI_ring:DC.B      'The MIDI ring',$00
rsc_str_22_has_timed_out:DC.B      'has timed out.',$00
rsc_str_23_game_terminated_by_the:DC.B      'Game terminated by the',$00
rsc_str_24_bozo_on_the_master_machine:DC.B      'bozo on the master machine.',$00
rsc_str_25_guru_bubu:DC.B      'Guru bu-bu:',$00
rsc_str_26_maze_too_small:DC.B      '(maze too small?)',$00
rsc_str_27_mouse_control:DC.B      'Mouse control',$00
rsc_str_28_selected:DC.B      'selected.',$00
rsc_str_29_joystick_control:DC.B      'Joystick control',$00
rsc_str_30_selected:DC.B      'selected.',$00
rsc_str_31_you_are:DC.B      'You are',$00
rsc_str_32_number___:DC.B      'Number __',$00
rsc_str_33_select_drones:DC.B      'Select Drones:',$00
rsc_str_34_very:DC.B      'Very',$00
rsc_str_35_not_so:DC.B      'Not so',$00
rsc_str_36_dumb:DC.B      'Dumb',$00
rsc_str_37__dumb:DC.B      ' Dumb',$00
rsc_str_38_dumb:DC.B      'Dumb',$00
rsc_str_39__0:DC.B      ' 0',$00
rsc_str_40__0:DC.B      ' 0',$00
rsc_str_41__0:DC.B      ' 0',$00
rsc_str_42_plain:DC.B      'Plain',$00
rsc_str_43_reload_time:DC.B      'Reload Time:',$00
rsc_str_44_fast:DC.B      'Fast',$00
rsc_str_45_slow:DC.B      'Slow',$00
rsc_str_46_revive_time:DC.B      'Regen Time:',$00
rsc_str_47_slow:DC.B      'Slow',$00
rsc_str_48_fast:DC.B      'Fast',$00
rsc_str_49_revive:DC.B      'Revive:',$00
rsc_str_50_slow:DC.B      'Slow',$00
rsc_str_51_fast:DC.B      'Fast',$00
rsc_str_52_revive_with:DC.B      'Revive with:',$00
rsc_str_53_1_life:DC.B      '1 Life',$00
rsc_str_54_2_lives:DC.B      '2 Lives',$00
rsc_str_55_3_lives:DC.B      '3 Lives',$00
rsc_str_56_00_machines_on_line:DC.B      '00 Machines on-line',$00
rsc_str_57_nah:DC.B      'Nah',$00
rsc_str_58_yeah:DC.B      'Yeah!',$00
rsc_str_59_singles:DC.B      'Singles',$00
rsc_str_60_teams:DC.B      'Teams',$00
rsc_str_61_player_1:DC.B      'Player # 1',$00
rsc_str_62_player_2:DC.B      'Player # 2',$00
rsc_str_63_player_3:DC.B      'Player # 3',$00
rsc_str_64_player_4:DC.B      'Player # 4',$00
rsc_str_65_player_5:DC.B      'Player # 5',$00
rsc_str_66_player_6:DC.B      'Player # 6',$00
rsc_str_67_player_7:DC.B      'Player # 7',$00
rsc_str_68_player_8:DC.B      'Player # 8',$00
rsc_str_69_player_9:DC.B      'Player # 9',$00
rsc_str_70_player_10:DC.B      'Player #10',$00
rsc_str_71_player_11:DC.B      'Player #11',$00
rsc_str_72_player_12:DC.B      'Player #12',$00
rsc_str_73_player_13:DC.B      'Player #13',$00
rsc_str_74_player_14:DC.B      'Player #14',$00
rsc_str_75_player_15:DC.B      'Player #15',$00
rsc_str_76_player_16:DC.B      'Player #16',$00
rsc_str_77_o_tay:DC.B      'O-Tay!',$00
rsc_str_78_friendly_fire:DC.B      'Friendly Fire',$00
rsc_str_79_the_game_is:DC.B      'The game is',$00
rsc_str_80_suspended:DC.B      'suspended.',$00
rsc_str_81_player_xx:DC.B      'Player #xx',$00
rsc_str_82_name_____________:DC.B      'Name: __________',$00
rsc_str_83_nnnnnnnnnn:DC.B      'nnnnnnnnnn',$00
rsc_str_84_OK:DC.B      'OK',$00
rsc_str_85_MIDIMAZE_10:DC.B      'MIDIMAZE 1.0',$00
rsc_str_86_copyright_1987:DC.B      'Copyright (c) 1987',$00
rsc_str_87_xanth_fx:DC.B      'XANTH F/X',$00
rsc_str_88_all_rights_reserved:DC.B      'All rights reserved.',$00
rsc_str_89_wow:DC.B      'Wow!',$00
rsc_str_90_this_is_a:DC.B      'This is a',$00
rsc_str_91_midicam:DC.B      'MIDICAM',$00

rsrc_str_cant_open_window:DC.B      '[3][ |Can',$27,'t open| window!][OK]',$00
rsrc_str_this_is_a_solo_machine:DC.B      '[1][ |This is a|  SOLO| machine.][OK]',$00
rsrc_str_this_is_the_master_machine:DC.B      '[1][ |This is the|  MASTER| machine.][OK]',$00
rsrc_str_midimaze_maz_1:DC.B      'MIDIMAZE.MAZ',$00
rsrc_str_midimaze_maz_2:DC.B      'MIDIMAZE.MAZ',$00
rsrc_str_mouse_control_selected:DC.B      '[1][ |Mouse control| selected.][OK]',$00
rsrc_str_joystick_control_selected:DC.B      '[1][ |Joystick control|  selected.][OK]',$00
rsrc_str_what_about_it:DC.B      '[2][ |What about it?][tee-hee]',$00
rsrc_str_midi_ring_booboo_1:DC.B      '[1][ |MIDI ring|boo-boo][Oh no!]',$00
rsrc_str_too_many_machines_online_1:DC.B      '[3][ |Too many|machines|on-line!][Oops]',$00
rsrc_str_please_load_a_maze_first:DC.B      '[3][ |Please load|a maze first][OK]',$00
rsrc_str_midi_ring_booboo_2:DC.B      '[1][ |MIDI ring|boo-boo][Oh no!]',$00
rsrc_str_too_many_machines_online_2:DC.B      '[3][ |Too many|machines|on-line!][Oops]',$00
rsrc_str_the_midi_ring_has_times_out:DC.B      '[3][ |The MIDI ring|has timed out.][Uh-oh]',$00
rsrc_str_game_terminated:DC.B      '[3][ |Game terminated.][OK]',$00
rsrc_str_maze_too_small:DC.B      '[3][ |Guru bu-bu:|(maze too small?)][ok]',$00
rsrc_str_do_you_really_wanna_quit:DC.B      '[2][ |Do you really|wanna quit?][Yeah|Nah]',$00

str_drone_type_target_br:DC.B      '(Target)',$00
str_drone_type_std_br:DC.B      '(Standard)',$00
str_drone_type_ninja_br:DC.B      '(Ninja)',$00
str_dash:DC.B      '-------',$00
str_player:DC.B      'Player# xx',$00
str_drone_type_target:DC.B      'Target #',$00
str_drone_type_std:DC.B      'Std.Drone ',$00
str_drone_type_ninja:DC.B      'Ninja #',$00
str_remote:DC.B      '(Remote)',$00

objekt_anz:DC.W      $00

                                DC.L      str_cant_open_maze_file
str_error_reading_maze_file_ptr:DC.L      str_error_reading_maze_file
str_maze_file_format_booboo_ptr:DC.L      str_maze_file_format_booboo
str_maze_file_header_booboo_ptr:DC.L      str_maze_file_header_booboo
str_cant_open:DC.B      '[3][ |Can',$27,'t open|"',$00,$00
str_cant_open_2:DC.B      '"][OK]',$00

face_shape_tab: DC.W 0,19,18,17 ;Shapenummern fr die Blickrichtung
                DC.W 16,15,14,13 ;in Abhngigkeit vom Blickwinkel
                DC.W 12,11,10,10 ;in 11 (32 pro 256)
                DC.W 10,10,10,10
                DC.W 10,10,10,10
                DC.W 10,10,9,8
                DC.W 7,6,5,4
                DC.W 3,2,1,0

mouse_defaults: DC.B 0,0,1,1
str_cant_open_maze_file:DC.B      '[3][ |Can',$27,'t open|maze file][OK]',$00
str_error_reading_maze_file:DC.B      '[3][ |Error reading|maze file][OK]',$00
str_maze_file_format_booboo:DC.B      '[3][ |Maze file|format boo-boo][Who cares?]',$00
str_maze_file_header_booboo:DC.B      '[3][ |Maze file|header boo-boo][OK]',$00,$00

live_shape_img: DC.B $00,$FF,$00,$00,$03,$00,$C0,$00
                DC.B $0C,$00,$30,$00,$11,$81,$88,$00
                DC.B $23,$C3,$C4,$00,$43,$C3,$C2,$00
                DC.B $43,$C3,$C2,$00,$83,$C3,$C1,$00
                DC.B $83,$C3,$C1,$00,$81,$81,$81,$00
                DC.B $80,$00,$01,$00,$98,$00,$19,$00
                DC.B $8C,$00,$31,$00,$46,$00,$62,$00
                DC.B $43,$81,$C2,$00,$20,$FF,$04,$00
                DC.B $10,$00,$08,$00,$0C,$00,$30,$00
                DC.B $03,$00,$C0,$00,$00,$FF,$00,$00
                DC.B $00,$FF,$00,$00,$03,$00,$C0,$00
                DC.B $0C,$00,$30,$00,$11,$81,$88,$00
                DC.B $23,$C3,$C4,$00,$43,$C3,$C2,$00
                DC.B $43,$C3,$C2,$00,$83,$C3,$C1,$00
                DC.B $83,$C3,$C1,$00,$81,$81,$81,$00
                DC.B $80,$00,$01,$00,$80,$00,$01,$00
                DC.B $80,$00,$01,$00,$43,$FF,$C2,$00
                DC.B $44,$00,$22,$00,$20,$00,$04,$00
                DC.B $10,$00,$08,$00,$0C,$00,$30,$00
                DC.B $03,$00,$C0,$00,$00,$FF,$00,$00
                DC.B $00,$FF,$00,$00,$03,$00,$C0,$00
                DC.B $0C,$00,$30,$00,$11,$81,$88,$00
                DC.B $23,$C3,$C4,$00,$43,$C3,$C2,$00
                DC.B $43,$C3,$C2,$00,$83,$C3,$C1,$00
                DC.B $83,$C3,$C1,$00,$81,$81,$81,$00
                DC.B $80,$00,$01,$00,$80,$00,$01,$00
                DC.B $80,$00,$01,$00,$40,$7E,$02,$00
                DC.B $41,$81,$82,$00,$22,$00,$44,$00
                DC.B $10,$00,$08,$00,$0C,$00,$30,$00
                DC.B $03,$00,$C0,$00,$00,$FF,$00,$00
                DC.B $00,$FF,$00,$00,$03,$00,$C0,$00
                DC.B $0C,$00,$30,$00,$10,$00,$08,$00
                DC.B $22,$81,$44,$00,$41,$00,$82,$00
                DC.B $42,$81,$42,$00,$84,$00,$21,$00
                DC.B $80,$00,$01,$00,$80,$00,$01,$00
                DC.B $80,$00,$01,$00,$80,$7F,$01,$00
                DC.B $81,$80,$C1,$00,$42,$00,$22,$00
                DC.B $40,$00,$02,$00,$20,$00,$04,$00
                DC.B $10,$00,$08,$00,$0C,$00,$30,$00
                DC.B $03,$00,$C0,$00,$00,$FF,$00,$00
                DS.W 24
                DC.B $00,$7F,$00,$00,$00,$7F,$00,$00
                DC.B $00,$3E,$00,$00,$00,$1C,$00,$00
                DS.W 208

wand_farb_tab:  DC.W 2 ; andere Perspektive
                DC.W 6 ; normale Wandfarbe (bei SW=2)

bmask_d:        DC.W $0000,$0000,$FFFF,$0000
                DC.W $0000,$FFFF,$FFFF,$FFFF
bmask_a:        DC.W $FFFF,$7FFF,$3FFF,$1FFF
                DC.W $0FFF,$07FF,$03FF,$01FF
                DC.W $00FF,$007F,$003F,$001F
                DC.W $000F,$0007,$0003,$0001
bmask_b:        DC.W $8000,$C000,$E000,$F000
                DC.W $F800,$FC00,$FE00,$FF00
                DC.W $FF80,$FFC0,$FFE0,$FFF0
                DC.W $FFF8,$FFFC,$FFFE,$FFFF
bmask_c:        DC.W $8000,$4000,$2000,$1000
                DC.W $0800,$0400,$0200,$0100
                DC.W $0080,$0040,$0020,$0010
                DC.W $0008,$0004,$0002,$0001

fm_sw_0:        DC.W $0000,$0000,$0000,$0000,$0000
fm_sw_1:        DC.W $FFFF,$FFFF,$FFFF,$FFFF,$FFFF
fm_sw_muster0:  DC.W $AAAA,$5555,$AAAA,$5555,$AAAA
fm_sw_muster1:  DC.W $0000,$FFFF,$0000,$FFFF,$0000
fm_sw_muster2:  DC.W $AAAA,$AAAA,$AAAA,$AAAA,$AAAA
fm_sw_muster3:  DC.W $1111,$8888,$4444,$2222,$1111
fm_sw_muster4:  DC.W $8888,$1111,$2222,$4444,$8888
fm_sw_muster5:  DC.W $4444,$8888,$4444,$2222,$4444
fm_sw_muster6:  DC.W $0000,$8888,$5555,$2222,$0000
fm_sw_muster7:  DC.W $4444,$2222,$5555,$AAAA,$4444
fm_sw_muster8:  DC.W $0000,$CCCC,$CCCC,$0000,$0000
fm_sw_muster9:  DC.W $9249,$CCCC,$6666,$3333,$9249
fm_sw_muster10: DC.W $6666,$CCCC,$9999,$3333,$6666
fm_sw_muster11: DC.W $8888,$FFFF,$8888,$8888,$8888
fm_sw_muster12: DC.W $0000,$EEEE,$0000,$7777,$0000
fm_sw_muster13: DC.W $0000,$4444,$EEEE,$4444,$0000
fm_sw_muster14: DC.W $2222,$8888,$AAAA,$AAAA,$2222
fm_sw_muster15: DC.W $0000,$4444,$AAAA,$4444,$0000
fm_sw_muster16: DC.W $3333,$CCCC,$CCCC,$3333,$3333

sw_farbfll_tab:DC.L fm_sw_0
                DC.L fm_sw_1
sw_fllmuster:  DC.L fm_sw_muster0
                DC.L fm_sw_muster1
                DC.L fm_sw_muster2
                DC.L fm_sw_muster3
                DC.L fm_sw_muster4
                DC.L fm_sw_muster5
                DC.L fm_sw_muster6
                DC.L fm_sw_muster7
                DC.L fm_sw_muster8
                DC.L fm_sw_muster9
                DC.L fm_sw_muster10
                DC.L fm_sw_muster11
                DC.L fm_sw_muster12
                DC.L fm_sw_muster13
                DC.L fm_sw_muster14
                DC.L fm_sw_muster15
                DC.L fm_sw_muster16

col_farb_jmptab:DC.L dr_c_shape8
                DC.L dr_c_shape9
                DC.L dr_c_shape10
                DC.L dr_c_shape11
                DC.L dr_c_shape12
dr_c_shp_tab2:  DC.L dr_c_shape13
                DC.L dr_c_shape14
                DC.L dr_c_shape15
                DC.L dr_c_shape16
                DC.L dr_c_shape17
                DC.L dr_c_shape18
                DC.L dr_c_shape19
                DC.L dr_c_shape20
                DC.L dr_c_shape21
col_farb2jmptab:DC.L dr_c_shape22
                DC.L dr_c_shape23



      BSS
      DS.B      1024
ustk:DS.L      1
_read_vbclock_ret:DS.W      1
midi_timeout_value:DS.W      1
temp_player_name:DS.L      1
L0B34:DS.L      1
joystick_flag:DS.W      1
init_joy_flag:DS.W      1
calc_tab:DS.W 2*17*9
table_size:DS.W      1
table_list:DS.W      40
draw_elem_count:DS.W      1
draw_elem_list: DS.B 12*max_elements
mult_tab_160:   DS.W 256        ;160er Multiplikationstabelle
mult_tab_80:    DS.W 400        ;80er Multiplikationstabelle
screen_offs_adr:DS.L      1
saveret:DS.L      1
_VDIpb:DS.L      5
vdi_intin:DS.W      128
window_height2:DS.W      1
score_table:DS.W      16
player_joy_table:DS.W      16
pxy:DS.W      8
vdi_intout:DS.W      128
team_flag:DS.W      1
drone_var_3:DS.W      1
maze_size:DS.W      1
aesbp:DS.L      6
color_cnv_back:DS.W 16
drone_var_1:DS.W      1
midicam_autoselect_player_flag:DS.W      1
set_shape_tab3:DS.B      1504
temp_WORD:DS.W      1
reload_time:DS.W      1
var_richtung:DS.W 1
      ALIGN 256
screen_buffer:DS.B      32000
    ALIGN
set_shape_face_offset_table:DS.W      24
set_shape_scaling_table:DS.W      24
vdi_ptsin:DS.W      128
sinus_table:DS.L      1
regen_time:DS.W      1
player_data:DS.B      ply_size*16
drones_active:DS.W      1
color_cnv_frame:DS.W      16
objekt_table:DS.B      6*32
set_shape_tab6:DS.L      24
vdi_ptsout:DS.W      128
akt_score:DS.W      16
load_buffer1:DS.B      130
shape_face_data:DS.B      3172
shape_img:DS.B      130052
aes_global:DS.W      15
vdi_handle:DS.W      1
we_dont_have_a_winner:DS.W      1
midimaze_d8a_filehandle:DS.W      1
screen_offset:DS.W      1
crossedsmil_ptr:DS.L      1
live_shape_ptr:DS.L      1
screen_rez:DS.W      1
blinzshape_ptr:DS.L      1
var_y_koord:DS.W      1
var_x_koord:DS.W      1
mapsmily2_ptr:DS.L      1
rsrc_tree_ptr:DS.L      1
set_shape_tab2:DS.W      24
display_2d_map_flag:DS.W      1
saved_sound_regs:DS.B      14
mouse_button:DS.W      1
mouse_dx:DS.W      1
mouse_dy:DS.W      1
_random_seed:DS.W      1
aes_contrl:DS.W      4
aes_intin:DS.W      16
aes_intout:DS.W      7
drone_angle_table:DS.W 33
screen_flag:DS.W      1
all_players:DS.W      1
word_per_line:DS.W      1
revive_time:DS.W      1
mapsmily_ptr:DS.L      1
drone_var_6:DS.W      1
KBDVECS_ptr:DS.L      1
MFDB    src_MFDB; DS.W      10
aesbp_ptr:DS.L      1
own_number:DS.W      1
midicam_player_number:DS.W      1
sound_shot_ptr:DS.L      1
sound_hit_ptr:DS.L      1
machines_online:DS.W      1
shape_ptr:DS.L      1
main_wind_off:DS.W      1
friendly_fire:DS.W      1
MFDB dest_MFDB; DS.W 10
joystick:DS.B      4
pscore_wind_off:DS.W      1
screen_offset_score_notes:DS.W      1
drone_var_8:DS.W      1
maze_datas:DS.B      64*64
KBDVECS_midivec_ptr:DS.L      1
KBDVECS_vkbderr_ptr:DS.L      1
KBDVECS_vmiderr_ptr:DS.L      1
KBDVECS_statvec_ptr:DS.L      1
KBDVECS_mousevec_ptr:DS.L      1
KBDVECS_clockvec_ptr:DS.L      1
KBDVECS_joyvec_ptr:DS.B      8
KBDVECS_ikbdsys_ptr:DS.L      1
live_wind_off:DS.W      1
team_scores:DS.W      4
app_global_identifier:DS.W      1
vdi_contrl:DS.W      12
revive_lives:DS.W      1
loosershape_ptr:DS.L      1
aes_addrin:DS.L      2
user_is_midicam:DS.W      1
save_part_of_screen_for_dialog_buffer:DS.B      10512
drone_var_7:DS.W      1
xy_speed_table: DS.W 256*2
shape_face_ptr:DS.L      1
drone_var_2:DS.W      1
drone_var_5:DS.W      1
rsrc_object_array:DS.L      14
wind_handle:DS.W      1
protection_flag:DS.W      1
window_width:DS.W      1
window_height:DS.W      1
midicam_player_count:DS.W      1
midicam_timer_counter:DS.W      1
active_drones:DS.W      3
set_shape_tab4:DS.W      24
aes_addrout:DS.L      1
window_width2:DS.W      1
screen_ptr:DS.L      2
drone_var_4:DS.W      1
      END
